/******/!function(t){function e(r){if(i[r])return i[r].exports;var o=i[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}// webpackBootstrap
/******/
var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var r=i(1),o=i(2),n=i(3),a=i(4),s=i(7),l=i(54),u=i(55),c=i(57),h=i(59),d=i(62),p=i(63),f=i(65),g=i(66),v=i(67),m=i(68),b=i(69),y=i(73),w=i(75),C=i(76),x=i(77),k=i(78),O=i(82),N=i(83),A=i(84),S=!1;angular.module("connectivityMatrixJs",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ui.router","ui.bootstrap","toastr","ui.select","ngTagsInput"]).constant("malarkey",malarkey).constant("moment",moment).constant("resource",S?"http://54.164.73.78:8000/":"http://localhost:8000/").config(r.config).config(o.routerConfig).run(n.runBlock).service("cmResource",l.cmResource).service("cmGraphFactory",u.cmGraphFactory).service("cmMatrixFactory",c.cmMatrixFactory).service("cmModelFactory",h.cmModelFactory).service("cmMatrixViewFactory",s.cmMatrixViewFactory).service("viewState",m.ViewState).controller("MainController",a.MainController).controller("ModalListFilterController",d.ModalListFilterController).controller("ModalHistogramFilterController",p.ModalHistogramFilterController).directive("queryDirective",f.QueryDirective).directive("numPathsDirective",function(){return new g.NumPathsDirective}).service("modalService",v.ModalService).directive("nodeLinkViewDirective",function(){return new b.NodeLinkViewDirective}).directive("pathListViewDirective",function(){return new y.PathListViewDirective}).directive("adjustableColorScaleDirective",function(){return new w.AdjustableColorScaleDirective}).service("colorScaleService",C.ColorScaleService).service("cypherGeneratorService",k.CypherGeneratorService).directive("queryBuilder",function(){return new x.QueryBuilderDirective}).directive("queryBuilderRegex",function(){return new A.QueryBuilderRegexDirective}).service("dataSelectionService",O.DataSelectionService).controller("DataSelectionController",N.DataSelectionController)},function(t,e){"use strict";function i(t,e){"ngInject";t.debugEnabled(!0),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0}i.$inject=["$logProvider","toastrConfig"],Object.defineProperty(e,"__esModule",{value:!0}),e.config=i},function(t,e){"use strict";function i(t,e){"ngInject";t.state("home",{url:"/flights",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main",resolve:{database:function(){return"flights"}}}),t.state("marclab",{url:"/marclab",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main",resolve:{database:function(){return"marclab"}}}),e.otherwise("/marclab")}i.$inject=["$stateProvider","$urlRouterProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e.routerConfig=i},function(t,e){"use strict";function i(t){"ngInject";t.debug("runBlock end")}i.$inject=["$log"],Object.defineProperty(e,"__esModule",{value:!0}),e.runBlock=i},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(5),a=i(6),s=function(){function t(e,i,o,a,s,l,u,c,h,d,p,f,g,v,m,b){"ngInject";r(this,t),this.viewState=d,this.$scope=o,this.$log=e,this.toastr=s,this.cmModelFactory=u,this.cmGraphFactory=h,this.cmMatrixFactory=c,this.cmMatrixViewFactory=l,this.modalService=p,this.$timeout=i,this.$http=g,this.colorScaleService=v,this.resource=m,this.queryUi={},this.areDetailsVisible=!0,this.hasActiveQuery=!1,this.hasQueryError=!1,this.hasGoodData=!0,this.queryError="",this.debug=!0,this.$q=a,this.dataSelectionService=b,this.queryString="",this.ui={},this.database=f,this.isMarclabData="marclab"==this.database,this.isNodeListVisible=!0,this.ui.debugNodeHiding=!1,this.ui.debugNodeHidingId=168,this.ui.debugNodeLinkLayout=!1,this.ui.debugRowFilterScents=!1,this.ui.debugColFilterScents=!1,this.availablePanels=["Node Link","Path List"],this.selectedPanel=this.availablePanels[1],this.ui.matrixScales=["linear","log"],this.ui.selectedMatrixScale=this.isMarclabData?this.ui.matrixScales[0]:this.ui.matrixScales[1],this.ui.selectedNodeListScale=this.isMarclabData?this.ui.matrixScales[0]:this.ui.matrixScales[1],this.isProduction=window.location.href.indexOf("vdl")>0,this.isMarclabData&&(this.colorScaleService.setUseLinearColorScale(!0,0),this.colorScaleService.setUseLinearColorScale(!0,1),this.colorScaleService.setUseLinearColorScale(!0,2),this.colorScaleService.setUseLinearColorScale(!0,3)),this.activateWithClientOnlyData();var y=!1,w=null;y=!0;var C=null;if("marclab"==this.database){if(y){var x="/assets/mock/defaultMarclab.json";this.isProduction&&(x="http://vdl.sci.utah.edu/graffinity/assets/mock/defaultMarclab.json"),this.requestInitialData(x)}else w=n.mock.output.graph,C=n.mock.output.matrix;this.defaultQuery="MATCH p = n-[SYNAPSE*1..2]->m WHERE n.label in ['CBb4w', 'CBb3n'] and m.label in ['GC', 'GC ON'] RETURN p limit 1000;"}else"flights"==this.database&&(y?this.requestInitialData("/assets/mock/defaultFlights.json"):(w=n.mock.smallFlightResult.graph,C=n.mock.smallFlightResult.matrix),this.defaultQuery="MATCH p = (s)-[x:FLIGHT]->(i)-[y:FLIGHT]->(t)  WHERE s.state in ['CA', 'OR', 'WA']  AND t.state in ['CT', 'ME', 'MA', 'RI', 'NH', 'VT'] AND x.carrier = y.carrier AND x.arr_time < y.dep_time RETURN p limit 100;");y||this.activate(w,C)}return t.$inject=["$log","$timeout","$scope","$q","toastr","cmMatrixViewFactory","cmModelFactory","cmMatrixFactory","cmGraphFactory","viewState","modalService","database","$http","colorScaleService","resource","dataSelectionService"],o(t,[{key:"activateWithClientOnlyData",value:function(){var t=this;t.hasGoodData=!1,t.isNodeListVisible=!1;var e=["/assets/mock/2018.01.23-network-514-1-hop.json","/assets/mock/2018.01.23-network-all-hops.json"];this.isProduction&&(e=["http://vdl.sci.utah.edu/graffinity/assets/mock/2018.01.23-network-514-1-hop.json","http://vdl.sci.utah.edu/graffinity/assets/mock/2018.01.23-network-all-hops.json"]);for(var i=function(e){t.cmModelFactory.setGraphData(e)},r=function(r){for(var o=[],n=0;n<r.length;++n){var a={name:r[n].config.url,nodes:r[n].data.nodes,edges:r[n].data.edges};o.push(a)}t.dataSelectionService.getSelectionFromList(e,o,i)},o=[],n=0;n<e.length;++n)o.push(t.$http.get(e[n]));t.$q.all(o).then(r)}},{key:"activate",value:function(t,e,i){var r=this.cmGraphFactory.createFromJsonObject(t,this.database),o=this.cmMatrixFactory.createFromJsonObject(e);this.model=this.cmModelFactory.createModel(r,o),i||(i={availableNumHops:[1,2,3],selectedNumHops:2,nodes:["CBb.*","AC","CBb.*"],edges:["*","*"]});var n=this;n.updateNumPaths(),this.$timeout(function(){n.createMatrixAndUi(n.model),n.$scope.$broadcast("setQuery",i)},1)}},{key:"createCategoricalCollapseControls",value:function(t){this.ui.availableCategoricalAttr=["none"],this.ui.availableCategoricalAttr=this.ui.availableCategoricalAttr.concat(t.getCmGraph().getCategoricalNodeAttrNames()),this.ui.selectedCategoricalColAttr=this.ui.availableCategoricalAttr[0],this.ui.selectedCategoricalRowAttr=this.ui.availableCategoricalAttr[0],this.ui.selectedIntermediateRowAttr=this.ui.availableCategoricalAttr[0]}},{key:"createMatrix",value:function(t){this.model=t,this.viewState.setModel(t),this.matrixManager?(this.matrixManager.setModel(t),this.nodeListManager.setModel(t)):(this.matrixManager=this.cmMatrixViewFactory.createConnectivityMatrixManager(this.matrixContainer,t,this.$scope,this.viewState,this),this.nodeListManager=this.cmMatrixViewFactory.createNodeListManager(this.nodeListContainer,t,this.$scope,this.viewState,this)),this.$scope.$broadcast("setModel",t);var e=this.matrixManager.matrix.getAvailableMetrics(this.database);this.ui.matrixMetrics=angular.copy(e),this.ui.selectedMatrixMetric=this.ui.matrixMetrics[0],this.setMetric("matrix",this.ui.selectedMatrixMetric),e=this.nodeListManager.matrix.getAvailableMetrics(this.database),this.ui.nodeListMetrics=angular.copy(e),this.ui.selectedNodeListMetric=this.ui.nodeListMetrics[0],this.setMetric("nodeList",this.ui.selectedNodeListMetric)}},{key:"createMatrixAndUi",value:function(t){this.matrixContainer=d3.select("#matrices-row"),this.nodeListContainer=d3.select("#node-list-col"),this.createCategoricalCollapseControls(t),this.createReorderControls(),this.createMatrix(t),this.matrixManager.setUseAnimation(!1),this.onSortOrderChanged("random"),this.matrixManager.setUseAnimation(!0)}},{key:"createReorderControls",value:function(){this.ui.orders=["custom","optimal leaf","database",""],this.ui.selectedSortOrder=this.ui.orders[1]}},{key:"createQueryString",value:function(t){for(var e="",i=0;i<t.nodes.length;++i)e=e+"("+t.nodes[i]+")",i<t.edges.length&&(e=e+"-["+t.edges[i]+"]->");return e}},{key:"onCollapseColsByAttr",value:function(t){"none"==t?this.model.expandAllCols():(this.model.expandAllCols(),this.model.collapseColsByAttr(t)),this.matrixManager.setModel(this.model),this.setMetric("matrix",this.ui.selectedMatrixMetric),this.matrixManager.setUseAnimation(!1),this.matrixManager.matrices.forEach(function(t){this.model.areColsCollapsed&&t.onToggleAttributeRow(this.matrixManager.matrix.attributes.indexOf(this.model.colsCollapseAttr),!0),this.model.areRowsCollapsed&&t.onToggleAttributeCol(this.matrixManager.matrix.attributes.indexOf(this.model.rowCollapseAttr),!0)}.bind(this)),this.onSortOrderChanged(this.ui.selectedSortOrder),this.matrixManager.setUseAnimation(!0)}},{key:"onCollapseIntermediateRows",value:function(t){"none"==t?this.model.expandIntermediateRows():(this.model.expandIntermediateRows(),this.model.collapseIntermediateNodesByAttr(t)),this.nodeListManager.setModel(this.model),this.setMetric("nodeList",this.ui.selectedNodeListMetric),this.nodeListManager.matrices.forEach(function(t){this.model.areIntermediateNodesCollapsed&&t.onToggleAttributeCol(this.nodeListManager.matrix.attributes.indexOf(this.model.intermediateNodeCollapseAttr),!0)}.bind(this))}},{key:"onCollapseRowsByAttr",value:function(t){"none"==t?this.model.expandAllRows():(this.model.expandAllRows(),this.model.collapseRowsByAttr(t)),this.matrixManager.setModel(this.model),this.setMetric("matrix",this.ui.selectedMatrixMetric),this.matrixManager.setUseAnimation(!1),this.matrixManager.matrices.forEach(function(t){this.model.areColsCollapsed&&t.onToggleAttributeRow(this.matrixManager.matrix.attributes.indexOf(this.model.colsCollapseAttr),!0),this.model.areRowsCollapsed&&t.onToggleAttributeCol(this.matrixManager.matrix.attributes.indexOf(this.model.rowCollapseAttr),!0)}.bind(this)),this.onSortOrderChanged(this.ui.selectedSortOrder),this.matrixManager.setUseAnimation(!0)}},{key:"onColorScaleChanged",value:function(t){this.colorScaleService.setUseLinearColorScale("linear"==t),this.onMetricChanged("colormap")}},{key:"onDebugNodeHiding",value:function(t,e){e?this.viewState.showNodes([parseInt(t)]):this.viewState.hideNodes([parseInt(t)])}},{key:"onLoadClicked",value:function(){this.$timeout(function(){angular.element("#fileInputElement").click()},0)}},{key:"onLoadFile",value:function(t){var e=this,i=new FileReader;e.isLoadingFromFile=!0,e.hasGoodData=!1,e.isNodeListVisible=!1,i.onload=function(t){var i=angular.fromJson(t.target.result);e.cmModelFactory.setGraphData(i.graph),e.activate(i.graph,i.matrix,i.query),e.queryString=e.createQueryString(i.query),e.$timeout(function(){e.hasGoodData=!0,e.isLoadingFromFile=!1},0)},e.$timeout(function(){i.readAsText(t.files[0])},0)}},{key:"onPathsSelected",value:function(t){this.$scope.$apply();var e=this;this.$timeout(function(){e.$scope.$broadcast("setSelectedPaths",t)},0)}},{key:"onQuerySubmitted",value:function(t){var e=this;e.$log.debug("onQuerySubmitted",t),e.queryString=e.createQueryString(t),e.hasActiveQuery=!0,e.hasQueryError=!1,e.hasGoodData=!1,d3.select("#encoding-legend").selectAll("*").remove();var i=function(t){e.model=t,e.viewState.setModel(t),e.updateNumPaths(),e.$timeout(function(){e.hasGoodData=!0,e.createMatrixAndUi(t),e.hasActiveQuery=!1},0)},r=function(t){e.hasActiveQuery=!1,e.hasQueryError=!0,e.$log.error("The query failed",t),t.data?e.queryError="Query Error: \n"+t.data.message:e.queryError="The server sent no response! Check console."};e.$timeout(function(){e.cmModelFactory.createModelFromGraphSearch(t).then(i,r)},0)}},{key:"onSaveClicked",value:function(){var t={query:this.queryUi,matrix:this.model.getCmMatrix().getJsonMatrix(),graph:this.model.getCmGraph().getJsonGraph(),data:this.cmModelFactory.graph},e=JSON.stringify(t),i=new Blob([e],{type:"text/plain;"});saveAs(i,this.database+"_state.json")}},{key:"onSortOrderChanged",value:function(t){var e=this.matrixManager.getMajorRowsAndColsAsScalarMatrix(),i=void 0,r=void 0;if(1==e.length&&1==e[0].length)return void this.matrixManager.setSortOrders([0],[0]);if(1==e.length&&e[0].length>1)return void this.matrixManager.setSortOrders([0],reorder.permutation(e[0].length));if("random"==t)i=reorder.randomPermutation(e.length),r=reorder.randomPermutation(e[0].length);else if("optimal leaf"==t){var o=reorder.transpose(e),n=reorder.dist()(e),a=reorder.dist()(o),s=reorder.optimal_leaf_order();i=s.distanceMatrix(n)(e),r=s.distanceMatrix(a)(o)}else{if("database"!=t)return;i=reorder.permutation(e.length),r=reorder.permutation(e[0].length)}this.matrixManager.setSortOrders(i,r)}},{key:"openNodeAttributeFilter",value:function(t,e,i){var r=!1;e||(e=this.viewState.getAttributeNodeGroup(i)),r=t==this.model.getCmGraph().getNodeIdName()?!0:this.model.isCategoricalAttribute(t);var o=a.Utils.getFlattenedLists(e),n=this.model.getNodeAttr(o,t);if(r){var s=this.viewState.getCategoricalFilter(t,i),l=function(e){this.viewState.setCategoricalFilter(t,i,e),this.updateLegend()}.bind(this);this.modalService.getSelectionFromList("Filter by "+t,Object.keys(s),s,l)}else{var u=this.viewState.getQuantitativeFilter(t,i,n),c=function(t){var e=t.attribute,r=t.range;this.viewState.setQuantitativeFilter(e,i,r),this.updateLegend()}.bind(this);this.modalService.getValueRange("Filter by "+t,n,u,o,t,c)}}},{key:"resetAttributeFilter",value:function(t,e){this.viewState.resetAttributeFilter(t,e)}},{key:"requestInitialData",value:function(t){var e=this,i=function(t){e.activate(t.graph,t.matrix,t.query)},r=function(t){e.$log.error("Something went wrong loading initial datasets!",t)};e.$http.get(t).success(i).error(r)}},{key:"setEncoding",value:function(t,e,i){var r=this.matrixManager.matrix;"matrix"==t?this.ui.matrixHasScaleOption=i.hasScaleOption:(this.ui.nodeListHasScaleOption=i.hasScaleOption,r=this.nodeListManager.matrix),r.setEncoding(i,e),angular.element('[data-toggle="tooltip"]').tooltip()}},{key:"setEncodingScale",value:function(t,e){var i=this.matrixManager.matrix;"matrix"==t?(this.colorScaleService.setUseLinearColorScale("linear"==e,0),this.colorScaleService.setUseLinearColorScale("linear"==e,1),i.setEncoding(this.ui.selectedMatrixEncoding,this.ui.selectedMatrixMetric)):(i=this.nodeListManager.matrix,this.colorScaleService.setUseLinearColorScale("linear"==e,2),this.colorScaleService.setUseLinearColorScale("linear"==e,3),i.setEncoding(this.ui.selectedNodeListEncoding,this.ui.selectedNodeListMetric)),angular.element('[data-toggle="tooltip"]').tooltip()}},{key:"setMetric",value:function(t,e){var i=null,r=null;"matrix"==t?(this.model.areRowsCollapsed&&this.model.areColsCollapsed?(this.ui.primaryScaleName="set-to-set ",this.ui.secondaryScaleName=""):this.model.areRowsCollapsed&&!this.model.areColsCollapsed?(this.ui.primaryScaleName="set-to-node ",this.ui.secondaryScaleName="node-to-node "):!this.model.areRowsCollapsed&&this.model.areColsCollapsed?(this.ui.primaryScaleName="node-to-set ",this.ui.secondaryScaleName="node-to-node "):this.model.areRowsCollapsed||this.model.areColsCollapsed||(this.ui.primaryScaleName="node-to-node ",this.ui.secondaryScaleName=""),i=this.matrixManager.matrix,this.ui.matrixEncodings=i.getAvailableEncodings(e.output),this.ui.selectedMatrixEncoding=this.ui.matrixEncodings[0],r=this.ui.selectedMatrixEncoding):"nodeList"==t&&(this.model.areIntermediateNodesCollapsed?(this.ui.primaryNodeListScaleName="set ",this.ui.secondaryNodeListScaleName="node "):(this.ui.primaryNodeListScaleName="node ",this.ui.secondaryNodeListScaleName=""),this.ui.nodeListScaleName=e.name,i=this.nodeListManager.matrix,this.ui.nodeListEncodings=i.getAvailableEncodings(e.output),this.ui.selectedNodeListEncoding=this.ui.nodeListEncodings[0],r=this.ui.selectedNodeListEncoding),this.setEncoding(t,e,r)}},{key:"updateNumPaths",value:function(){var t=this,e=t.model.getAllPaths();t.numPaths=0;for(var i=Object.keys(e),r=0;r<i.length;++r){var o=i[r];t.numPaths=t.numPaths+e[o].length}}},{key:"updateLegend",value:function(){d3.select("#encoding-legend").selectAll("*").remove();var t=d3.select("#encoding-legend").append("g").attr("transform","translate(1, 4)"),e=d3.select("#select-encoding").node().getBoundingClientRect().width;this.matrixManager.matrix.legend?(this.matrixManager.matrix.legend.createView(t,e,e),this.ui.hasLegend=!0):this.ui.hasLegend=!1}}]),t}();e.MainController=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};i.output={graph:{node_attributes:[{DataType:"index",Type:"int",Unique:"true",DisplayName:"id",Name:"ID"},{DataType:"categorical",Type:"string",Unique:"false",DisplayName:"label",Name:"Label"},{DataType:"id",Type:"int",Unique:"true",DisplayName:"structure",Name:"StructureID"},{DataType:"quantitative",Type:"float",Unique:"false",DisplayName:"completeness",Name:"Completeness"},{DataType:"quantitative",Type:"float",Unique:"false",DisplayName:"area",Name:"HullArea"},{DataType:"quantitative",Type:"int",Unique:"false",DisplayName:"locations",Name:"Locations"}],nodes:[{Completeness:.3333333333333333,HullArea:161365e3,StructureID:168,Locations:1335,Label:"CBb3m",ID:168},{Completeness:1,HullArea:102335e3,StructureID:35894,Locations:434,Label:"YAC",ID:35894},{Completeness:.3333333333333333,HullArea:120611e3,StructureID:120,Locations:100,Label:"CBb3m",ID:120},{Completeness:1,HullArea:170611e3,StructureID:142,Locations:1438,Label:"GC",ID:142},{Completeness:.5,HullArea:150611e3,StructureID:1,Locations:100,Label:"IAC",ID:1},{Completeness:1,HullArea:136599e3,StructureID:1724,Locations:1085,Label:"CBb3m",ID:1724},{Completeness:1,HullArea:52812e5,StructureID:5107,Locations:3299,Label:"GC",ID:5107},{Completeness:1,HullArea:230011e4,StructureID:18693,Locations:1327,Label:"AC",ID:18693}],edges:[{LinkedStructures:"12 -> 13",SourceStructureID:168,TargetStructureID:18693,TargetID:18693,SourceID:168,Type:"Ribbon Synapse",ID:0},{LinkedStructures:"1 -> 2",SourceStructureID:1724,TargetStructureID:35894,TargetID:35894,SourceID:1724,Type:"Ribbon Synapse",ID:1},{LinkedStructures:"1 -> 2",SourceStructureID:18693,TargetStructureID:1724,TargetID:1724,SourceID:18693,Type:"Conventional",ID:2},{LinkedStructures:"1 -> 2",SourceStructureID:120,TargetStructureID:1,TargetID:1,SourceID:120,Type:"Ribbon Synapse",ID:3},{LinkedStructures:"1 -> 2",SourceStructureID:1,TargetStructureID:5107,TargetID:5107,SourceID:1,Type:"Conventional",ID:4},{LinkedStructures:"1 -> 2",SourceStructureID:1,TargetStructureID:1724,TargetID:1724,SourceID:1,Type:"Conventional",ID:5},{LinkedStructures:"35928 -> 35930",SourceStructureID:35894,TargetStructureID:142,TargetID:142,SourceID:35894,Type:"Conventional",ID:6}],edge_attributes:[{DataType:"index",Type:"int",Unique:"true",DisplayName:"id",Name:"ID"},{DataType:"source-index",Type:"int",Unique:"false",DisplayName:"source id",Name:"SourceID"},{DataType:"target-index",Type:"int",Unique:"true",DisplayName:"target id",Name:"TargetID"},{DataType:"target-index",Type:"int",Unique:"true",DisplayName:"target id",Name:"TargetID"},{DataType:"categorical",Type:"string",Unique:"false",DisplayName:"edge type",Name:"Type"},{DataType:"string",Type:"string",Unique:"false",DisplayName:"structures",Name:"LinkedStructures"}]},matrix:{source_ids:[168,120,142,1724,5107],matrix:[[[],[],[],[],[]],[[],[],[],[],[[120,3,1,4,5107]]],[[],[],[],[],[]],[[],[],[[1724,1,35894,6,142]],[],[]],[[],[],[],[],[]]],target_ids:[168,120,142,1724,5107]}},i.smallFlightResult={lengths:{1:5,2:10,3:2},graph:{nodes:[{degree:424,lon:-83.34883583,state:"MI",lat:42.21205889,Airport:"DTW",city_name:"Detroit",ID:17,market:"31295"},{degree:669,lon:-115.1523333,state:"NV",lat:36.08036111,Airport:"LAS",city_name:"Las Vegas",ID:4,market:"32211"},{degree:236,lon:-122.5975,state:"OR",lat:45.58872222,Airport:"PDX",city_name:"Portland",ID:26,market:"34057"},{degree:1129,lon:-104.6670019,state:"CO",lat:39.85840806,Airport:"DEN",city_name:"Denver",ID:27,market:"30325"},{degree:1095,lon:-118.4080744,state:"CA",lat:33.94253611,Airport:"LAX",city_name:"Los Angeles",ID:13,market:"32575"},{degree:278,lon:-77.45580972,state:"VA",lat:38.94453194,Airport:"IAD",city_name:"Washington",ID:186,market:"30852"},{degree:549,lon:-73.77892556,state:"NY",lat:40.63975111,Airport:"JFK",city_name:"New York",ID:170,market:"31703"},{degree:470,lon:-71.00517917,state:"MA",lat:42.3643475,Airport:"BOS",city_name:"Boston",ID:9,market:"30721"},{degree:272,lon:-157.9224072,state:"HI",lat:21.31869111,Airport:"HNL",city_name:"Honolulu",ID:150,market:"32134"},{degree:836,lon:-122.3748433,state:"CA",lat:37.61900194,Airport:"SFO",city_name:"San Francisco",ID:35,market:"32457"}],edges:[{FlightNum:"0",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:17,Carrier:"DL",TargetID:9,ID:10588},{FlightNum:"1",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:17,Carrier:"B6",TargetID:9,ID:10618},{SourceID:150,Carrier:"DL",TargetID:170,ID:9607,FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653},{SourceID:13,Carrier:"B6",TargetID:9,ID:8989,FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:26,Carrier:"UA",TargetID:186,ID:1806},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"DL",TargetID:170,ID:9349},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:150,Carrier:"HA",TargetID:170,ID:12542},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:26,Carrier:"NK",TargetID:4,ID:13441},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"UA",TargetID:186,ID:6500},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"HA",TargetID:150,ID:12565},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:27,Carrier:"B6",TargetID:9,ID:9053},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"DL",TargetID:170,ID:10103},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:27,Carrier:"B6",TargetID:9,ID:8904},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"AA",TargetID:13,ID:8061},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"UA",TargetID:186,ID:6482},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:4,Carrier:"B6",TargetID:9,ID:11013},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:186,Carrier:"B6",TargetID:9,ID:11031},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:26,Carrier:"AS",TargetID:9,ID:8230},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:13,Carrier:"F9",TargetID:27,ID:12519},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:4,Carrier:"NK",TargetID:17,ID:13460},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:35,Carrier:"AA",TargetID:13,ID:7259},{FlightNum:"288",DepDate:"15-1-1",ArrTime:1445,DepTime:653,SourceID:13,Carrier:"DL",TargetID:9,ID:10456}],edge_attributes:[{DataType:"index",Type:"int",Unique:"true",DisplayName:"id",Name:"ID"},{DataType:"source-index",Type:"int",Unique:"false",DisplayName:"source id",Name:"SourceID"},{DataType:"target-index",Type:"int",Unique:"true",DisplayName:"target id",Name:"TargetID"},{DataType:"categorical",Type:"string",Unique:"false",DisplayName:"carrier",Name:"Carrier"}],node_attributes:[{DisplayName:"id",Name:"ID",DataType:"index",DatabaseName:"id",Unique:"true",Type:"int"},{DisplayName:"airport",Name:"Airport",DataType:"id",DatabaseName:"airport",Unique:"true",Type:"string"},{DisplayName:"city",Name:"city_name",DataType:"categorical",DatabaseName:"city_name",Unique:"false",Type:"string"},{DisplayName:"state",Name:"state",DataType:"categorical",DatabaseName:"state",Unique:"false",Type:"string"},{DisplayName:"market",Name:"market",DataType:"categorical",DatabaseName:"market",Unique:"false",Type:"string"},{DisplayName:"degree",Name:"degree",DataType:"quantitative",DatabaseName:"degree",Unique:"false",Type:"int"},{DisplayName:"lat",Name:"lat",DataType:"quantitative",DatabaseName:"lat",Unique:"false",Type:"float"},{DisplayName:"lon",Name:"lon",DataType:"quantitative",DatabaseName:"lon",Unique:"false",Type:"float"}]},matrix:{source_ids:[13,35,26],matrix:[[[[13,12519,27,9053,9],[13,12519,27,8904,9],[13,10456,9],[13,8989,9]],[]],[[[35,8061,13,10456,9],[35,7259,13,10456,9],[35,6500,186,11031,9],[35,6482,186,11031,9]],[[35,10103,170],[35,9349,170],[35,12565,150,12542,170],[35,12565,150,9607,170]]],[[[26,8230,9],[26,1806,186,11031,9],[26,13441,4,11013,9],[26,13441,4,13460,17,10618,9],[26,13441,4,13460,17,10588,9]],[]]],target_ids:[9,170]}},e.mock=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;e.Utils=i=function(){function t(e,i){var r=!0;return e.length!=i.length?!1:angular.isArray(e)||angular.isArray(i)?(e.forEach(function(o,n){r=e[n].length>0?r&&t(e[n],i[n]):0==e[n].length&&0==i[n].length?r&&!0:r&&e[n]==i[n]}),r):e==i}function e(t,e){for(var i={},r=p(e),o=0;o<r.length;++o)i[r[o]]=[];for(o=0;o<t.length;++o)i[e[o]]=i[e[o]].concat(t[o]);return i}function i(t,e,i){for(var r=0,o=0;o<e.length;++o)for(var n=e[o],a=1;a<n.length;a+=2){var s=n[a],l=i.graph.edge(n[a-1],n[a+1],s);r+=l[t].reduce(function(t,e){return t+e},0)}return Math.round(r)}function r(t){for(var e=[],i=0;i<t.length;++i)for(var r=t[i],o=0;o<r.length;++o)o%2==1&&e.push(r[o]);return p(e)}function o(t,e,i){if(e){for(var r=[],o=0;o<t.length;++o){var n=t[o][0],a=t[o][t[o].length-1];i[n]||i[a]||r.push(t[o])}return r}return t}function n(t){for(var e=[],i=0;i<t.length;++i)if(t[i].length)for(var r=0;r<t[i].length;++r)e.push(t[i][r]);else e.push(t[i]);return e}function a(t){for(var e=[],i=0;i<t.length;++i)for(var r=t[i],o=2;o<r.length-1;++o)o%2==0&&e.push(r[o]);return p(e)}function s(t,e){for(var i=[],r=0;r<t.length;++r)-1!=e.indexOf(t[r])&&i.push(t[r]);return i}function l(t,e){for(var i=0;i<t.length;++i)if(-1!=e.indexOf(t[i]))return!0;return!1}function u(t){for(var e=[],i=0;i<t.length;++i)for(var r=t[i],o=0;o<r.length;++o)o%2==0&&e.push(r[o]);return p(e)}function a(t){for(var e=[],i=0;i<t.length;++i)for(var r=t[i],o=1;o<r.length-1;++o)o%2==0&&e.push(r[o]);return p(e)}function c(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(r[0])}return p(e)}function h(t){for(var e=[],i=0;i<t.length;++i){var r=t[i];e.push(r[r.length-1])}return p(e)}function d(t){return 3==t.length?1:5==t.length?2:7==t.length?3:9==t.length?4:void 0}function p(t){for(var e=[],i=0;i<t.length;++i)-1==e.indexOf(t[i])&&e.push(t[i]);return e}function f(t){for(var e=t[0][0],i=t[0][0],r=0;r<t.length;++r)for(var o=0;o<t[r].length;++o)e=Math.min(t[r][o],e),i=Math.max(t[r][o],i);return[e,i]}function g(t,e){for(var i=0;i<t.length;++i){var r=t[i];r.splice(e,1),t[i]=r}return t}function v(t){for(var e=0,i=0;i<t.length;++i)e+=m(t[i]);return e}function m(t){for(var e=0,i=0;i<t.length;++i)e+=t[i].length;return e}function b(t,e){for(var i=[],r=0;r<t.length+e;++r)e>r?i.push(r):i.push(t[r-e]+e);return i}return{compareLists:t,createMap:e,deleteCol:g,getAreaFromPaths:i,getEdgesFromPaths:r,getFilteredPaths:o,getFlattenedLists:n,getIntermediateNodesFromPaths:a,getIntersection:s,getNumHops:d,getNodesFromPaths:u,getSourceNodesFromPaths:c,getTargetNodesFromPaths:h,getUniqueValues:p,getValueRange:f,hasIntersection:l,reduceMatrix:v,reduceRow:m,shiftPermutation:b}}(),e.Utils=i},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(8),a=i(45),s=function(){function t(e,i,o,n,a){"ngInject";r(this,t),this.$log=e,this.$http=i,this.$uibModal=o,this.modalService=n,this.$compile=a}return t.$inject=["$log","$http","$uibModal","modalService","$compile"],o(t,[{key:"createConnectivityMatrixManager",value:function(t,e,i,r,o){var a=i.$new();return new n.cmMatrixWrapper(t,e,this.$log,this.$uibModal,a,r,this.modalService,o,this.$compile)}},{key:"createNodeListManager",value:function(t,e,i,r,o){var n=i.$new();return new a.cmNodeListWrapper(t,e,this.$log,this.$uibModal,n,r,this.modalService,o,this.$compile)}}]),t}();e.cmMatrixViewFactory=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(9),l=i(34),u=i(38),c=i(42),h=i(44),d=function(t){function e(t,i,o,n,h,d,p,f,g){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,o,h,f,"matrix-view",g),this.controlsHeader=new u.cmControlsMatrix(this.controlsHeaderGroup,i,o,n,h,d,p,f),this.controlsHeader.setGridPosition([0,0]),this.topHeader=new l.cmMatrixTopHeader(this.topHeaderGroup,i,o,n,h,d,p,f),this.topHeader.setGridPosition([1,0]),this.leftHeader=new c.cmMatrixLeftHeader(this.leftHeaderGroup,i,o,n,h,d,p,f),this.leftHeader.setGridPosition([0,1]),this.matrix=new s.cmMatrixView(this.matrixGroup,i,o,n,h,d,p,f),this.matrix.setGridPosition([1,1]),this.matrices=[this.topHeader,this.leftHeader,this.controlsHeader,this.matrix],this.updateElementPositions()}return o(e,t),n(e,[{key:"getMajorRowsAndColsAsScalarMatrix",value:function(){return this.matrix.getMajorRowsAndColsAsScalarMatrix()}}]),e}(h.cmWrapperBase);e.cmMatrixWrapper=d},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);
if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(10),l=i(31),u=i(32),c=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.colWidthAttr=0,this.colWidthLabel=0,this.colWidthControl=0,this.rowHeightAttr=0,this.hasEncodings=!0,this.colorScaleIndexNodes=1,this.colorScaleIndexSets=0,this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){for(var e=0;e<this.numHeaderCols;++e)this.addRow(new u.cmMatrixRow(this.svg,e,this.colNodeIndexes,this.numHeaderCols),0);var i=this.rowNodeAttributes,r=t.getCurrentRows(),o=t.getMajorRowLabels(),n=t.getMinorRowLabels();for(e=0;e<this.rowNodeIndexes.length;++e){var a=new l.cmDataRow(this.svg,e+this.numHeaderRows,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeight,!1,r[e],o[e],n[e],i[e],this,t.areColsCollapsed,t.areRowsCollapsed);if(t.areRowsCollapsed){var s=this.onRowControlsClicked.bind(this);a.createControlsCell(this.colWidth,this.rowHeight,s)}this.colWidthLabel=0,a.setLabelColWidth(this.colWidthLabel),this.addRow(a,this.rowHeight)}}}]),e}(s.cmMatrixBase);e.cmMatrixView=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(11),l=i(12),u=i(18),c=i(19),h=i(21),d=i(23),p=i(24),f=i(25),g=i(26),v=i(27),m=i(28),b=i(29),y=i(6),w=i(30),C=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.$log=o,this.$uibModal=n,this.modalService=u,this.$scope=s,this.mainController=c,this.viewState=l,this.isActive=!0,this.colWidth=15,this.rowHeight=15,this.colWidthAttr=70,this.colWidthLabel=70,this.colWidthControl=15,this.labelRowHeight=this.colWidthLabel,this.rowHeightAttr=70,this.paddingBottom=4,this.paddingRight=4,this.svg=t,this.highlights=[],this.rowHeights=[],this.colWidths=[],this.allRows=[],this.gridPosition=[],this.isActive=!0;var h=this;this.$scope.$on("updatePositions",function(t,e,i){h.updatePositions(e,i)}),this.$scope.$on("toggleAttributeRow",function(t,e,i,r){r!=h&&h.onToggleAttributeRow(e,i,!0)}),this.$scope.$on("toggleAttributeCol",function(t,e,i,r){r!=h&&h.onToggleAttributeCol(e,i,!0)}),this.$scope.$on("changeVisibleAttributeRows",function(t,e,i){i!=h&&h.updateColAttributes(e)}),this.$scope.$on("changeVisibleAttributeCols",function(t,e,i){i!=h&&h.updateRowAttributes(e)}),this.$scope.$on("rowControlsClicked",function(t,e,i,r){r!=h&&h.onRowControlsClicked(e,i,!0)}),this.$scope.$on("colControlsClicked",function(t,e,i,r){r==h||h.isControlsMatrix||h.onColControlsClicked(e,i,!0)}),this.$scope.$on("positionHighlights",h.onPositionHighlights.bind(h)),this.$scope.$on("hideHighlights",h.onHideHighlights.bind(h)),this.$scope.$on("clearSelection",h.onClearSelection.bind(h)),this.$scope.$on("setColorScale",h.setColorScale.bind(h))}return o(e,t),n(e,[{key:"addRow",value:function(t,e){for(var i=0,r=0;r<this.allRows.length;++r)i+=this.rowHeights[r];t.setPosition(0,i),this.allRows.push(t),this.rowHeights.push(e),this.addChild(t)}},{key:"applyVisitor",value:function(t){for(var e=0;e<this.allRows.length;++e)this.allRows[e].apply(t)}},{key:"createAttributeEncodings",value:function(){var t=new p.cmClearVisitor;t.setClearAttributeCells(!0),t.setClearAttributeLabelCells(!0),this.applyVisitor(t);for(var e=this.onSortRowsByAttribute.bind(this),i=this.onSortColsByAttribute.bind(this),r=this.onToggleAttributeRow.bind(this),o=this.onToggleAttributeCol.bind(this),n=this.mainController.openNodeAttributeFilter.bind(this.mainController),a=this.viewState.isNodeHidden,s=0;s<this.attributes.length;++s){var u=this.attributes[s];if(this.model.isCategoricalAttribute(u))for(var d=0;d<this.attributeNodeGroupsBeingDisplayed.length;++d){var f=this.attributeNodeGroupsBeingDisplayed[d];t=new m.cmStringAttributeVisitor(s,f,this.colWidth,this.labelRowHeight,this.colWidthLabel,this.rowHeight),t.isVisitingColsCollapsedAttr=u==this.model.colsCollapseAttr&&f==this.model.AttributeNodeGroups.TARGET,t.isVisitingAirportOrState="state"==u||"airport"==u,this.isNodeListView?(t.isVisitingRowsCollapsedAttr=u==this.model.intermediateNodeCollapseAttr&&f==this.model.AttributeNodeGroups.INTERMEDIATE,t.areRowsCollapsed=this.model.areIntermediateNodesCollapsed):(t.isVisitingRowsCollapsedAttr=u==this.model.rowCollapseAttr&&f==this.model.AttributeNodeGroups.SOURCE,t.areRowsCollapsed=this.model.areRowsCollapsed),t.areColsCollapsed=this.model.areColsCollapsed,t.setCallbacks(null,this.onCellMouseOver.bind(this),this.onCellMouseOut.bind(this)),this.applyVisitor(t),t=new l.cmCategoricalAttributeLabelVisitor(s,f,e,i,r,o,this.colWidth,this.rowHeight,this.labelRowHeight/2,this.colWidthAttr,n,n),this.applyVisitor(t)}else for(var d=0;d<this.attributeNodeGroupsBeingDisplayed.length;++d){var f=this.attributeNodeGroupsBeingDisplayed[d],g=new h.cmScatterPlot1DPreprocessor(s,f);g.setNodeFilter(a),this.applyVisitor(g);var b=g.getValueRange();t=new h.cmScatterPlot1DVisitor(s,f,this.rowHeight/4,b),t.setNodeFilter(a),t.setCallbacks(null,this.onCellMouseOver.bind(this),this.onCellMouseOut.bind(this)),this.applyVisitor(t),t=new l.cmAttributeLabelVisitor(s,f,e,i,r,o,this.colWidth,this.rowHeight,this.labelRowHeight/2,this.colWidthAttr,n,n),this.applyVisitor(t)}}for(var d=0;d<this.attributeNodeGroupsBeingDisplayed.length;++d){var f=this.attributeNodeGroupsBeingDisplayed[d];t=new m.cmStringAttributeVisitor(-1,f,this.colWidth,this.labelRowHeight,this.colWidthLabel,this.rowHeight),t.setCallbacks(this.onCellClicked.bind(this),this.onCellMouseOver.bind(this),this.onCellMouseOut.bind(this)),t.isVisitingAirportOrState=!0,this.isNodeListView?t.areRowsCollapsed=this.model.areIntermediateNodesCollapsed:t.areRowsCollapsed=this.model.areRowsCollapsed,t.areColsCollapsed=this.model.areColsCollapsed,this.applyVisitor(t)}t=new c.cmNodeLabelVisitor(e,i,r,o,this.colWidth,this.rowHeight,this.labelRowHeight,this.colWidthLabel,n,n),t.setCreateColumnLabels(!this.isNodeListView),this.applyVisitor(t);var y=this.onEditVisibleAttributeCols.bind(this),w=this.onEditVisibleAttributeRows.bind(this);t=new v.cmEditVisibleAttributesVisitor(this.colWidth,this.rowHeight,w,y),this.applyVisitor(t)}},{key:"createHighlights",value:function(){this.highlights[0]=this.svg.append("line").classed("matrix-view-highlight-rect",!0),this.highlights[1]=this.svg.append("line").classed("matrix-view-highlight-rect",!0),this.highlights[2]=this.svg.append("line").classed("matrix-view-highlight-rect",!0),this.highlights[3]=this.svg.append("line").classed("matrix-view-highlight-rect",!0)}},{key:"connectToViewState",value:function(t){var e=this.onHoverNodes.bind(this),i=this.onQuantitativeAttributeFilterUpdate.bind(this);t.$on("filterChanged",this.onFilterChanged.bind(this)),t.$on("hoverNodes",e),t.$on("updateQuantitativeAttributeFilter",i)}},{key:"getAttributeColIndex",value:function(t){return t-this.numControlCols}},{key:"getAttributeColWidths",value:function(){for(var t=0,e=0;e<this.colWidths.length;++e)(this.isAttributeCell(e)||this.isLabelCell(e)||this.isControlCell(e))&&(t+=this.colWidths[e]);return t}},{key:"getAvailableMetrics",value:function(t){var e=[{name:"path count",tooltip:"path(s)",metricFn:function(t){return t.length},output:"scalar"},{name:"node count",tooltip:"middle node(s)",metricFn:function(t){return y.Utils.getIntermediateNodesFromPaths(t).length},output:"scalar"}];return"flights"==t&&e.push({name:"carrier count",tooltip:"carrier(s)",metricFn:function(t,e){for(var i=[],r=0;r<t.length;++r){var o=t[r][1],n=e.graph.edge(t[r][0],t[r][2],o).carrier;-1==i.indexOf(n)&&i.push(n)}return i.length},output:"scalar"}),this.isNodeListView?e.push({name:"num start | num end",metricFn:function(t){return y.Utils.getIntermediateNodesFromPaths(t).length},output:"list"}):e.push({name:"len vs paths",metricFn:function(t){for(var e={},i=0;i<t.length;++i){var r=t[i],o=y.Utils.getNumHops(r);void 0==e[o]?e[o]=1:e[o]+=1}return e},output:"list"}),e}},{key:"getAvailableEncodings",value:function(t){var e=null;return"scalar"==t?e=[{name:"colormap",hasScaleOption:!0},{name:"bar chart",hasScaleOption:!0},{name:"raw value",hasScaleOption:!1}]:"list"==t&&(e=[{name:"bar chart",hasScaleOption:!0}]),e}},{key:"getColWidth",value:function(t,e){if(e){var i=this.getNumVisibleMinorCells(t);return(i+1)*this.colWidth}return this.colWidth}},{key:"getDataColIndex",value:function(t){return t-this.numHeaderCols}},{key:"getDataRowIndex",value:function(t){return t-this.numHeaderRows}},{key:"getHeight",value:function(){for(var t=0,e=0;e<this.rowHeights.length;++e)t+=this.rowHeights[e];return t+=this.paddingBottom}},{key:"getMajorRowsAndColsAsScalarMatrix",value:function(){for(var t=[],e=0;e<this.allRows.length;++e)if(this.isDataRow(e)){for(var i=[],r=0;r<this.allRows[e].majorCells.length;++r)if(this.isDataCell(r)){var o=this.allRows[e].majorCells[r].getPathList(),n=this.viewState.getFilterPathFunction()(o);i.push(n.length)}t.push(i)}return t}},{key:"getMaxUnrolledHeight",value:function(){var t=y.Utils.getFlattenedLists(this.rowNodeIndexes);return t.length==this.rowNodeIndexes.length?t.length*this.rowHeight:this.rowNodeIndexes.length*this.rowHeight+t.length*this.rowHeight}},{key:"getMaxUnrolledWidth",value:function(){var t=y.Utils.getFlattenedLists(this.colNodeIndexes);return t.length==this.colNodeIndexes.length?t.length*this.colWidth:this.colNodeIndexes.length*this.rowHeight+t.length*this.colWidth}},{key:"getNumVisibleMinorCells",value:function(t){for(var e=this.isMinorColVisible[t],i=0,r=0;r<e.length;++r)e[r]&&(i+=1);return i}},{key:"getViewIndexFromAttributeIndex",value:function(t){return t+this.numControlCols}},{key:"getViewColIndexFromDataIndex",value:function(t){return t+this.numHeaderCols}},{key:"getWidth",value:function(){for(var t=0,e=0;e<this.colWidths.length;++e)t+=this.colWidths[e];return t+=this.paddingRight}},{key:"initAttributeData",value:function(t){this.rowAttributes=t.getRowAttributeValues(),this.rowNodeAttributes=t.getRowNodeAttributeValues(),this.colAttributes=t.getColAttributeValues()}},{key:"initAttributeState",value:function(t){var e=t.getAvailableAttributes();if(this.attributes=e,!this.isInitialized){this.isInitialized=!0,this.isAttributeColVisible={},this.isAttributeRowVisible={};for(var i=0;i<e.length;++i)this.isAttributeColVisible[e[i]]=!1,this.isAttributeRowVisible[e[i]]=!1}}},{key:"initColStates",value:function(){this.isMajorColUnrolled=[],this.isMinorColVisible=[];for(var t=0;t<this.numHeaderCols+this.colNodeIndexes.length;++t)if(this.isMajorColUnrolled[t]=!1,this.isMinorColVisible[t]=[],this.isDataCell(t))for(var e=this.getDataColIndex(t),i=0;i<this.colNodeIndexes[e].length;++i)this.isMinorColVisible[t][i]=!0}},{key:"initColWidths",value:function(){if(this.isControlsMatrix)for(var t=0;t<this.colNodeIndexes.length+this.numHeaderCols;++t)this.isControlCell(t)?this.colWidths[t]=this.colWidthControl:this.isDataCell(t)?this.colWidths[t]=0:this.isAttributeCell(t)?this.colWidths[t]=this.colWidthAttr:this.isLabelCell(t)&&(this.colWidths[t]=this.colWidthLabel);else for(var t=0;t<this.colNodeIndexes.length+this.numHeaderCols;++t)this.isControlCell(t)?this.colWidths[t]=this.colWidthControl:this.isDataCell(t)?this.colWidths[t]=this.colWidth:this.isAttributeCell(t)?this.colWidths[t]=this.colWidthAttr:this.isLabelCell(t)&&(this.colWidths[t]=this.colWidthLabel)}},{key:"initNodeIndexes",value:function(t){this.rowAttributeNodeGroup=this.model.AttributeNodeGroups.SOURCE,this.colAttributeNodeGroup=this.model.AttributeNodeGroups.TARGET,this.attributeNodeGroupsBeingDisplayed=[this.rowAttributeNodeGroup,this.colAttributeNodeGroup],this.rowNodeIndexes=t.getRowNodeIndexes(),this.colNodeIndexes=t.getColNodeIndexes()}},{key:"initViewIndexes",value:function(t){this.numControlCols=1,this.numAttributeCols=t.length,this.numLabelCols=1,this.numHeaderCols=this.numControlCols+this.numAttributeCols+this.numLabelCols,this.numControlRows=1,this.numAttributeRows=t.length,this.numLabelRows=1,this.numHeaderRows=this.numControlRows+this.numAttributeRows+this.numLabelRows,this.rowHeights=[],this.colWidths=[],this.allRows=[],this.rowPerm=reorder.permutation(this.numHeaderRows+this.rowNodeIndexes.length),this.colPerm=reorder.permutation(this.numHeaderCols+this.colNodeIndexes.length)}},{key:"isAttributeCell",value:function(t){return t>=this.numControlCols&&t<this.numAttributeCols+this.numControlCols}},{key:"isAttributeRow",value:function(t){return t>=this.numControlRows&&t<this.numAttributeRows+this.numControlRows}},{key:"isControlCell",value:function(t){return t<this.numControlCols}},{key:"isControlRow",value:function(t){return t<this.numControlRows}},{key:"isDataCell",value:function(t){return!this.isControlCell(t)&&!this.isAttributeCell(t)&&!this.isLabelCell(t)}},{key:"isDataRow",value:function(t){return!this.isControlRow(t)&&!this.isAttributeRow(t)&&!this.isLabelRow(t)}},{key:"isLabelCell",value:function(t){return t>=this.numAttributeCols+this.numControlCols&&t<this.numAttributeCols+this.numControlCols+this.numLabelCols}},{key:"isLabelRow",value:function(t){return t>=this.numAttributeRows+this.numControlRows&&t<this.numAttributeRows+this.numControlRows+this.numLabelRows}},{key:"onCellClicked",value:function(t){this.viewState.clearSelection(),this.selectedCell=t,t.interactionGroup.classed("hovered",!1),t.interactionGroup.classed("selected",!0);var e=[];t.isDataCell?e=t.getPathList():t.isColLabelCell?e=this.model.getPathsWithTargets(t.data.nodeIndexes):t.isRowLabelCell&&!t.isInNodeListView?e=this.model.getPathsWithSources(t.data.nodeIndexes):t.isRowLabelCell&&t.isInNodeListView&&(e=this.model.getPathsWithIntermediates(t.data.nodeIndexes)),e=this.viewState.getFilterPathFunction()(e),this.mainController.onPathsSelected(e)}},{key:"onCellMouseOver",value:function(t){this.viewState.setHoveredNodes(t.data.ids,!0);var i=e.getCellTransform(t),r=t.getGroup().select(".matrix-view-interaction-group").select("rect"),o=parseInt(r.attr("width")),n=parseInt(r.attr("height"));this.$scope.$broadcast("positionHighlights",o,n,i,this.gridPosition)}},{key:"onCellMouseOut",value:function(){this.$scope.$broadcast("hideHighlights"),this.viewState.setHoveredNodes(null)}},{key:"onClearSelection",value:function(){this.selectedCell&&this.selectedCell.interactionGroup.classed("selected",!1)}},{key:"onColControlsClicked",value:function(t,e,i){this.isMajorColUnrolled[t]=e,this.updateMinorCols(t,this.colWidth,this.isMajorColUnrolled[t],this.isMinorColVisible),this.updatePositions(this.rowPerm,this.colPerm),i||(this.$scope.$broadcast("colControlsClicked",t,e,this),this.$scope.$broadcast("changeMatrixHeight"))}},{key:"onEditVisibleAttributeCols",value:function(){var t=this.updateRowAttributes.bind(this),e="changeMatrixHeight",i="changeVisibleAttributeCols";this.onEditVisibleAttributes(this.attributes,this.isAttributeColVisible,t,e,i)}},{key:"onEditVisibleAttributeRows",value:function(){var t=this.updateColAttributes.bind(this),e="changeMatrixHeight",i="changeVisibleAttributeRows";this.onEditVisibleAttributes(this.attributes,this.isAttributeRowVisible,t,e,i)}},{key:"onEditVisibleAttributes",value:function(t,e,i,r,o){var n=function(t){i(t,e),this.$scope.$broadcast(o,t,this),this.$scope.$broadcast(r)};n=n.bind(this),this.modalService.getSelectionFromList("Select attributes",t,e,n)}},{key:"onToggleAttributeRow",value:function(t,e,i,r){var o=this.attributes[t],n=this.getViewIndexFromAttributeIndex(t);this.isAttributeRowVisible[o]=e,this.updateRow(n,e),r||this.updatePositions(this.rowPerm,this.colPerm),i||(this.$scope.$broadcast("toggleAttributeRow",t,e,this),this.$scope.$broadcast("changeMatrixHeight"))}},{key:"onToggleAttributeCol",value:function(t,e,i,r){var o=this.attributes[t],n=this.getViewIndexFromAttributeIndex(t);this.isAttributeColVisible[o]=e,this.updateCol(n,e),r||this.updatePositions(this.rowPerm,this.colPerm),i||(this.$scope.$broadcast("toggleAttributeCol",t,e,this),this.$scope.$broadcast("changeMatrixHeight"))}},{key:"onHideHighlights",value:function(){this.highlights.forEach(function(t){t.style("display","none")})}},{key:"onFilterChanged",value:function(){this.isControlsMatrix||(this.updateDataRows(),this.updateDataCols()),this.setEncoding(this.encoding,this.metric),this.updatePositions(this.rowPerm,this.colPerm)}},{key:"onHoverNodes",value:function(t,e,i){this.isActive&&(this.hoverVisitor||(this.hoverVisitor=new b.cmHoverVisitor),e?(this.hoverVisitor.setNodes(e,i),this.hoverVisitor.isHovered=!0):(this.hoverVisitor.setNodes(null),this.hoverVisitor.isHovered=!1),this.applyVisitor(this.hoverVisitor))}},{key:"onPositionHighlights",value:function(t,e,i,r,o){this.gridPosition[1]==o[1]&&(this.highlights[0].style("display","block"),this.highlights[0].attr("x1",-1).attr("x2",this.getWidth()+1).attr("y1",r.translate[1]).attr("y2",r.translate[1]),this.highlights[1].style("display","block"),this.highlights[1].attr("x1",-1).attr("x2",this.getWidth()+1).attr("y1",r.translate[1]+i).attr("y2",r.translate[1]+i)),this.gridPosition[0]==o[0]&&(this.highlights[2].style("display","block"),this.highlights[2].attr("x1",r.translate[0]).attr("x2",r.translate[0]).attr("y1",-1).attr("y2",this.getHeight()+1),this.highlights[3].style("display","block"),this.highlights[3].attr("x1",r.translate[0]+e).attr("x2",r.translate[0]+e).attr("y1",-1).attr("y2",this.getHeight()+1))}},{key:"onRowControlsClicked",value:function(t,e,i){var r=this.allRows[t];i&&r&&(e?r.onUnrollRowClicked(!0):r.onRollupRowClicked(!0)),r&&(this.rowHeights[t]=r.getCurrentHeight(),this.updatePositions(this.rowPerm,this.colPerm),i||(this.$scope.$broadcast("rowControlsClicked",t,e,this),this.$scope.$broadcast("changeMatrixHeight")))}},{key:"onSortColsByAttribute",value:function(t,e,i){var r=this.model.getSortedIndexesOfNodeIndexAttr(this.colNodeIndexes,t,e,this.colAttributeNodeGroup),o=y.Utils.shiftPermutation(r,this.numHeaderCols);this.resetSortState(!1,!0,i),this.mainController.ui.selectedSortOrder="custom",this.$scope.$broadcast("updatePositions",this.rowPerm,o)}},{key:"onSortRowsByAttribute",value:function(t,e,i){var r=this.model.getSortedIndexesOfNodeIndexAttr(this.rowNodeIndexes,t,e,this.rowAttributeNodeGroup),o=y.Utils.shiftPermutation(r,this.numHeaderRows);this.resetSortState(!0,!1,i),this.updatePositions(o,this.colPerm),this.isNodeListView||(this.mainController.ui.selectedSortOrder="custom"),this.$scope.$broadcast("updatePositions",o,this.colPerm)}},{key:"onQuantitativeAttributeFilterUpdate",value:function(t,e,i,r){var o=new u.cmAttributeLabelScentVisitor(this.attributes.indexOf(e),i,r);this.applyVisitor(o)}},{key:"resetSortState",value:function(t,e,i){var r=this.svg.selectAll(".matrix-view-sortbar").filter(function(i){return t&&!e?!i:!t&&e?i:t&&e?!0:!1}).filter(function(){return this!=i}).style("display","none");r.selectAll(".fa").attr("data-is-sorted","")}},{key:"setColorScale",value:function(t,e,i){if(t){var r=new p.cmClearVisitor;r.setClearDataCells(!0),this.applyVisitor(r)}var o=this.colWidth,n=this.rowHeight,a=new d.cmColorMapVisitor(i,e,o,n),s=this.onCellClicked.bind(this),l=this.onCellMouseOver.bind(this),u=this.onCellMouseOut.bind(this),c=this.metric.metricFn;a.setTooltipMetrics(this.getAvailableMetrics(this.mainController.database)),a.setCallbacks(s,l,u),a.setPathFilterFunction(this.viewState.getFilterPathFunction()),a.setMetricFunction(c),a.graph=this.model.graph,this.applyVisitor(a)}},{key:"setEncoding",value:function(t,e){if(this.hasEncodings){this.encoding=t,this.metric=e;var i=void 0,r=new p.cmClearVisitor;r.setClearDataCells(!0),this.applyVisitor(r);var o=this.colWidth,n=this.rowHeight,a=this.onCellClicked.bind(this),s=this.onCellMouseOver.bind(this),l=this.onCellMouseOut.bind(this);if("colormap"==t.name)this.setEncodingToColorMap(e);else if("raw value"==t.name){var u=new g.cmRawValueVisitor(o,n);u.setTooltipMetrics(this.getAvailableMetrics(this.mainController.database));var c=this.metric.metricFn;u.setCallbacks(a,s,l),u.setPathFilterFunction(this.viewState.getFilterPathFunction()),u.setMetricFunction(c),u.graph=this.model.graph,this.applyVisitor(u)}else"bar chart"==t.name&&(i=new f.cmBarChartPreprocessor(e.metricFn),i.setPathFilterFunction(this.viewState.getFilterPathFunction()),i.isList="list"==e.output,this.applyVisitor(i),r=new f.cmBarChartVisitor(i,o,n,"list"==e.output),r.graph=this.model.graph,r.setTooltipMetrics(this.getAvailableMetrics(this.mainController.database)),r.setPathFilterFunction(this.viewState.getFilterPathFunction()),r.setCallbacks(a,s,l),this.applyVisitor(r))}}},{key:"setEncodingToColorMap",value:function(t){if(!this.isNodeListView||this.isActive){var e=new d.cmColorMapPreprocessor;e.setPathFilterFunction(this.viewState.getFilterPathFunction()),e.setMetricFunction(t.metricFn),e.graph=this.model.graph,this.applyVisitor(e),this.colorScales=[],this.colorScalesValues=[],this.hasSecondLegend=!1,this.colorScales[0]=this.mainController.colorScaleService.createColorScale(this.colorScaleIndexSets,e.setRange),this.colorScalesValues[0]=e.valuesOfSets,this.setColorScale(null,this.colorScaleIndexSets,this.colorScales[0]),-1!=this.colorScaleIndexNodes&&e.nodeRange[0]<=e.nodeRange[1]&&e.nodeRange[1]>0&&(this.hasSecondLegend=!0,this.colorScales[1]=this.mainController.colorScaleService.createColorScale(this.colorScaleIndexNodes,e.nodeRange),this.setColorScale(null,this.colorScaleIndexNodes,this.colorScales[1]),this.colorScalesValues[1]=e.valuesOfNodes)}}},{key:"setGridPosition",value:function(t){this.gridPosition=t}},{key:"setModel",value:function(t){this.model=t,this.clearChildren(),this.defs=this.svg.append("defs"),this.defs.append("clipPath").attr("id","horizontal-attribute-clip").append("rect").attr("transform","translate(0, -7.5)").attr("width",70).attr("height",15),this.defs.append("clipPath").attr("id","vertical-attribute-clip").append("rect").attr("transform","translate(0, -7.5)").attr("width",70).attr("height",15),this.svg.attr("transform","translate(1, 1)"),this.initNodeIndexes(t),this.initAttributeState(t),this.initAttributeData(t),this.initViewIndexes(this.attributes),this.initColStates(),this.initColWidths(),this.createRows(t),this.createAttributeEncodings(),this.updatePositions(this.rowPerm,this.colPerm),this.connectToViewState(this.$scope),this.createHighlights(),this.updateAttributeView()}},{key:"setSortOrders",value:function(t,e){var i=y.Utils.shiftPermutation(t,this.numHeaderRows),r=y.Utils.shiftPermutation(e,this.numHeaderCols);this.updatePositions(i,r)}},{key:"updateAttributes",value:function(t,e,i){for(var r=this.attributes,o=0;o<r.length;++o){var n=r[o],a=this.getViewIndexFromAttributeIndex(o);i(a,t[n]),e[n]=t[n]}this.updatePositions(this.rowPerm,this.colPerm)}},{key:"updateAttributeView",value:function(){for(var t=0;t<this.attributes.length;++t)this.isAttributeColVisible[this.attributes[t]]||this.onToggleAttributeCol(t,!1,!0,!0),this.isAttributeRowVisible[this.attributes[t]]||this.onToggleAttributeRow(t,!1,!0,!0)}},{key:"updateCol",value:function(t,e){e?this.isAttributeCell(t)?this.colWidths[t]=this.colWidthAttr:this.isDataCell(t)?this.colWidths[t]=this.colWidth:this.$log.error("Showing a column type not yet handled!"):this.colWidths[t]=0;for(var i=0;i<this.allRows.length;++i){var r=this.allRows[i];if(r){var o=this.allRows[i].majorCells[t];if(o){o.setVisible(e);for(var n=0;n<this.allRows[i].minorRows.length;++n)this.allRows[i].minorRows[n].majorCells[t].setVisible(e)}}}}},{key:"updateColAttributes",value:function(t){var e=this.updateRow.bind(this);this.updateAttributes(t,this.isAttributeRowVisible,e)}},{key:"updateDataCols",value:function(){for(var t=y.Utils.getFlattenedLists(this.colNodeIndexes),e=0;e<t.length;++e)for(var i=0;i<this.colNodeIndexes.length;++i){var r=this.colNodeIndexes[i].indexOf(t[e]),o=-1!=r,n=1==this.colNodeIndexes[i].length&&o,a=this.viewState.isNodeFiltered(t[e],this.colAttributeNodeGroup),s=this.getViewColIndexFromDataIndex(i);n?(this.updateCol(s,!a),a||this.updateMinorCols(s,this.colWidth,this.isMajorColUnrolled[s],this.isMinorColVisible)):o&&(this.isMinorColVisible[s][r]=!a,this.updateMinorCols(s,this.colWidth,this.isMajorColUnrolled[s],this.isMinorColVisible))}}},{key:"updateDataRows",value:function(){for(var t=this.rowNodeIndexes,e=y.Utils.getFlattenedLists(t),i=0;i<e.length;++i)for(var r=e[i],o=0;o<this.allRows.length;++o)if(this.isDataRow(o)){var n=this.getDataRowIndex(o),a=this.rowNodeIndexes[n].indexOf(r),s=-1!=a,l=s&&1==t[n].length,u=this.viewState.isNodeFiltered(r,this.rowAttributeNodeGroup);l?this.updateRow(o,!u):s&&(u?this.allRows[o].hideMinorRow(a):this.allRows[o].showMinorRow(a),this.rowHeights[o]=this.allRows[o].getCurrentHeight())}}},{key:"updateMinorCols",value:function(t,e,i,r){for(var o=0;o<this.allRows.length;++o)this.allRows[o].updateMinorCols(t,e,i,r);this.colWidths[t]=this.getColWidth(t,i)}},{key:"updatePositions",value:function(t,i){this.rowPerm=t;var r=e.getRowYPositions(this.rowPerm,this.rowHeights);this.rowInv=reorder.inverse_permutation(this.rowPerm),this.colPerm=i,this.colInv=reorder.inverse_permutation(this.colPerm);for(var o=e.getColXPositions(this.colPerm,this.colWidths),n=0;n<this.allRows.length;++n)this.allRows[n].setPosition(0,r[this.rowInv[n]]),this.allRows[n].setColPositions(this.colInv,o)}},{key:"updateRow",value:function(t,e){var i=this.allRows[t];if(i){var r=0;i.setVisible(e),e&&(this.isAttributeRow(t)?(r=i.getCurrentHeight(),r||(r=this.rowHeightAttr)):this.isDataRow(t)&&(r=i.getCurrentHeight(),r||(r=this.rowHeight))),this.rowHeights[t]=r}}},{key:"updateRowAttributes",value:function(t){var e=this.updateCol.bind(this);this.updateAttributes(t,this.isAttributeColVisible,e)}}],[{key:"getCellTransform",value:function(t){var e={},i=t.getGroup()[0][0];return t.isMajorCell&&t.isInMajorRow?e=w.UtilsD3.getAccumulatedTranslate(i,1):t.isMajorCell&&!t.isInMajorRow?e=w.UtilsD3.getAccumulatedTranslate(i,3):!t.isMajorCell&&t.isInMajorRow?e=w.UtilsD3.getAccumulatedTranslate(i,2):t.isMajorCell||t.isInMajorRow||(e=w.UtilsD3.getAccumulatedTranslate(i,4)),e}},{key:"getColXPositions",value:function(t,e){for(var i=[],r=0,o=0;o<e.length;++o){var n=t[o];i.push(r),r+=e[n]}return i}},{key:"getMetricFunction",value:function(t){return"path count"==t?function(t){return t.length}:"node count"==t?function(t){return y.Utils.getIntermediateNodesFromPaths(t).length}:"carrier count"==t?function(t,e){for(var i=[],r=0;r<t.length;++r){var o=t[r][1],n=e.graph.edge(t[r][0],t[r][2],o).carrier;-1==i.indexOf(n)&&i.push(n)}return i.length}:void 0}},{key:"getHeight",value:function(t,e){for(var i=0,r=0;r<t.length;++r){var o=t[r];i+=e[o]}return i}},{key:"getRowYPositions",value:function(t,e){for(var i=[],r=0,o=0;o<t.length;++o){var n=t[o];i.push(r),r+=e[n]}return i}},{key:"getWidth",value:function(t,e){for(var i=0,r=0;r<e.length;++r){var o=t[r];i+=e[o]}return i}}]),e}(s.SvgGroupElement);e.cmMatrixBase=C},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){i(this,t),this.group=e,this.useAnimation=!0,this.children=[]}return r(t,[{key:"clearChildren",value:function(){for(var t=0;t<this.children.length;++t)this.children[t].clearChildren();this.children=[],this.group.selectAll("*").remove()}},{key:"addChild",value:function(t){this.children.push(t)}},{key:"getGroup",value:function(){return this.group}},{key:"setPosition",value:function(t,e,i){var r="translate( "+t+", "+e+") ";if(void 0==this.group.attr("transform"))this.group.attr("transform",r);else{var o=500;this.useAnimation||(o=0),this.group.transition().duration(o).attr("transform",r),i&&this.group.transition().delay(500).style("display","none")}}},{key:"setVisible",value:function(t){this.group.style("display",t?"block":"none")}},{key:"setUseAnimation",value:function(t){this.useAnimation=t;for(var e=0;e<this.children.length;++e)this.children[e].setUseAnimation(t)}}]),t}();e.SvgGroupElement=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(13),l=i(15),u=function(t){function e(t,i,o,n,s,l,u,c,h,d,p,f){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.rowHeight=u,this.colWidth=c,this.rowHeightAttr=h,this.colWidthAttr=d,this.callbacks={},this.callbacks.onSortRows=o,this.callbacks.onSortCols=n,this.callbacks.onHideRow=s,this.callbacks.onHideCol=l,this.callbacks.onFilterNodes=p,this.callbacks.onFilterAttributes=f}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){t.controls=[];var e=t.data.isVertical,i=t.data.name,r=t.getGroup().append("g"),o=t.data.attributeIndex,n=t.data.attributeValues,a=e?this.callbacks.onSortCols:this.callbacks.onSortRows,s=e?this.callbacks.onHideRow:this.callbacks.onHideCol,l=e?this.rowHeightAttr:this.colWidthAttr,u=e?this.colWidthAttr:this.rowHeightAttr;t.controls=this.createAttributeControls(r,i,e,l,u,a,s,o,this.callbacks.onFilterAttributes,t.data.nodeIndexes,t.data.attributeNodeGroup,n)}}},{key:"createAttributeControls",value:function(t,e,i,r,o,n,a,l,u,c,h,d){return new s.cmAttributeControls(t,e,i,r,o,n,a,l,u,c,h,d)}}]),e}(l.cmAttributeLabelVisitorBase);e.cmAttributeLabelVisitor=u;var c=function(t){function e(t,i,o,n,s,l,u,c,h,d,p,f){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c,h,d,p,f)}return o(e,t),n(e,[{key:"createAttributeControls",value:function(t,e,i,r,o,n,a,l,u,c,h,d){return new s.cmCategoricalAttributeControls(t,e,i,r,o,n,a,l,u,c,h,d)}}]),e}(u);e.cmCategoricalAttributeLabelVisitor=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{
value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(11),l=i(14),u=function(t){function e(t,i,o,n,s,l,u,c,h,d,p,f){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var g=this.getGroup();o?g.attr("transform","translate("+n+", 0)"):g.attr("transform","translate(0, "+s+")"),this.width=n,this.height=s,this.name=i,this.onHide=u,this.index=c,this.onSort=l,this.sortAscending=!1,this.onFilter=h,this.filterNodeIndexes=d,this.filterAttributeGroup=p,this.attributeValues=f,this.label=e.createLabel(g,i,o,n,s),this.scent=this.createDataScent(g,o,f),this.createInteractionRect(g,o,n,s)}return o(e,t),n(e,[{key:"createDataScent",value:function(t,e,i){var r=null,o=null,n=null,a=parseInt(this.label.style("line-height"));return e?(r=this.height,o=this.width-a,n=t.append("g").attr("transform","translate("+a+",0)")):(r=this.height-a,o=this.width,n=t.append("g").attr("transform","translate(0, "+a+")")),new l.visHistogramScent(this.$scope,n,o,r,10,e,i,a/2)}},{key:"createInteractionRect",value:function(t,i,r,o){var n=this;i&&(t=t.append("g").attr("transform","translate(0, "+o+")rotate(270)"));var a=function(){n.toggleControlVisible(!1)},s=function(){n.toggleControlVisible(!0)};this.outline=t.append("rect").attr("width",i?o:r).attr("height",i?r:o).classed("matrix-view-attribute-controls",!0).on("mouseenter",s).on("mouseleave",a),this.allControls=t.append("foreignObject").attr("width",i?o:r).append("xhtml:div").style("justify-content","space-between").style("display","flex").style("height","auto").on("mouseover",s).on("mouseleave",a),this.sortControls=this.allControls.append("xhtml:div").data([i]).classed("matrix-view-sortbar",!0).on("mouseover",s).on("mouseleave",a),this.controls=this.allControls.append("xhtml:div").classed("matrix-view-toolbar",!0).on("mouseover",s).on("mouseleave",a),this.controls.append("i").classed("fa",!0).classed("fa-filter",!0).classed("matrix-view-toolbar-item",!0).attr("title","filter").on("click",function(){n.onFilter(n.name,n.filterNodeIndexes,n.filterAttributeGroup)}),this.sortControls.append("i").classed("fa",!0).classed("fa-sort-asc",!0).classed("matrix-view-toolbar-item",!0).attr("title","sort").on("click",function(){n.onSort(n.name,n.sortAscending,this.parentNode),d3.select(this).attr("data-is-sorted","true"),e.setSortIcon(this,n.sortAscending),n.sortAscending=!n.sortAscending}),this.onHide&&this.controls.append("i").classed("fa",!0).classed("fa-close",!0).classed("matrix-view-toolbar-item",!0).attr("title","hide").on("click",function(){n.onHide(n.index,!1)}),this.toggleControlVisible(!1)}},{key:"setAttributeFilterRange",value:function(t){this.scent.setFilterRange(t)}},{key:"toggleControlVisible",value:function(t){this.outline.attr("stroke",t?"black":"none"),this.controls.style("display",t?"flex":"none"),this.sortControls.select(".fa").attr("data-is-sorted")||t?t&&this.sortControls.style("display","flex"):this.sortControls.style("display","none")}}],[{key:"createLabel",value:function(t,e,i,r,o){return i?t.append("text").text(e).attr("transform","translate(0 ,"+o/2+")rotate(270)").classed("matrix-view-attribute-label",!0):t.append("text").attr("transform","translate("+r/2+",0)").text(e).classed("matrix-view-attribute-label",!0)}},{key:"setSortIcon",value:function(t,e){t=d3.select(t),t.classed("fa-sort-desc",!e),t.classed("fa-sort-asc",e)}}]),e}(s.SvgGroupElement);e.cmAttributeControls=u;var c=function(t){function e(t,i,o,n,s,l,u,c,h,d,p,f){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c,h,d,p,f)}return o(e,t),n(e,[{key:"createDataScent",value:function(){}}]),e}(u);e.cmCategoricalAttributeControls=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n,a,s,l,u,c){i(this,t),this.$scope=e,this.parent=r.append("g").classed("vis-histogram",!0),this.numBins=a,this.values=l,this.offset=u,this.hideTicks=c,this.maxValue=d3.max(this.values),this.minValue=d3.min(this.values),this.minValue==this.maxValue&&(this.minValue=0),this.width=o,this.height=n,this.createHistogramData();var h=d3.min(this.values),d=d3.max(this.values);h==d&&(d?h=0:d=1),s?(this.margin={top:2,right:0,bottom:2,left:0},this.chartWidth=this.width-this.margin.left-this.margin.right-this.offset,this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.xScale=d3.scale.linear().domain([h,d]).range([0,this.chartHeight]),this.yScale=d3.scale.linear().domain([0,d3.max(this.histogramData,function(t){return t.y})]).range([this.chartWidth,0]),this.hideTicks||this.createHistogramTicksVertical(),this.createHistogramBarsVertical()):(this.margin={top:0,right:2,bottom:0,left:2},this.chartWidth=this.width-this.margin.left-this.margin.right,this.chartHeight=this.height-this.margin.top-this.margin.bottom-this.offset,this.xScale=d3.scale.linear().domain([h,d]).range([0,this.chartWidth]),this.yScale=d3.scale.linear().domain([0,d3.max(this.histogramData,function(t){return t.y})]).range([this.chartHeight,0]),this.hideTicks||this.createHistogramTicksHorizontal(),this.createHistogramBarsHorizontal())}return r(t,[{key:"clear",value:function(){this.parent.remove()}},{key:"createHistogramBarsHorizontal",value:function(){var t=this,e=this.parent.selectAll(".bar").data(this.histogramData).enter().append("g").attr("class","bar").attr("transform",function(e){return"translate("+(t.margin.left+t.xScale(e.x))+","+(t.yScale(e.y)-t.margin.bottom)+")"});e.append("rect").attr("x",1).attr("width",t.xScale(this.minValue+this.histogramData[0].dx)-1).attr("height",function(e){return t.chartHeight-t.yScale(e.y)}).style("fill","steelblue")}},{key:"createHistogramBarsVertical",value:function(){var t=this,e=this.parent.selectAll(".bar").data(this.histogramData).enter().append("g").attr("class","bar").attr("id",1).attr("transform",function(e){return"translate("+(t.yScale(e.y)-t.margin.right)+","+(t.margin.top+t.chartHeight-t.xScale(e.dx+e.x))+")"});e.append("rect").attr("x",1).attr("height",t.xScale(this.minValue+this.histogramData[0].dx)-1).attr("width",function(e){return t.chartWidth-t.yScale(e.y)}).style("fill","steelblue")}},{key:"createHistogramTicksHorizontal",value:function(){var t=this,e=d3.svg.axis().scale(this.xScale).orient("bottom").tickSize(2).tickValues(this.xScale.domain()).tickFormat(d3.format(".3s"));this.parent.append("g").attr("class","x axis").attr("transform","translate("+t.margin.left+","+(t.margin.top+t.chartHeight)+")").call(e);var i=this.parent.selectAll(".tick").selectAll("text").style("font-size","10px");d3.select(i[0][0]).style("text-anchor","start"),d3.select(i[1][0]).style("text-anchor","end")}},{key:"createHistogramTicksVertical",value:function(){var t=this,e=d3.svg.axis().scale(this.xScale).orient("right").tickSize(3).tickValues(this.xScale.domain()).tickFormat(d3.format(".3s"));this.parent.append("g").attr("class","x axis").attr("transform","translate("+t.margin.left+t.chartWidth+","+t.margin.top+")").call(e);var i=this.parent.selectAll(".tick").selectAll("text").style("font-size","10px");d3.select(i[0][0]).style("text-anchor","start").style("alignment-baseline","hanging").attr("transform","rotate(270) translate("+-(this.chartHeight+this.margin.top)+" , "+-this.margin.left+")"),d3.select(i[1][0]).attr("transform","rotate(270) translate( "+(this.chartHeight-this.margin.top)+", "+-this.margin.left+" )").style("text-anchor","end").style("alignment-baseline","hanging")}},{key:"createHistogramData",value:function(){var t=d3.scale.linear().domain([0,this.numBins]).range([this.minValue,this.maxValue]);this.tickArray=d3.range(this.numBins+1).map(t),this.histogramData=d3.layout.histogram().bins(this.tickArray)(this.values)}},{key:"setFilterRange",value:function(t){this.parent.selectAll(".bar").style("opacity",function(e){return e.x>=t[0]&&e.x<t[1]?"1":".2"})}}]),t}();e.visHistogramScent=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},a=i(16),s=function(t){function e(t,i){r(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.visitAttributeCells=!1,this.visitAttributeLabelCells=!0}return o(e,t),e}(a.cmAttributeCellVisitor);e.cmAttributeLabelVisitorBase=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=function(t){function e(t,i){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,0,0),this.attributeIndex=t,this.attributeNodeGroup=i,this.visitAttributeCells=!0}return o(e,t),n(e,[{key:"shouldVisitCell",value:function(t){return a(Object.getPrototypeOf(e.prototype),"shouldVisitCell",this).call(this,t)&&t.data.attributeNodeGroup==this.attributeNodeGroup&&t.data.attributeIndex==this.attributeIndex}}]),e}(s.cmCellVisitor);e.cmAttributeCellVisitor=l},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r){i(this,t),this.width=e,this.height=r,this.rx=2,this.ry=2,this.showOutlines=!1,this.hasNodeFilter=!1,this.isNodeHidden={},this.visitAttributeCells=!1,this.visitAttributeLabelCells=!1,this.visitDataCells=!1,this.visitEditAttributeCells=!1,this.visitHeaderCells=!1,this.visitLabelCells=!1,this.pathFilterFunction=null,this.metrics=[]}return r(t,[{key:"setCallbacks",value:function(t,e,i){this.callbacks={},this.callbacks.clicked=t,this.callbacks.mouseOver=e,this.callbacks.mouseOut=i}},{key:"createInteractionGroup",value:function(t,e,i){var r=this,o=t.getGroup();t.interactionGroup=o.append("g").classed("matrix-view-interaction-group",!0),r.callbacks.clicked||t.interactionGroup.classed("no-click",!0),t.interactionGroup.append("rect").attr("width",this.width).attr("height",this.height).attr("rx",this.rx).attr("ry",this.ry).on("click",function(){r.callbacks.clicked&&r.callbacks.clicked(t)}).on("mouseover",function(){r.callbacks.mouseOver(t)}).on("mouseout",function(){r.callbacks.mouseOut(t)}),e&&t.interactionGroup.select("rect").attr("data-toggle","tooltip").attr("data-html","true").attr("data-title",function(){for(var t="",o=0;o<r.metrics.length;++o){var n=r.metrics[o];"scalar"==n.output&&(t.length&&(t+="<br>"),t=t+n.metricFn(e,i)+" "+n.tooltip)}return t}).attr("data-placement","right").attr("data-container","body").attr("data-template",'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="matrix-tooltip tooltip-inner"></div></div>')}},{key:"createEmptyCellOutline",value:function(t){var e=t.getGroup();e.append("rect").attr("width",this.width).attr("height",this.height).attr("rx",this.rx).attr("ry",this.ry).style("stroke","lightgray").style("stroke-width","1px").attr("fill","transparent").style("display",this.showOutlines?"block":"none")}},{key:"setNodeFilter",value:function(t){this.isNodeHidden=t,this.hasNodeFilter=!0}},{key:"shouldVisitCell",value:function(t){var e=!0;return this.visitAttributeCells&&(e=e&&t.isAttributeCell),this.visitAttributeLabelCells&&(e=e&&t.isAttributeLabelCell),this.visitDataCells&&(e=e&&t.isDataCell),this.visitEditAttributeCells&&(e=e&&t.isEditAttributeCell),this.visitHeaderCells&&(e=e&&t.isHeaderCell),this.visitLabelCells&&(e=e&&t.isLabelCell),e}},{key:"setPathFilterFunction",value:function(t){this.pathFilterFunction=t}},{key:"setTooltipMetrics",value:function(t){this.metrics=t}}]),t}();e.cmCellVisitor=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(15),l=function(t){function e(t,i,o){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.filterRange=o}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){if(!t.controls)throw"Something went wrong setting scents of attribute cells! The controls had not been created yet.";t.controls.setAttributeFilterRange(this.filterRange)}}}]),e}(s.cmAttributeLabelVisitorBase);e.cmAttributeLabelScentVisitor=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=i(20),u=function(t){function e(t,i,o,n,s,l,u,c,h,d){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.rowHeight=s,this.colWidth=l,this.rowHeightAttr=u,this.colWidthAttr=c,this.callbacks={},this.callbacks.onSortRows=t,this.callbacks.onSortCols=i,this.callbacks.onHideRow=o,this.callbacks.onHideCol=n,this.callbacks.onFilterNodes=h,this.callbacks.onFilterAttributes=d,this.createColumnLabels=!0}return o(e,t),n(e,[{key:"apply",value:function(t){if(t.isAttributeLabelCell&&-1==t.data.attributeIndex){t.controls=[];var e=t.data.name,i=t.getGroup();t.controls.push(new l.cmNodeLabelControls(i,e,this.colWidthAttr,this.rowHeightAttr,this.colWidth,this.rowHeight,this.callbacks.onFilterNodes,t.data.nodeIndexes,this.callbacks.onSortRows,this.callbacks.onSortCols,this.createColumnLabels,t.data.rowAttributeNodeGroup,t.data.colAttributeNodeGroup))}}},{key:"setCreateColumnLabels",value:function(t){this.createColumnLabels=t}}]),e}(s.cmCellVisitor);e.cmNodeLabelVisitor=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(11),l=function(t){function e(t,i,o,n,s,l,u,c,h,d,p,f,g){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.onSortRows=h,this.onSortCols=d,this.onFilter=u,this.nodeIndexes=c,this.rowAttributeNodeGroup=f,this.colAttributeNodeGroup=g,this.name=i,this.areRowsSorted=!1,this.areColsSorted=!1;var v=this.getGroup();p&&e.createLabel(v,i,!0,o,n,s,l),e.createLabel(v,i,!1,o,n,s,l),p?(this.createInteractionRect(v,!0,o,n,s,l),this.createInteractionRect(v,!1,o-l,n,s,l),this.toggleControlVisible(!1,!0),this.toggleControlVisible(!1,!1)):(this.createInteractionRect(v,!1,o,n,s,l),this.toggleControlVisible(!1,!1))}return o(e,t),n(e,[{key:"createInteractionRect",value:function(t,i,r,o,n,a){var s=this;t=i?t.append("g").attr("transform","translate("+(r-n)+", "+o+")rotate(270)"):t.append("g").attr("transform","translate(0,"+(o-a)+")");var l=function(t){s.toggleControlVisible(!1,t)},u=function(t){s.toggleControlVisible(!0,t)},c=t.append("rect").data([i]).attr("width",r).attr("height",i?n:a).classed("matrix-view-attribute-controls",!0).on("mouseenter",u).on("mouseleave",l),h=t.append("foreignObject").attr("width",r).append("xhtml:div").style("justify-content","space-between").style("display","flex").data([i]).on("mouseover",u).on("mouseleave",l),d=h.append("xhtml:div").data([i]).classed("matrix-view-sortbar",!0).on("mouseover",u).on("mouseleave",l),p=h.append("xhtml:div").classed("matrix-view-toolbar",!0).on("mouseover",u).on("mouseleave",l);p.append("i").data([i]).classed("fa",!0).classed("fa-filter",!0).classed("matrix-view-toolbar-item",!0).attr("title","filter").on("click",function(t){s.onFilter(s.name,s.nodeIndexes,t?s.colAttributeNodeGroup:s.rowAttributeNodeGroup)}),d.append("i").data([i]).classed("fa",!0).classed("fa-sort-desc",!0).classed("matrix-view-toolbar-item",!0).attr("title","sort").on("click",function(t){t?(s.areColsSorted=!0,s.onSortCols(s.name,s.sortColsAscending,this.parentNode),s.sortColsAscending=!s.sortColsAscending,e.setSortIcon(this,s.sortColsAscending)):(s.areRowsSorted=!0,s.onSortRows(s.name,s.sortRowsAscending,this.parentNode),s.sortRowsAscending=!s.sortRowsAscending,e.setSortIcon(this,s.sortRowsAscending))}),i?(this.verticalControls=p,this.verticalOutline=c,this.verticalSortControls=d):(this.controls=p,this.outline=c,this.sortControls=d)}},{key:"toggleControlVisible",value:function(t,e){e?(this.verticalOutline.attr("stroke",t?"black":"none"),this.verticalControls.style("display",t?"flex":"none"),t||this.verticalSortControls.select(".fa").attr("data-is-sorted")?t&&this.verticalSortControls.style("display","flex"):this.verticalSortControls.style("display","none")):(this.outline.attr("stroke",t?"black":"none"),this.controls.style("display",t?"flex":"none"),t||this.sortControls.select(".fa").attr("data-is-sorted")?t&&this.sortControls.style("display","flex"):this.sortControls.style("display","none"))}}],[{key:"createLabel",value:function(t,e,i,r,o,n,a){i?t.append("text").text(e).attr("transform","translate("+(r-n)+" ,"+o/2+")rotate(270)").classed("matrix-view-attribute-label",!0):t.append("text").attr("transform","translate("+r/2+","+(o-a)+")").text(e).classed("matrix-view-attribute-label",!0)}},{key:"setSortIcon",value:function(t,e){t=d3.select(t),t.attr("data-is-sorted",!0),t.classed("fa-sort-desc",!e),t.classed("fa-sort-asc",e)}}]),e}(s.SvgGroupElement);e.cmNodeLabelControls=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(22),l=i(16),u=function(t){function e(t,i){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.values=[]}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t))for(var e=0;e<t.data.values.length;++e)this.values.push(t.data.values[e])}},{key:"getValueRange",value:function(){return[d3.min(this.values),d3.max(this.values)]}}]),e}(l.cmAttributeCellVisitor);e.cmScatterPlot1DPreprocessor=u;var c=function(t){function e(t,i,o,n){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.radius=o,this.valueRange=n}return o(e,t),n(e,[{key:"apply",value:function(t){var e=this;this.shouldVisitCell(t)&&!function(){var i=t.data,r=t.data.values;e.callbacks&&(i.isVertical?(e.width=15,e.height=70):(e.width=70,e.height=15),e.createInteractionGroup(t));var o=e,n=function(){o.callbacks.mouseOver(t)},a=function(){o.callbacks.mouseOut(t)};i.isVertical?new s.visScatterPlot1D(t.interactionGroup,15,70,e.radius,r,e.valueRange,i.orientation,n,a):new s.visScatterPlot1D(t.interactionGroup,70,15,e.radius,r,e.valueRange,i.orientation,n,a)}()}}]),e}(l.cmAttributeCellVisitor);e.cmScatterPlot1DVisitor=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n,a,s,l,u,c){i(this,t),this.radius=n,l==t.getOrientations().HORIZONTAL?(this.dataScale=t.createDataScale([5,r-5],s),this.dataOffset=function(){return o/4},this.xMarkPosition=function(t){return this.dataScale(t)},this.yMarkPosition=function(t){return this.dataOffset(t)}):(this.dataScale=t.createDataScale([o-5,5],s),this.dataOffset=function(){return r/2},this.yMarkPosition=function(t){return this.dataScale(t)},this.xMarkPosition=function(t){return this.dataOffset(t)}),this.xMarkPosition=this.xMarkPosition.bind(this),this.yMarkPosition=this.yMarkPosition.bind(this),this.dataOffset=this.dataOffset.bind(this),this.data=t.createData(a,this.radius,this.xMarkPosition,this.yMarkPosition),this.axis=t.createAxis(e,this.dataScale,this.dataOffset,l),this.marks=t.createMarks(e,this.data,this.radius),e.selectAll("*").on("mouseover",u).on("mouseout",c)}return r(t,null,[{key:"createAxis",value:function(e,i,r,o){var n=void 0;if(o==t.getOrientations().HORIZONTAL){var a=d3.svg.axis().scale(i).orient("bottom").ticks(3).tickFormat(d3.format("s"));n=e.append("g").attr("class","x axis").attr("transform","translate(0,"+r(1)+")").call(a)}else a=d3.svg.axis().scale(i).orient("left").ticks(3).tickFormat(d3.format("s")),n=e.append("g").attr("class","x axis").attr("transform","translate("+r(1)+",0)").call(a);return n.selectAll(".tick").style("display","none"),n}},{key:"createData",value:function(t,e,i,r){var o=[];return t.forEach(function(t){var n={};n.x=i(t),n.y=r(t),n.color="red",n.radius=e,n.value=t,o.push(n)}),o}},{key:"createDataScale",value:function(t,e){return e[1]=Math.ceil(e[1]),d3.scale.linear().range(t).domain(e)}},{key:"createMarks",value:function(t,e,i){var r=t.selectAll(".dot").data(e).enter().append("circle").attr("class","dot").attr("r",i).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y});r.attr("data-toggle","tooltip"),r.attr("data-title",function(t){return t.value}),r.attr("data-placement","right"),r.attr("data-container","body")}},{key:"getOrientations",value:function(){return{HORIZONTAL:0,VERTICAL:1}}}]),t}();e.visScatterPlot1D=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=function(t){function e(t,i){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.metric=void 0,this.graph=void 0,this.visitDataCells=!0}return o(e,t),n(e,[{key:"applyMetric",value:function(t){return this.metric(t,this.graph)}},{key:"setMetricFunction",value:function(t){this.metric=angular.copy(t)}}]),e}(s.cmCellVisitor);e.cmColorMapVisitorBase=l;var u=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.setRange=[-1,-1],this.nodeRange=[-1,-1],this.visitDataCells=!0,this.valuesOfSets=[],this.valuesOfNodes=[]}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=this.pathFilterFunction(t.getPathList()),i=this.applyMetric(e);t.isCellBetweenSets()?(this.valuesOfSets.push(i),-1==this.setRange[0]?this.setRange[0]=i:this.setRange[0]=Math.min(this.setRange[0],i),this.setRange[1]=Math.max(this.setRange[1],i)):(this.valuesOfNodes.push(i),-1==this.nodeRange[0]?this.nodeRange[0]=i:this.nodeRange[0]=Math.min(this.nodeRange[0],i),this.nodeRange[1]=Math.max(this.nodeRange[1],i))}}}]),e}(l);e.cmColorMapPreprocessor=u;var c=function(t){function e(t,i,o,n){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,o,n),this.visitDataCells=!0,this.colorMapIndex=i,this.colorScale=t}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=this.pathFilterFunction(t.getPathList()),i=this.applyMetric(e),r=t.isCellBetweenSets()&&(0==this.colorMapIndex||2==this.colorMapIndex)||!t.isCellBetweenSets()&&1==this.colorMapIndex||!t.isCellBetweenSets()&&3==this.colorMapIndex,o=this.colorScale(i),n=t.getGroup();e.length&&r?(n.append("rect").attr("width",this.width-2).attr("height",this.height-2).attr("transform","translate(1, 1)").attr("rx",this.rx).attr("ry",this.ry).style("stroke",o).style("stroke-width","1px").attr("fill",o),this.createInteractionGroup(t,e,this.graph)):this.createEmptyCellOutline(t)}}}]),e}(l);e.cmColorMapVisitor=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this)}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=t.getGroup().selectAll("*");e=e.filter(function(){var t=d3.select(this).attr("data-major-col");return void 0==t}),e.remove()}}},{key:"setClearAttributeCells",value:function(t){this.visitAttributeCells=t}},{key:"setClearAttributeLabelCells",value:function(t){this.visitAttributeLabelCells=t}},{key:"setClearDataCells",value:function(t){this.visitDataCells=t}}]),e}(s.cmCellVisitor);e.cmClearVisitor=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{
value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=function(t){function e(t){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.visitDataCells=!0,this.maxDomainValue=0,this.maxNumHops=1,this.summaries=[],this.metric=t,this.isList=!1}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=this.pathFilterFunction(t.getPathList());if(this.isList){for(var i=this.metric(e),r=0,o=Object.keys(i),n=0;n<o.length;++n){var a=o[n];r=Math.max(parseInt(a),r),this.maxDomainValue=Math.max(this.maxDomainValue,i[a])}this.maxNumHops=Math.max(this.maxNumHops,r),this.summaries.push(i)}else{var s=this.metric(e);0==s&&(s=1),this.summaries.push([s]),this.maxDomainValue=Math.max(this.maxDomainValue,this.summaries[this.summaries.length-1][0])}}}}]),e}(s.cmCellVisitor);e.cmBarChartPreprocessor=l;var u=function(t){function e(t,i,o,n){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.visitDataCells=!0,this.isList=n,this.isList?this.xScale=d3.scale.ordinal().domain(reorder.permutation(t.maxNumHops)).rangeRoundBands([0,i-2],.1):this.xScale=d3.scale.ordinal().domain([0]).rangeRoundBands([0,i-2],0),this.yScale=d3.scale.log().domain([1,t.maxDomainValue]).range([o,3]),this.preprocessor=t,this.width=i,this.height=o,this.visited=0}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=this.preprocessor.summaries[this.visited],i=t.getGroup(),r=this,o=[];this.visited+=1;var n=this.pathFilterFunction(t.getPathList());if(!n.length)return void this.createEmptyCellOutline(t);if(this.isList){for(var a=0;a<=r.preprocessor.maxNumHops;++a)void 0==e[a]&&(e[a]=1);for(a=0;a<r.preprocessor.maxNumHops;++a)o[a]=e[a+1]}else o=e;var s=i.append("g").attr("transform","translate(1, 1)");s.selectAll("rect").data(o).enter().append("rect").attr("transform",function(t,e){return"translate("+r.xScale(e)+","+(r.yScale(t)-2)+")"}).attr("width",r.xScale.rangeBand()).attr("height",function(t){return r.height-r.yScale(t)}).attr("class","matrix-view-histogram-bar"),s.append("rect").attr("width",this.width-2).attr("height",this.height-2).attr("rx",2).attr("ry",2).style("stroke","lightgray").style("stroke-width","1px").attr("fill","none"),this.createInteractionGroup(t,n,this.graph)}}}]),e}(s.cmCellVisitor);e.cmBarChartVisitor=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=function(t){function e(t,i){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.visitDataCells=!0}return o(e,t),n(e,[{key:"applyMetric",value:function(t){return this.metric(t,this.graph)}},{key:"setMetricFunction",value:function(t){this.metric=angular.copy(t)}},{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=this.pathFilterFunction(t.getPathList()),i=this.applyMetric(e),r=t.getGroup();e.length?(r.append("text").attr("width",this.width-2).attr("height",this.height-2).attr("transform","translate(0, 8)").attr("rx",this.rx).attr("ry",this.ry).style("stroke-width","1px").attr("font-size","8px").text(i),this.createInteractionGroup(t,e,this.graph)):this.createEmptyCellOutline(t)}}}]),e}(s.cmCellVisitor);e.cmRawValueVisitor=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=function(t){function e(t,i,o,n){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.editAttributeRows=o,this.editAttributeCols=n,this.visitEditAttributeCells=!0}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=t.data.isVertical,i=t.getGroup(),r=this.height,o=this.width;i=i.append("g");var n=i.append("foreignObject").style("width",o+"px").style("height",r),a=n.append("xhtml:div").classed("matrix-view-edit-attribute-controls",!0).style("display","block").style("width",o+"px").style("height",r);e?(i.attr("transform","translate("+3*o+", 0)"),a.append("i").classed("fa",!0).classed("fa-plus",!0).attr("title","edit visible column attributes").on("click",this.editAttributeRows)):(i.attr("transform","translate(0, "+3*r+")"),a.append("i").classed("fa",!0).classed("fa-plus",!0).attr("title","edit visible row attributes").on("click",this.editAttributeCols))}}}]),e}(s.cmCellVisitor);e.cmEditVisibleAttributesVisitor=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(16),l=function(t){function e(t,i,o,n,s,l){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.labelRowHeight=n,this.labelRowWidth=o,this.labelColWidth=s,this.labelColHeight=l,this.isVisitingColsCollapsedAttr=!1,this.isVisitingRowsCollapsedAttr=!1,this.areColsCollapsed=!1,this.areRowsCollapsed=!1}return o(e,t),n(e,[{key:"apply",value:function(t){if(this.shouldVisitCell(t)){var e=t.getGroup(),i=t.data.values[0];if(t.data.isVertical){this.areColsCollapsed&&!this.isVisitingColsCollapsedAttr&&t.isMajorCell&&(i="----");var r=e.append("g").attr("transform","translate("+this.labelRowWidth/2+","+this.labelRowHeight+")rotate(270)").attr("clip-path","url(#vertical-attribute-clip").append("text").text(i).classed("matrix-view-string-attribute",!0);this.isVisitingAirportOrState&&(r.attr("transform","translate( "+this.labelRowHeight/2+",0)"),r.style("text-anchor","middle")),this.width=this.labelRowWidth,this.height=this.labelRowHeight}else{t.isInMajorRow&&this.areRowsCollapsed&&!this.isVisitingRowsCollapsedAttr&&(i="----");var r=e.append("g").attr("transform","translate(0,"+this.labelColHeight/2+")").attr("clip-path","url(#horizontal-attribute-clip)").append("text").text(i).classed("matrix-view-string-attribute",!0);this.isVisitingAirportOrState&&(r.attr("transform","translate( "+this.labelColWidth/2+", 0)"),r.style("text-anchor","middle")),this.width=this.labelColWidth,this.height=this.labelColHeight}this.callbacks&&this.createInteractionGroup(t)}}}]),e}(s.cmAttributeCellVisitor);e.cmStringAttributeVisitor=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(17),l=i(6),u=function(t){function e(){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.isHovered=!0,this.nodeIndexes=[]}return o(e,t),n(e,[{key:"setNodes",value:function(t,e){this.nodeIndexes=t,this.matchPaths=e,t&&(this.matchAnySources=0==this.nodeIndexes.sources.indexOf(-1),this.matchAnyTargets=0==this.nodeIndexes.targets.indexOf(-1),this.matchAnyIntermediates=0==this.nodeIndexes.intermediates.indexOf(-1))}},{key:"apply",value:function(t){if((t.isDataCell||t.isRowLabelCell||t.isColLabelCell)&&t.interactionGroup){var e=!1;if(this.isHovered&&t.isDataCell){var i=t.data.ids;this.matchPaths?(l.Utils.hasIntersection(this.nodeIndexes.sources,i.sources)||this.matchAnySources)&&(l.Utils.hasIntersection(this.nodeIndexes.targets,i.targets)||this.matchAnyTargets)&&(l.Utils.hasIntersection(this.nodeIndexes.intermediates,i.intermediates)||this.matchAnyIntermediates)&&(e=!0):(l.Utils.hasIntersection(this.nodeIndexes.sources,i.sources)||this.matchAnySources||l.Utils.hasIntersection(this.nodeIndexes.targets,i.targets)||this.matchAnyTargets||l.Utils.hasIntersection(this.nodeIndexes.intermediates,i.intermediates)||this.matchAnyIntermediates)&&(e=!0)}t.interactionGroup.classed("selected")||t.interactionGroup.classed("hovered",this.isHovered&&e)}}}]),e}(s.cmCellVisitor);e.cmHoverVisitor=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})},d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.union=function(t){if(t instanceof d3.selection){var e=d3.select(null);return e.splice(0,1),[].push.apply(e,this),[].push.apply(e,t),e}throw new Error("Can only union with another d3 selection")};var i;e.UtilsD3=i=function(){function t(t,i){for(var r=d3.transform(d3.select(e(t,i)).attr("transform")),o=i-1;o>=0;--o){var n=d3.transform(d3.select(e(t,o)).attr("transform"));r.translate[0]+=n.translate[0],r.translate[1]+=n.translate[1]}return r}function e(t,e){for(var i=t,r=0;e>r;++r)i=i.parentElement;return i}function i(t){return d3.transform(d3.select(t).attr("transform"))}return{getAccumulatedTranslate:t,getAncestor:e,getTransform:i}}(),e.UtilsD3=i},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(32),l=i(6),u=function(t){function e(t,i,o,n,s,u,c,h,d,p,f,g,v,m,b){if(r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,u,c,g,v),this.unrollControls=[],this.rollupControls=[],!c){var y=h.getNumChildren();if(m){var w=0,C=!0,x=null,k=new e(this.minorRowContainer,w,o,n,s,u,C,h,p[w],x,e.getAttributes(f,w),g,v,m);k.setVisible(!1),this.addMinorRow(k);for(var O=0;y>O;++O)w=O+1,k=new e(this.minorRowContainer,w,o,n,s,u,C,h.getChildRowAt(O),p[w],x,e.getAttributes(f,O+1),g,v,m),k.setVisible(!1),this.addMinorRow(k)}this.getMajorCell(0).getGroup().style("display","none")}var N=this.getNumMajorCells();for(O=0;N>O;++O)this.matrix.isAttributeCell(O)||this.matrix.isLabelCell(O)||this.matrix.isDataCell(O)&&(this.majorCells[O].isDataCell=!0);for(v&&this.createMinorCells(n,o,!0),O=0;N>O;++O){var A=this.majorCells[O],S={};if(A.isInNodeListView=b,this.matrix.isAttributeCell(O));else if(this.matrix.isLabelCell(O));else if(this.matrix.isDataCell(O)){var M=this.matrix.getDataColIndex(O);S={colNodeIndexes:o[M],modelRow:h},A.setData(S);var P={};if(b){var I=A.getPathList();P={sources:l.Utils.getSourceNodesFromPaths(I),intermediates:h.getAllNodeIndexes(),targets:l.Utils.getTargetNodesFromPaths(I)}}else P={sources:h.getAllNodeIndexes(),intermediates:l.Utils.getIntermediateNodesFromPaths(A.getPathList()),targets:o[M]};if(A.data.ids=P,this.areColsCollapsed&&A.minorCells.length!=o[M].length)throw"something fucked up in col node indexes and minor cells";for(var j=0;j<this.majorCells[O].minorCells.length;++j)S={colNodeIndexes:o[M][j],modelRow:h},P={sources:h.getAllNodeIndexes(),intermediates:l.Utils.getIntermediateNodesFromPaths(A.getPathList()),targets:[o[M][j]]},A.minorCells[j]&&(A.minorCells[j].setData(S),A.minorCells[j].data.ids=P)}}}return o(e,t),n(e,[{key:"setLabelColWidth",value:function(t){for(var e=0;e<this.majorCells.length;++e){var i=this.majorCells[e];i.isRowLabelCell&&i.getGroup().select("text").attr("x",t-1)}for(e=0;e<this.minorRows.length;++e)this.minorRows[e].setLabelColWidth(t)}}],[{key:"createLabelInCell",value:function(t,e,i,r){var o=t.getGroup();o.append("g").append("text").attr("x",i).attr("y",r/2).style("text-anchor","end").attr("alignment-baseline","middle").attr("font-size",8).text(e)}},{key:"getAttributes",value:function(t,e){for(var i=[],r=0;r<t.length;++r)i.push([t[r][e]]);return i}}]),e}(s.cmMatrixRow);e.cmDataRow=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(11),l=i(33),u=function(t){function e(t,i,o,n,s,l,u,c,h){r(this,e);var d=null;d=u?t.append("g").attr("data-minor-row",i):t.append("g").attr("data-major-row",i),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,d),this.areColsCollapsed=h,this.currentHeight=l,this.rowHeight=l,this.isMinorRow=u,this.rowIndex=i,this.isMinorRowVisible=[],this.majorCells=[],this.minorRows=[],this.matrix=c,this.unrolled=!1,u||(this.minorRowContainer=d.append("g").attr("data-minor-row-container",i));var p=o.length,f=p+n;this.createMajorCells(f,n)}return o(e,t),n(e,[{key:"addMinorRow",value:function(t){this.minorRows.push(t),this.isMinorRowVisible.push(!0),t.setPosition(0,0)}},{key:"apply",value:function(t){for(var e=0;e<this.majorCells.length;++e)this.majorCells[e].apply(t);for(var i=0;i<this.minorRows.length;++i)this.minorRows[i].apply(t)}},{key:"createControlsCell",value:function(t,e,i){var r=this.getMajorCell(0).getGroup(),o=this;this.unrollRowCallback=i,this.unrollControls=r.append("g").style("display","block"),this.rollupControls=r.append("g").style("display","none"),this.unrollControls.append("foreignObject").style({width:t+"px",height:e+"px"}).append("xhtml:div").classed("matrix-view-edit-attribute-controls",!0).append("i").classed("fa",!0).classed("fa-angle-right",!0).attr("title","unroll").on("click",function(){o.onUnrollRowClicked()}),this.rollupControls.append("foreignObject").style({width:t+"px",height:e+"px"}).append("xhtml:div").classed("matrix-view-edit-attribute-controls",!0).append("i").classed("fa",!0).classed("fa-angle-down",!0).attr("title","roll up").on("click",function(){o.onRollupRowClicked()})}},{key:"createMajorCells",value:function(t,e){for(var i=this.group,r=0;t>r;++r)this.majorCells[r]=new l.cmMatrixCell(i,r,!this.isMinorRow,!0,e>r),this.addChild(this.majorCells[r])}},{key:"createMinorCells",value:function(t,e,i){for(var r=0;r<e.length+t;++r)if(r>=t)for(var o=e[r-t],n=0;n<o.length;++n){var a=this.getMajorCell(r),s=a.getGroup(),u=new l.cmMatrixCell(s,n,!this.isMinorRow,!1,t>r,i);u.setVisible(!1),u.setPosition(0,0),a.addMinorCell(u),a.addChild(u)}}},{key:"getCurrentHeight",value:function(){return this.currentHeight}},{key:"getMajorCell",value:function(t){return this.majorCells[t]}},{key:"getNumMajorCells",value:function(){return this.majorCells.length}},{key:"getNumMinorRows",value:function(){return this.minorRows.length}},{key:"getNumVisibleMinorRows",value:function(){for(var t=0,e=0;e<this.isMinorRowVisible.length;++e)this.isMinorRowVisible[e]&&t++;return t}},{key:"hideMinorRow",value:function(t){this.isMinorRowVisible[t]=!1,this.updateMinorRows(this.unrolled,this.isMinorRowVisible)}},{key:"onRollupRowClicked",value:function(t){this.unrolled=!1,this.updateControls(this.unrolled),this.updateMinorRows(this.unrolled,this.isMinorRowVisible),t||this.unrollRowCallback(this.rowIndex)}},{key:"onUnrollRowClicked",value:function(t){this.unrolled=!0,this.updateControls(this.unrolled),this.updateMinorRows(this.unrolled,this.isMinorRowVisible),t||this.unrollRowCallback(this.rowIndex,this.unrolled)}},{key:"setDebugVisible",value:function(t){var e=this.group.selectAll("*");e=e.filter(function(){return d3.select(this).attr("data-debug")}),e.style("display",t?"block":"none")}},{key:"setColPositions",value:function(t,e){for(var i=e.length,r=0;i>r;++r)this.majorCells[r]&&this.majorCells[r].setPosition(e[t[r]],0);if(!this.isMinorRow){var o=this.getNumMinorRows();for(r=0;o>r;++r)this.minorRows[r].setColPositions(t,e)}}},{key:"setColWidths",value:function(t){for(var e=t.length,i=0,r=0;e>r;++r)this.majorCells[r]&&(this.majorCells[r].setPosition(i,0),i+=t[r]);if(!this.isMinorRow){var o=this.getNumMinorRows();for(r=0;o>r;++r)this.minorRows[r].setColWidths(t)}}},{key:"showMinorRow",value:function(t){this.isMinorRowVisible[t]=!0,this.updateMinorRows(this.unrolled,this.isMinorRowVisible)}},{key:"updateMinorCols",value:function(t,e,i,r){var o=this.majorCells[t];if(o){var n=o.minorCells;if(n){for(var a=e,s=0;s<n.length;++s){var l=n[s];i?r[t][s]?(l.setVisible(!0),l.setPosition(a,0),a+=e):l.setVisible(!1):l.setPosition(0,0,!0)}if(!this.isMinorRow){var u=this.getNumMinorRows();for(s=0;u>s;++s)this.minorRows[s].updateMinorCols(t,e,i,r)}}}}},{key:"updateControls",value:function(t){this.unrollControls.style("display",t?"none":"block"),this.rollupControls.style("display",t?"block":"none")}},{key:"updateMinorRows",value:function(t,e){var i=this.getNumMinorRows();this.currentHeight=this.rowHeight;for(var r=0;i>r;++r)t?e[r]?(this.minorRows[r].setVisible(!0),this.minorRows[r].setPosition(0,this.currentHeight),this.currentHeight+=this.rowHeight):this.minorRows[r].setVisible(!1):this.minorRows[r].setPosition(0,0,!0)}}],[{key:"getMajorCellIndex",value:function(t){return t.attr("data-major-col")}}]),e}(s.SvgGroupElement);e.cmMatrixRow=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(11),l=function(t){function e(t,i,o,n,s,l){r(this,e);var u=t.append("g");u.attr("data-major-col",i),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,u),this.isHeaderCell=s,this.isDataCell=l,this.isAttributeCell=!1,this.isAttributeLabelCell=!1,this.isEditAttributeCell=!1,this.isInMajorRow=o,this.isMajorCell=n,this.isRowLabelCell=!1,this.isColLabelCell=!1,this.isInNodeListView=!1,this.minorCells=[],this.data={}}return o(e,t),n(e,[{key:"addMinorCell",value:function(t){this.minorCells.push(t)}},{key:"apply",value:function(t){t.apply(this);for(var e=0;e<this.minorCells.length;++e)this.minorCells[e].apply(t)}},{key:"setData",value:function(t){this.data=t}},{key:"getPathList",value:function(){var t=[];return this.isInMajorRow?(t=this.isMajorCell?[this.data.colNodeIndexes]:[[this.data.colNodeIndexes]],this.data.modelRow.getAllValuesAsList(t)[0]):(t=this.isMajorCell?[this.data.colNodeIndexes]:[[this.data.colNodeIndexes]],this.data.modelRow.getValuesAsList(t)[0])}},{key:"isCellBetweenSets",value:function(){return this.isInMajorRow&&this.isMajorCell}}]),e}(s.SvgGroupElement);e.cmMatrixCell=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(10),l=i(35),u=i(36),c=i(37),h=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.colWidthAttr=0,this.colWidthLabel=0,this.colWidthControl=0,this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){var e=this.colAttributes,i=new l.cmControlRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeight,t.areColsCollapsed,this),r=this.onColControlsClicked.bind(this);i.setColClickCallback(r),this.addRow(i,this.rowHeight);for(var o=0;o<this.attributes.length;++o){var n=new c.cmAttributeRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeightAttr,!1,e[o],this,o,this.attributes[o],this.colAttributeNodeGroup,t.areColsCollapsed);this.addRow(n,this.rowHeightAttr)}var a=t.getMajorColLabels(),s=t.getMinorColLabels(),h=new u.cmLabelRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.labelRowHeight,a,s,this,this.colAttributeNodeGroup,t.areColsCollapsed);this.addRow(h,this.labelRowHeight)}}]),e}(s.cmMatrixBase);e.cmMatrixTopHeader=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(32),l=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,!1,c),this.unrollControls=[],this.rollupControls=[];for(var h=this.getNumMajorCells(),d=0;h>d;++d){var p=this.getMajorCell(d).getGroup();if(this.unrollControls[d]=p.append("g"),this.matrix.isLabelCell(d));else if(this.matrix.isDataCell(d)&&u){var f=this;this.rollupControls[d]=p.append("g"),this.rollupControls[d].style("display","none"),this.unrollControls[d].append("foreignObject").style({width:s+"px",height:l+"px"}).append("xhtml:div").classed("matrix-view-edit-attribute-controls",!0).append("i").classed("fa",!0).classed("fa-angle-down",!0).attr("title","unroll").on("click",function(){f.onUnrollColClicked(d3.select(this.parentNode.parentNode.parentNode.parentNode))}),this.rollupControls[d].append("foreignObject").style({width:s+"px",height:l+"px"}).append("xhtml:div").classed("matrix-view-edit-attribute-controls",!0).append("i").classed("fa",!0).classed("fa-angle-right",!0).attr("title","roll up").on("click",function(){f.onRollupColClicked(d3.select(this.parentNode.parentNode.parentNode.parentNode))})}}this.colNodeIndexes=o}return o(e,t),n(e,[{key:"onUnrollColClicked",value:function(t){var e=s.cmMatrixRow.getMajorCellIndex(t);this.unrollControls[e].style("display","none"),this.rollupControls[e].style("display","block"),this.colClickedCallback(e,!0)}},{key:"onRollupColClicked",value:function(t){var e=s.cmMatrixRow.getMajorCellIndex(t);this.unrollControls[e].style("display","block"),this.rollupControls[e].style("display","none"),this.colClickedCallback(e,!1)}},{key:"setColClickCallback",value:function(t){this.colClickedCallback=t}}]),e}(s.cmMatrixRow);e.cmControlRow=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(32),l=function(t){function e(t,i,o,n,s,l,u,c,h,d,p){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,!1,h,p),this.unrollControls=[],this.rollupControls=[];var f=this.getNumMajorCells();this.createMinorCells(n,o);for(var g=0;f>g;++g){var v=this.getMajorCell(g),m=this.matrix.getDataColIndex(g);if(this.matrix.isControlCell(g));else if(this.matrix.isAttributeCell(g));else if(this.matrix.isLabelCell(g));else if(this.matrix.isDataCell(g)){v.isColLabelCell=!0,v.setData({values:[u[m]],isVertical:1,attributeIndex:-1,nodeIndexes:o[m],attributeNodeGroup:d});var b={sources:[-1],intermediates:[-1],targets:v.data.nodeIndexes};if(v.data.ids=b,v.isAttributeCell=!0,this.areColsCollapsed)for(var y=0;y<o[m].length;++y){var w=v.minorCells[y];w&&(w.isColLabelCell=!0,w.setData({values:[c[m][y]],isVertical:1,attributeIndex:-1,nodeIndexes:[o[m][y]],attributeNodeGroup:d}),b={sources:[-1],intermediates:[-1],targets:v.data.nodeIndexes},v.data.ids=b,w.isAttributeCell=!0)}}}this.colNodeIndexes=o}return o(e,t),n(e,null,[{key:"createColNodeLabel",value:function(t,e,i,r){var o=t.getGroup();o.append("g").attr("transform","translate("+r/2+","+i+")rotate(270)").append("text").attr("text-anchor","start").attr("alignment-baseline","middle").attr("font-size",8).text(e)}}]),e}(s.cmMatrixRow);e.cmLabelRow=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{
value:!0});var n=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},a=i(32),s=function(t){function e(t,i,o,a,s,l,u,c,h,d,p,f,g){r(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,a,s,l,u,h,g),this.createMinorCells(a,o,!1);for(var v=0;v<this.majorCells.length;++v){var m={},b=this.majorCells[v];if(this.matrix.isLabelCell(v));else if(this.matrix.isDataCell(v)){var y=this.matrix.getDataColIndex(v);if(m={values:c[y],nodeIndexes:o[y],isVertical:!0,attributeIndex:d,attributeNodeGroup:f},b.isAttributeCell=!0,b.setData(m),this.areColsCollapsed)for(var w=0;w<o[y].length;++w){m={values:[c[y][w]],isVertical:!0,attributeIndex:d,nodeIndexes:[o[y][w]],attributeNodeGroup:f};var C=b.minorCells[w];C.isAttributeCell=!0,C.setData(m)}}}}return o(e,t),e}(a.cmMatrixRow);e.cmAttributeRow=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(10),l=i(39),u=i(40),c=i(41),h=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.isControlsMatrix=!0,this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){var e=this.colAttributes,i=this.rowAttributes,r=new u.cmEditAttributeRow(this.svg,this.allRows.length,[],this.numHeaderCols,this.colWidth,this.rowHeight,t.areColsCollapsed,this);this.addRow(r,this.rowHeight);for(var o=0;o<this.attributes.length;++o)r=new l.cmControlsMatrixRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeightAttr,!1,e[o],this,o,this.attributes[o],this.colAttributeNodeGroup),this.addRow(r,this.rowHeightAttr);var n=t.getMajorColLabels(),a=t.getMinorColLabels();r=new c.cmControlsMatrixColHeaderRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.labelRowHeight,n,a,this,this.attributes,this.rowNodeIndexes,this.rowAttributeNodeGroup,i,this.colAttributeNodeGroup),this.addRow(r,this.labelRowHeight)}}]),e}(s.cmMatrixBase);e.cmControlsMatrix=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},a=i(32),s=i(6),l=function(t){function e(t,i,o,a,l,u,c,h,d,p,f,g){r(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,[],a,l,u,c,d);for(var v=0;v<this.majorCells.length;++v){var m={},b=this.majorCells[v];this.matrix.isLabelCell(v)?(m={name:f,isVertical:!0,attributeIndex:p,nodeIndexes:o,attributeNodeGroup:g,attributeValues:s.Utils.getFlattenedLists(h)},b.isAttributeLabelCell=!0,b.setData(m)):this.matrix.isDataCell(v)}}return o(e,t),e}(a.cmMatrixRow);e.cmControlsMatrixRow=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},a=i(32),s=function(t){function e(t,i,o,a,s,l,u,c){r(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,a,s,l,!1,c),this.unrollControls=[],this.rollupControls=[];for(var h=this.getNumMajorCells(),d=0;h>d;++d){var p=this.getMajorCell(d).getGroup();if(this.unrollControls[d]=p.append("g"),this.matrix.isLabelCell(d)){this.majorCells[d].isEditAttributeCell=!0;var f={isVertical:!0};this.majorCells[d].setData(f)}}}return o(e,t),e}(a.cmMatrixRow);e.cmEditAttributeRow=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(32),l=i(6),u=function(t){function e(t,i,o,n,s,u,c,h,d,p,f,g,v,m){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,[],n,s,u,!1,d),this.unrollControls=[],this.rollupControls=[];for(var b=this.getNumMajorCells(),y=0;b>y;++y){var w=this.getMajorCell(y);if(this.matrix.isControlCell(y))w.isEditAttributeCell=!0,w.setData({isVertical:!1});else if(this.matrix.isAttributeCell(y)){var C=this.matrix.getAttributeColIndex(y);w.setData({name:p[C],isVertical:0,attributeIndex:C,nodeIndexes:f,attributeNodeGroup:g,attributeValues:l.Utils.getFlattenedLists(v[C])}),w.isAttributeLabelCell=!0}else this.matrix.isLabelCell(y)&&(w.setData({name:d.model.getCmGraph().getNodeIdName(),isVertical:0,nodeIndexes:f,attributeIndex:-1,rowAttributeNodeGroup:g,colAttributeNodeGroup:m}),w.isAttributeLabelCell=!0);this.colNodeIndexes=o}}return o(e,t),n(e,null,[{key:"createColNodeLabel",value:function(t,e,i,r){var o=t.getGroup();o.append("g").attr("transform","translate("+r/2+","+i+")rotate(270)").append("text").attr("text-anchor","start").attr("alignment-baseline","middle").attr("font-size",8).text(e)}}]),e}(s.cmMatrixRow);e.cmControlsMatrixColHeaderRow=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(10),l=i(43),u=i(32),c=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.labelRowHeight=0,this.rowHeightAttr=0,this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){for(var e=0;e<this.numHeaderCols;++e)this.addRow(new u.cmMatrixRow(this.svg,e,[],this.numHeaderCols),0);var i=this.rowNodeAttributes,r=t.getCurrentRows(),o=t.getMajorRowLabels(),n=t.getMinorRowLabels();for(e=0;e<this.rowNodeIndexes.length;++e){var a=new l.cmDataAttributeRow(this.svg,e+this.numHeaderRows,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeight,!1,r[e],o[e],n[e],i[e],this,this.rowAttributeNodeGroup,t.areColsCollapsed,t.areRowsCollapsed);if(t.areRowsCollapsed){var s=this.onRowControlsClicked.bind(this);a.createControlsCell(this.colWidth,this.rowHeight,s)}a.setLabelColWidth(this.colWidthLabel),this.addRow(a,this.rowHeight)}}}]),e}(s.cmMatrixBase);e.cmMatrixLeftHeader=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(32),l=i(31),u=function(t){function e(t,i,o,n,s,u,c,h,d,p,f,g,v,m,b){if(r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,[],n,s,u,c,g,m),this.unrollControls=[],this.rollupControls=[],!c){var y=h.getNumChildren();if(b){var w=0,C=!0,x=null,k=new e(this.minorRowContainer,w,[],n,s,u,C,h,p[w],x,l.cmDataRow.getAttributes(f,w),g,m);k.setVisible(!1),this.addMinorRow(k);for(var O=0;y>O;++O)w=O+1,k=new e(this.minorRowContainer,w,[],n,s,u,C,h.getChildRowAt(O),p[w],x,l.cmDataRow.getAttributes(f,O+1),g,m),k.setVisible(!1),this.addMinorRow(k)}}var N=this.getNumMajorCells();for(O=0;N>O;++O)this.matrix.isAttributeCell(O)?this.majorCells[O].isAttributeCell=!0:this.matrix.isLabelCell(O)?this.majorCells[O].isRowLabelCell=!0:this.matrix.isDataCell(O)&&(this.majorCells[O].isDataCell=!1);for(O=0;N>O;++O){var A=this.majorCells[O],S={};if(this.matrix.isAttributeCell(O)){var M=this.matrix.getAttributeColIndex(O);S={values:f[M],orientation:0,attributeIndex:M,nodeIndexes:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),attributeNodeGroup:v},S.ids={sources:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),intermediates:[],targets:[]},A.setData(S)}else if(this.matrix.isLabelCell(O))A.setData({values:[d],isVertical:0,attributeIndex:-1,nodeIndexes:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),attributeNodeGroup:v}),A.data.ids={sources:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),intermediates:[-1],targets:[-1]},A.isAttributeCell=!0;else if(this.matrix.isDataCell(O)&&m)for(var P=0;P<this.majorCells[O].minorCells.length;++P)S={colNodeIndexes:o[O][P],modelRow:h},A.minorCells[P].setData(S)}}return o(e,t),n(e,[{key:"setLabelColWidth",value:function(t){for(var e=0;e<this.majorCells.length;++e){var i=this.majorCells[e];i.isRowLabelCell&&i.getGroup().select("text").attr("x",t-1)}for(e=0;e<this.minorRows.length;++e)this.minorRows[e].setLabelColWidth(t)}}],[{key:"createLabelInCell",value:function(t,e,i,r){var o=t.getGroup();o.append("g").append("text").attr("x",i).attr("y",r/2).style("text-anchor","end").attr("alignment-baseline","middle").attr("font-size",8).text(e)}},{key:"getAttributes",value:function(t,e){for(var i=[],r=0;r<t.length;++r)i.push([t[r][e]]);return i}}]),e}(s.cmMatrixRow);e.cmDataAttributeRow=u},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n,a,s){i(this,t),this.$log=r,this.$scope=o,this.element=e,this.mainController=n,this.matrices=[],this.useAnimation=!0,this.$compile=s;var l=this;this.$scope.$on("changeMatrixHeight",function(){l.updateElementPositions(null,null,l.useAnimation)}),this.$scope.$on("setSortOrders",function(t,e,i){l.setSortOrders(e,i)}),this.wrapperDiv=e.append("div").classed("vflex",!0),this.topDiv=this.wrapperDiv.append("div").classed("matrix-row",!0).classed("matrix-row-top",!0),this.controlsHeaderElement=this.topDiv.append("div").attr("id",a+"-header-controls").classed("matrix-element",!0),this.topHeaderElement=this.topDiv.append("div").attr("id",a+"-header-top").classed("matrix-element",!0).classed("matrix-element-top-right",!0),this.bottomDiv=this.wrapperDiv.append("div").classed("matrix-row",!0),this.leftHeaderElement=this.bottomDiv.append("div").attr("id",a+"-header-left").classed("matrix-element-bottom-left",!0),this.matrixElement=this.bottomDiv.append("div").classed("matrix-element-bottom-right",!0).on("scroll",function(){var t=angular.element(this).scrollLeft(),e=angular.element(this).scrollTop();angular.element("#"+a+"-header-top").scrollLeft(t),angular.element("#"+a+"-header-left").scrollTop(e)}),this.controlsHeaderSvg=this.controlsHeaderElement.append("svg").attr({width:1024,height:1024}),this.controlsHeaderGroup=this.controlsHeaderSvg.append("g"),this.topHeaderSvg=this.topHeaderElement.append("svg").attr({width:1024,height:1024}),this.topHeaderGroup=this.topHeaderSvg.append("g"),this.leftHeaderSvg=this.leftHeaderElement.append("svg").attr({width:1024,height:1024}),this.leftHeaderGroup=this.leftHeaderSvg.append("g"),this.matrixSvg=this.matrixElement.append("svg").attr({width:1024,height:1024}),this.matrixGroup=this.matrixSvg.append("g"),this.mainController.$timeout(function(){this.legendDiv=this.element.append("div").classed("matrix-view-legend-container",!0),this.colors=[],"node-list"==a?(this.colors[0]=this.legendDiv.append("adjustable-color-scale-directive").attr("color-scale","main.nodeListManager.matrix.colorScales[0]").attr("use-linear-color-scale","main.colorScaleService.useLinear[2]").attr("color-scale-index","main.nodeListManager.matrix.colorScaleIndexSets").attr("metric","main.ui.primaryNodeListScaleName + main.ui.selectedNodeListMetric.name").attr("values","main.nodeListManager.matrix.colorScalesValues[0]").attr("ng-show","main.ui.selectedNodeListEncoding.name == 'colormap'")[0][0],this.colors[1]=this.legendDiv.append("adjustable-color-scale-directive").classed("matrix-view-legend-container",!0).attr("ng-show","main.nodeListManager.matrix.hasSecondLegend && main.ui.selectedNodeListEncoding.name == 'colormap'").attr("use-linear-color-scale","main.colorScaleService.useLinear[3]").attr("color-scale-index","main.nodeListManager.matrix.colorScaleIndexNodes").attr("color-scale","main.nodeListManager.matrix.colorScales[1]").attr("metric","main.ui.secondaryNodeListScaleName + main.ui.selectedNodeListMetric.name").attr("values","main.nodeListManager.matrix.colorScalesValues[1]")[0][0]):(this.colors[0]=this.legendDiv.append("adjustable-color-scale-directive").classed("matrix-view-legend-container",!0).attr("ng-show","main.ui.selectedMatrixEncoding.name == 'colormap'").attr("use-linear-color-scale","main.colorScaleService.useLinear[0]").attr("color-scale","main.matrixManager.matrix.colorScales[0]").attr("color-scale-index","main.matrixManager.matrix.colorScaleIndexSets").attr("metric","main.ui.primaryScaleName + main.ui.selectedMatrixMetric.name").attr("values","main.matrixManager.matrix.colorScalesValues[0]")[0][0],this.colors[1]=this.legendDiv.append("adjustable-color-scale-directive").classed("matrix-view-legend-container",!0).attr("ng-show","main.matrixManager.matrix.hasSecondLegend && main.ui.selectedMatrixEncoding.name == 'colormap'").attr("use-linear-color-scale","main.colorScaleService.useLinear[1]").attr("color-scale-index","main.matrixManager.matrix.colorScaleIndexNodes").attr("color-scale","main.matrixManager.matrix.colorScales[1]").attr("metric","main.ui.secondaryScaleName + main.ui.selectedMatrixMetric.name").attr("values","main.matrixManager.matrix.colorScalesValues[1]")[0][0]);for(var t=0;t<this.colors.length;++t)this.$compile(this.colors[t])(o)}.bind(this))}return r(t,[{key:"setUseAnimation",value:function(t){this.useAnimation=t;for(var e=0;e<this.matrices.length;++e)this.matrices[e].setUseAnimation(t)}},{key:"setSortOrders",value:function(t,e){for(var i=0;i<this.matrices.length;++i)this.matrices[i].resetSortState(!0,!0),this.matrices[i].setSortOrders(t,e)}},{key:"setWidth",value:function(t){this.updateElementPositions(null,t,!0)}},{key:"setModel",value:function(t){for(var e=0;e<this.matrices.length;++e)this.matrices[e].setModel(t),this.matrices[e].setPosition(1,1),this.matrices[e].setUseAnimation(!1),this.matrices[e].updatePositions(this.matrices[e].rowPerm,this.matrices[e].colPerm),this.matrices[e].setUseAnimation(!0);this.updateElementPositions()}},{key:"updateElementPositions",value:function(t,e,i){var r=i?500:0,o=this.controlsHeader.getHeight(),n=this.controlsHeader.getWidth(),a=this.matrix.getWidth(),s=this.matrix.getHeight();this.controlsHeaderSvg.transition().duration(r).attr({width:n,height:o}),this.topHeaderSvg.transition().duration(r).attr({width:a,height:o}),this.leftHeaderSvg.transition().duration(r).attr({width:n,height:s}),this.matrixSvg.transition().duration(r).attr({width:a,height:s})}}]),t}();e.cmWrapperBase=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(46),l=i(48),u=i(44),c=i(50),h=i(53),d=function(t){function e(t,i,o,n,u,d,p,f,g){r(this,e),t.append("div").attr("id","intermediate-nodes-warning").html(""),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,o,u,f,"node-list",g),this.controlsHeader=new s.cmNodeListControls(this.controlsHeaderGroup,i,o,n,u,d,p,f),this.controlsHeader.setGridPosition([0,0]),this.topHeader=new c.cmNodeListTopHeader(this.topHeaderGroup,i,o,n,u,d,p,f),this.topHeader.setGridPosition([1,0]),this.leftHeader=new l.cmNodeListLeftHeader(this.leftHeaderGroup,i,o,n,u,d,p,f),this.leftHeader.setGridPosition([0,1]),this.matrix=new h.cmNodeListView(this.matrixGroup,i,o,n,u,d,p,f),this.matrix.setGridPosition([1,1]),this.topDiv.classed("node-list-top-row",!0),this.matrices=[this.topHeader,this.leftHeader,this.controlsHeader,this.matrix],this.updateElementPositions(),i.getIntermediateNodeIndexes().length||this.setWarningMessageVisible(!0),this.sortByNumPaths()}return o(e,t),n(e,[{key:"setModel",value:function(t){t.getIntermediateNodeIndexes().length?(this.sortByNumPaths(),this.setWarningMessageVisible(!1),a(Object.getPrototypeOf(e.prototype),"setModel",this).call(this,t)):this.setWarningMessageVisible(!0)}},{key:"setWarningMessageVisible",value:function(t){t?(this.element.select("#intermediate-nodes-warning").html("Found no intermediate nodes. All paths must be one hop.").style("display","block"),this.element.select(".matrix-view-bottom-row").style("display","none"),this.element.select(".node-list-top-row").style("display","none")):(this.element.select("#intermediate-nodes-warning").style("display","none"),this.element.selectAll(".matrix-view-bottom-row").style("display","block"),this.element.selectAll(".node-list-top-row").style("display","block"))}},{key:"sortByNumPaths",value:function(){this.matrices.forEach(function(t){t.isActive&&t.onSortRowsByAttribute("num paths",!1)})}}]),e}(u.cmWrapperBase);e.cmNodeListWrapper=d},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(47),l=i(41),u=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){var e=t.getMajorColLabels(),i=t.getMinorColLabels(),r=new l.cmControlsMatrixColHeaderRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.labelRowHeight,e,i,this,this.attributes,this.rowNodeIndexes,this.rowAttributeNodeGroup,this.rowAttributes);this.addRow(r,this.labelRowHeight)}}]),e}(s.cmNodeListBase);e.cmNodeListControls=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(10),l=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.isNodeListView=!0}return o(e,t),n(e,[{key:"initAttributeData",value:function(){this.rowAttributes=this.model.getIntermediateNodeAttributeValues(),this.rowNodeAttributes=this.model.getIntermediateRowNodeAttributeValues()}},{key:"initNodeIndexes",value:function(t){this.rowAttributeNodeGroup=t.AttributeNodeGroups.INTERMEDIATE,this.colAttributeNodeGroup=Object.keys(t.AttributeNodeGroups).length,this.attributeNodeGroupsBeingDisplayed=[this.rowAttributeNodeGroup,this.colAttributeNodeGroup],this.rowNodeIndexes=t.getCurrentIntermediateNodeIndexes();var e=t.getIntermediateNodePositions();this.colNodeIndexes=[];for(var i=0;i<e.length;++i)this.colNodeIndexes.push([String(e[i])])}},{key:"initAttributeState",value:function(t){var e=t.getAvailableAttributes();if(this.attributes=e,!this.isInitialized){this.isAttributeColVisible={},this.isAttributeRowVisible={};for(var i=0;i<e.length;++i)this.isAttributeColVisible[e[i]]=!1,this.isAttributeRowVisible[e[i]]=!1}this.isAttributeColVisible["num paths"]=!0}},{key:"setModel",value:function(t){this.model=t,t.getIntermediateNodeIndexes().length?(a(Object.getPrototypeOf(e.prototype),"setModel",this).call(this,t),this.isActive=!0):(this.model=t,this.isActive=!1)}},{key:"updateDataCols",value:function(){}}]),e}(s.cmMatrixBase);e.cmNodeListBase=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(47),l=i(49),u=i(32),c=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){for(var e=0;e<this.numHeaderCols;++e)this.addRow(new u.cmMatrixRow(this.svg,e,[],this.numHeaderCols),0);var i=t.getCurrentIntermediateNodeRows(),r=t.getMajorLabels(t.getCurrentIntermediateNodeIndexes(),t.intermediateNodeCollapseAttr),o=t.getMinorLabels(t.getCurrentIntermediateNodeIndexes()),n=t.getIntermediateRowNodeAttributeValues();for(e=0;e<this.rowNodeIndexes.length;++e){var a=new l.cmNodeListRow(this.svg,e+this.numHeaderRows,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeight,!1,i[e],r[e],o[e],n[e],this,this.rowAttributeNodeGroup,!1,t.areIntermediateNodesCollapsed);if(t.areIntermediateNodesCollapsed){var s=this.onRowControlsClicked.bind(this);a.createControlsCell(this.colWidth,this.rowHeight,s)}a.setLabelColWidth(this.colWidthLabel),this.addRow(a,this.rowHeight)}}}]),e}(s.cmNodeListBase);e.cmNodeListLeftHeader=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(32),l=i(31),u=function(t){function e(t,i,o,n,s,u,c,h,d,p,f,g,v,m,b){if(r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,[],n,s,u,c,g),this.unrollControls=[],this.rollupControls=[],!c){var y=h.getNumChildren();if(b){var w=0,C=!0,x=null,k=new e(this.minorRowContainer,w,[],n,s,u,C,h,p[w],x,l.cmDataRow.getAttributes(f,w),g,v,!1,b);k.setVisible(!1),this.addMinorRow(k);for(var O=0;y>O;++O)w=O+1,k=new e(this.minorRowContainer,w,[],n,s,u,C,h.getChildRowAt(O),p[w],x,l.cmDataRow.getAttributes(f,O+1),g,v,!1,b),k.setVisible(!1),this.addMinorRow(k)}}var N=this.getNumMajorCells();for(O=0;N>O;++O)this.matrix.isAttributeCell(O)?this.majorCells[O].isAttributeCell=!0:this.matrix.isLabelCell(O)?this.majorCells[O].isRowLabelCell=!0:this.matrix.isDataCell(O)&&(this.majorCells[O].isDataCell=!1);for(O=0;N>O;++O){var A=this.majorCells[O],S={};if(this.matrix.isAttributeCell(O)){var M=this.matrix.getAttributeColIndex(O);S={values:f[M],orientation:0,attributeIndex:M,nodeIndexes:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),attributeNodeGroup:v},A.isInNodeListView=!0,A.setData(S),A.data.ids={sources:[],intermediates:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),targets:[]}}else if(this.matrix.isLabelCell(O))A.setData({values:[d],isVertical:0,attributeIndex:-1,nodeIndexes:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),attributeNodeGroup:v}),A.isInNodeListView=!0,A.isLabelCell=!0,A.isAttributeCell=!0,A.data.ids={sources:[-1],intermediates:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),targets:[-1]};else if(this.matrix.isDataCell(O)){var P=this.matrix.getDataColIndex(O);if(S={colNodeIndexes:o[P],modelRow:h},A.isInNodeListView=!0,A.setData(S),A.data.ids={sources:[-1],intermediates:this.isMinorRow?[h.getNodeIndex()]:h.getAllNodeIndexes(),targets:[-1]},A.minorCells.length!=o[P].length)throw"something fucked up in col node indexes and minor cells";for(var I=0;I<this.majorCells[O].minorCells.length;++I)S={colNodeIndexes:o[P][I],modelRow:h},A.minorCells[I].isInNodeListView=!0,A.minorCells[I].setData(S)}}}return o(e,t),n(e,[{key:"setLabelColWidth",value:function(t){for(var e=0;e<this.majorCells.length;++e){var i=this.majorCells[e];i.isRowLabelCell&&i.getGroup().select("text").attr("x",t-1)}for(e=0;e<this.minorRows.length;++e)this.minorRows[e].setLabelColWidth(t)}}],[{key:"createLabelInCell",value:function(t,e,i,r){var o=t.getGroup();o.append("g").append("text").attr("x",i).attr("y",r/2).style("text-anchor","end").attr("alignment-baseline","middle").attr("font-size",8).text(e);
}},{key:"getAttributes",value:function(t,e){for(var i=[],r=0;r<t.length;++r)i.push([t[r][e]]);return i}}]),e}(s.cmMatrixRow);e.cmNodeListRow=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(47),l=i(51),u=i(32),c=i(52),h=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.colWidthAttr=0,this.colWidthLabel=0,this.colWidthControl=0,this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){this.addRow(new u.cmMatrixRow(this.svg,0,[],this.numHeaderCols),0);for(var e=0;e<this.attributes.length;++e)this.addRow(new u.cmMatrixRow(this.svg,e,[],this.numHeaderCols),0);var i=t.getIntermediateNodePositions(),r=new l.cmNodeListLabelRow(this.svg,this.allRows.length,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.labelRowHeight,i,null,this,3,!1);this.addRow(r,this.labelRowHeight)}},{key:"createAttributeEncodings",value:function(){var t=new c.cmNodeListPositionVisitor(-1,this.colAttributeNodeGroup,this.colWidth,this.labelRowHeight,this.colWidthLabel,this.rowHeight);t.setCallbacks(this.onCellClicked.bind(this),this.onCellMouseOver.bind(this),this.onCellMouseOut.bind(this)),t.areRowsCollapsed=!this.isNodeListView&&this.model.areRowsCollapsed,t.areColsCollapsed=this.model.areColsCollapsed,this.applyVisitor(t)}}]),e}(s.cmNodeListBase);e.cmNodeListTopHeader=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},a=i(32),s=function(t){function e(t,i,o,a,s,l,u,c,h,d,p){r(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,a,s,l,!1,h,p);var f=this.getNumMajorCells();this.createMinorCells(a,o);for(var g=0;f>g;++g){var v=this.getMajorCell(g),m=this.matrix.getDataColIndex(g);if(this.matrix.isDataCell(g)&&(v.isColLabelCell=!0,v.setData({values:[u[m]],isVertical:1,attributeIndex:-1,nodeIndexes:o[m],attributeNodeGroup:d}),v.isAttributeCell=!0,this.areColsCollapsed))throw"Something went wrong -- node list view with collapsed columns?!"}this.colNodeIndexes=o}return o(e,t),e}(a.cmMatrixRow);e.cmNodeListLabelRow=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(16),l=function(t){function e(t,i,o,n,s,l){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i),this.labelRowHeight=n,this.labelRowWidth=o,this.labelColWidth=s,this.labelColHeight=l,this.isVisitingColsCollapsedAttr=!1,this.isVisitingRowsCollapsedAttr=!1,this.areColsCollapsed=!1,this.areRowsCollapsed=!1}return o(e,t),n(e,[{key:"apply",value:function(t){var e=this;this.shouldVisitCell(t)&&!function(){var i=t.getGroup();i=i.append("g");var r=t.data.values[0];e.width=e.labelRowWidth,e.height=e.labelRowHeight;var o=r[0];r=r[1];for(var n=[],a=0;o>a;a+=2)a==r?n.push(1):n.push(0);for(var s=[],a=1;o>a;a+=2)s.push(0);var l=e,u=7,c=2,h=e.width/3,d=l.height/u;i.selectAll("circle").data(n).enter().append("circle").attr("r",h).attr("transform",function(t,e){var i=l.width/2,r=l.height-(d*e+h);return"translate("+i+", "+r+")"}).style("stroke","#337ab7").style("fill",function(t){return t?"#337ab7":"none"}),i.selectAll("rect").data(s).enter().append("rect").attr("transform",function(t,e){var i=l.width/2-c/2,r=l.height-d*(e+1);return"translate("+i+", "+r+")"}).attr("width",c).attr("height",d-2*h).style("fill","#337ab7")}()}}]),e}(s.cmAttributeCellVisitor);e.cmNodeListPositionVisitor=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(47),l=i(31),u=i(32),c=function(t){function e(t,i,o,n,s,l,u,c){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s,l,u,c),this.colWidthAttr=0,this.colWidthLabel=0,this.colWidthControl=0,this.rowHeightAttr=0,this.hasEncodings=!0,this.colorScaleIndexSets=2,this.colorScaleIndexNodes=3,this.setModel(i)}return o(e,t),n(e,[{key:"createRows",value:function(t){for(var e=0;e<this.numHeaderCols;++e)this.addRow(new u.cmMatrixRow(this.svg,e,this.colNodeIndexes,this.numHeaderCols),0);var i=t.getCurrentIntermediateNodeRows(),r=t.getMajorLabels(t.getCurrentIntermediateNodeIndexes(),t.intermediateNodeCollapseAttr),o=t.getMinorLabels(t.getCurrentIntermediateNodeIndexes()),n=this.rowNodeAttributes;for(e=0;e<this.rowNodeIndexes.length;++e){var a=new l.cmDataRow(this.svg,e+this.numHeaderRows,this.colNodeIndexes,this.numHeaderCols,this.colWidth,this.rowHeight,!1,i[e],r[e],o[e],n[e],this,!1,t.areIntermediateNodesCollapsed,!0);if(t.areIntermediateNodesCollapsed){var s=this.onRowControlsClicked.bind(this);a.createControlsCell(this.colWidth,this.rowHeight,s)}this.colWidthLabel=0,a.setLabelColWidth(this.colWidthLabel),this.addRow(a,this.rowHeight)}}}]),e}(s.cmNodeListBase);e.cmNodeListView=c},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n){"ngInject";i(this,t),this.url=n,this.$q=o,this.$http=r,this.$log=e}return t.$inject=["$log","$http","$q","resource"],r(t,[{key:"getResourceUrl",value:function(){return this.url}},{key:"postRequest",value:function(t,e,i){i||(i="");var r={};r.query=t,r.graph_name=e;var o=this.$q.defer(),n=function(t){o.resolve(t.data)},a=function(t){o.reject(t)};return this.$http.post(this.url+i,r).then(n,a),o.promise}},{key:"request",value:function(t,e){e||(e="");var i=this.$q.defer(),r=function(t){i.resolve(t.data)},o=function(t){i.reject(t)},n={};return n.params=t,this.$http.get(this.url+e,n).then(r,o),i.promise}},{key:"setResourceUrl",value:function(t){this.url=t}},{key:"requestMatrix",value:function(t){return this.request(t,"/matrix")}}]),t}();e.cmResource=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(56),a=function(){function t(e,i,o){"ngInject";r(this,t),this.$log=e,this.$q=i,this.cmResource=o}return t.$inject=["$log","$q","cmResource"],o(t,[{key:"requestGraph",value:function(t){var e=this.$q.defer(),i=function(t){var i=new n.cmGraph(t);e.resolve(i)},r=function(t){throw t};return this.cmResource.request({graph:t}).then(i,r),e.promise}},{key:"createFromJsonObject",value:function(t,e){return new n.cmGraph(t,e)}}]),t}();e.cmGraphFactory=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(6),a=function(){function t(e,i){r(this,t),this.jsonGraph=e,this.database=i,this.activate()}return o(t,[{key:"activate",value:function(){var t=this;this.graph=new graphlib.Graph({multigraph:!0}),t.nodeAttributes=t.activateNodeAttributes(t.jsonGraph.node_attributes);for(var e=0;e<t.nodeAttributes.length;++e)t.nodeAttributes[e].isIndex?this.indexAttributeIndex=e:this.nodeAttributes[e].isId&&(this.idAttributeIndex=e);for(e=0;e<this.jsonGraph.nodes.length;++e){var i=this.jsonGraph.nodes[e],r=this.parseNodeId(i,this.nodeAttributes,this.idAttributeIndex),o=this.parseAttributes(i,this.nodeAttributes,this.indexAttributeIndex);this.graph.setNode(r,o)}if(this.edgeDict={},"marclab"==this.database)for(e=0;e<this.jsonGraph.edges.length;++e){var n=this.jsonGraph.edges[e],a=n.SourceStructureID,s=n.TargetStructureID,l=this.getNode(a),u=this.getNode(s);if(void 0==l||void 0==u)throw"Error creating edge in graph! "+a+", "+s;o={links:n.Links,sourceSizes:n.SourceSizes,targetSizes:n.TargetSizes,sourceStructureId:n.SourceStructureID,targetStructureId:n.TargetStructureID,type:n.Type,carrier:n.Carrier};var c="";if(n.Links)for(var h=0;h<n.Links.length;++h){var d=n.Links[h],p=d.SourceID;p+=d.Directional?" -> ":" <-> ",p+=d.TargetID,c.length&&(c+=";"),c+=p}if(o.linkedStructures=c,this.edgeDict[n.ID]=o,this.graph.setEdge(a,s,o,n.ID),!n.Directional&&n.SourceStructureID!=n.TargetStructureID){var f=(-Number(n.ID)).toString();t.edgeDict[f]=o,this.graph.setEdge(s,a,o,f)}}else for(e=0;e<this.jsonGraph.edges.length;++e){var n=this.jsonGraph.edges[e],a=n.SourceID,s=n.TargetID,l=this.getNode(a),u=this.getNode(s);if(void 0==l||void 0==u)throw"Error creating edge in graph! "+a+", "+s;o={date:n.DepDate,flightNum:n.FlightNum,depTime:n.DepTime,arrTime:n.ArrTime,carrier:n.Carrier},this.edgeDict[n.ID]=o,this.graph.setEdge(a,s,o,n.ID)}}},{key:"activateNodeAttributes",value:function(t){var e=[];e.attributes=[];for(var i=0;i<t.length;++i){var r=t[i],o={};if(o.name=r.DisplayName,o.parseName=r.Name,o.isId=!1,o.isIndex=!1,o.isCategorical=!1,o.isQuantitative=!1,o.isString=!1,o.parseFn=null,"index"==r.DataType)o.isIndex=!0,o.parseFn=parseInt;else if("id"==r.DataType){if(o.isId=!0,"string"!=r.Type&&"int"!=r.Type)throw"Invalid data type for id!"}else"categorical"==r.DataType?o.isCategorical=!0:"quantitative"==r.DataType&&(o.isQuantitative=!0);if("int"==r.Type)o.parseFn=parseInt;else if("float"==r.Type)o.parseFn=parseFloat;else if("string"==r.Type){if(o.isQuantitative)throw"Bad datatype!";o.parseFn=function(t){return t?t.trim():"Null"}}e.push(o)}for(i=0;i<e.length;++i)if(null==e[i].parseFn)throw"Bad attribute definitions!";return e}},{key:"convertEdgeToLink",value:function(t,e){for(var i=void 0,r=void 0,o=0;o<e.length;++o){var n=e[o];t.v==n.id&&(r=o),t.w==n.id&&(i=o)}if(void 0==i||void 0==r)throw"Error converting edge to link!";return{source:r,target:i,value:this.graph.edge(t)}}},{key:"getAsD3Input",value:function(t){for(var e={nodes:[],links:[]},i=this.getNodes(),r=0;r<i.length;++r){var o=i[r],n=this.graph.node(o);(void 0==t||void 0!=t&&-1!=t.indexOf(Number(o)))&&e.nodes.push({id:o,attributes:n})}var a=this.graph.edges(),s=[];for(r=0;r<a.length;++r){var l=a[r],u=!0,c=!0;void 0!=t&&(u=u&&-1!=t.indexOf(Number(l.v)),c=c&&-1!=t.indexOf(Number(l.w))),u&&c&&s.push(l)}for(r=0;r<s.length;++r)e.links.push(this.convertEdgeToLink(s[r],e.nodes));return e}},{key:"getCategoricalNodeAttrNames",value:function(){for(var t=[],e=0;e<this.nodeAttributes.length;++e)this.nodeAttributes[e].isCategorical&&t.push(this.nodeAttributes[e].name);return t}},{key:"getEdge",value:function(t){return this.edgeDict[t]}},{key:"getEdgeDescription",value:function(t){var e=this.getEdge(t);return"flights"==this.database?e.carrier+"-"+e.flightNum:e.type}},{key:"getEdgeDetails",value:function(t){var e=this.getEdge(t);return"flights"==this.database?"Dep: "+e.depTime+"<br>Arr: "+e.arrTime:e.linkedStructures}},{key:"getEdges",value:function(){for(var t=this.graph.edges(),e=[],i=0;i<t.length;++i)e.push(this.graph.edge(t[i]));return e}},{key:"getJsonGraph",value:function(){return this.jsonGraph}},{key:"getNode",value:function(t){return this.graph.node(t)}},{key:"getNodeIdName",value:function(){return this.nodeAttributes[this.idAttributeIndex].name}},{key:"getNodes",value:function(){return this.graph.nodes()}},{key:"getQuantNodeAttrNames",value:function(){for(var t=[],e=0;e<this.nodeAttributes.length;++e)this.nodeAttributes[e].isQuantitative&&t.push(this.nodeAttributes[e].name);return t}},{key:"getSubgraph",value:function(t){var e=n.Utils.getNodesFromPaths(t),i=n.Utils.getEdgesFromPaths(t),r=new graphlib.Graph({multigraph:!0});r.setGraph({});var o=this.graph;return o.nodes().forEach(function(t){var i=t;if(-1!=e.indexOf(i)){var n=o.node(t);r.setNode(i,n)}}),o.edges().forEach(function(t){var e=t.name;-1!=i.indexOf(e)&&r.setEdge(t.v,t.w,o.edge(t),t.name)}),r}},{key:"parseNodeId",value:function(t,e,i){var r=e[i];return r.parseFn(t[r.parseName])}},{key:"parseAttributes",value:function(t,e,i){for(var r={},o=0;o<e.length;++o)if(o!=i){var n=e[o];r[n.name]=n.parseFn(t[n.parseName])}return r}}]),t}();e.cmGraph=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(58),a=function(){function t(e,i,o){"ngInject";r(this,t),this.$log=e,this.$q=i,this.cmResource=o}return t.$inject=["$log","$q","cmResource"],o(t,[{key:"createFromJsonObject",value:function(t){return new n.cmMatrix(t)}},{key:"requestMatrix",value:function(t,e){var i=this.$q.defer(),r=function(t){var e=new n.cmMatrix(t);i.resolve(e)},o=function(t){throw t},a={graph:t,path:e};return this.cmResource.requestMatrix(a).then(r,o),i.promise}}]),t}();e.cmMatrixFactory=a},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){i(this,t),this.jsonMatrix=e,this.jsonMatrix=e,this.rows=e.source_ids,this.cols=e.target_ids,this.matrix=e.matrix}return r(t,[{key:"getCols",value:function(){return this.cols}},{key:"getJsonMatrix",value:function(){return this.jsonMatrix}},{key:"getRows",value:function(){return this.rows}}]),t}();e.cmMatrix=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(60),a=i(61),s=function(){function t(e,i,o,n,a){"ngInject";r(this,t),this.$log=e,this.$q=i,this.cmResource=a,this.cmGraphFactory=o,this.cmMatrixFactory=n,this.rawGraph=null,this.dataset=null,this.verbose=!0,this.maxNumPaths=1e6}return t.$inject=["$log","$q","cmGraphFactory","cmMatrixFactory","cmResource"],o(t,[{key:"createConnectivityMatrixModel",value:function(t){for(var e=this,i=[],r=[],o=[],a=0;a<t.length;++a){var s=t[a],l=s[0],u=s[s.length-1];-1==i.indexOf(l)&&i.push(l),-1==r.indexOf(u)&&r.push(u)}for(var c=0;c<i.length;c++){o[c]=[];for(var h=0;h<r.length;h++)o[c][h]=[]}for(var a=0;a<t.length;++a){var s=t[a],l=s[0],u=s[s.length-1],d=i.indexOf(l),p=r.indexOf(u);o[d][p].push(s)}var f={source_ids:i,target_ids:r,matrix:o},g=e.cmMatrixFactory.createFromJsonObject(f);return new n.cmModel(e.dataset,g)}},{key:"createModelFromGraphSearch",value:function(t){var e=this,i=e.$q.defer();if(this.dataset){var r=e.findPathsByRegex(t),o=e.createConnectivityMatrixModel(r);i.resolve(o)}else i.reject();return i.promise}},{key:"fillInPathsByRegex",value:function(t,e){for(var i=this,r=t.edges.length,o=[],n=i.maxNumPaths,a=i.dataset.graph;e.length&&n>0;){var s=e.shift(),l=s[s.length-1],u=Math.floor(s.length/2);if(u>=r)o.push(s);else{var c=t.nodes[u+1],h=t.edges[u],d=a.outEdges(l);if(d)for(var p=0;p<d.length;++p){var f=d[p],g=d[p].name,v=i.dataset.edgeDict[g],m=v.type;if(m.match(h)){var b=f.w,y=a.node(b);if(y.label.match(c)){var w=JSON.parse(JSON.stringify(s));w.push(g),w.push(b.toString()),e.push(w)}}}}}return o}},{key:"findPathsByRegex",value:function(t){for(var e=this,i=[],r=e.dataset.graph,o=r.nodes(),n=0;n<o.length;++n){var a=r.node(o[n]);if(a.label.match(t.nodes[0])){var s=[o[n]];i.push(s)}}return e.fillInPathsByRegex(t,i)}},{key:"requestAndCreateModel",value:function(t,e){var i=this,r=this.$q.defer(),o=function(t){var o=i.cmGraphFactory.createFromJsonObject(t.graph,e),a=i.cmMatrixFactory.createFromJsonObject(t.matrix);r.resolve(new n.cmModel(o,a,t.lengths))},a=function(t){r.reject(t)};return this.cmResource.postRequest(t,e).then(o,a),r.promise}},{key:"createModel",value:function(t,e){return new n.cmModel(t,e)}},{key:"createModelRow",value:function(){return new a.cmModelRow}},{key:"setGraphData",value:function(t){this.rawGraph=t,t.node_attributes=[{DisplayName:"id",Name:"ID",DataType:"index",DatabaseName:"ID",Unique:"true",Type:"int"},{DisplayName:"label",Name:"Label",DataType:"categorical",DatabaseName:"label",Unique:"false",Type:"string"},{DisplayName:"id",Name:"StructureID",DataType:"id",DatabaseName:"StructureID",Unique:"true",Type:"int"}],t.edge_attributes=[{DataType:"index",Type:"int",Unique:"true",DisplayName:"id",Name:"ID"},{DataType:"source-index",Type:"int",Unique:"false",DisplayName:"source id",Name:"SourceStructureID"},{DataType:"target-index",Type:"int",Unique:"true",DisplayName:"target id",Name:"TargetStructureID"},{DataType:"categorical",Type:"string",Unique:"false",DisplayName:"edge type",Name:"type"},{DataType:"string",Type:"string",Unique:"false",DisplayName:"structures",Name:"LinkedStructures"}],this.dataset=this.cmGraphFactory.createFromJsonObject(t,"marclab")}}]),t}();e.cmModelFactory=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(61),a=i(6),s=function(){function t(e,i,o){r(this,t);var n=this;n.graph=e,n.matrix=i,n.current={},n.reset(),n.pathLengths=o,n.colsCollapseAttr="",n.rowCollapseAttr="",n.areColsCollapsed=!1,n.areRowsCollapsed=!1,n.avilableAttributes=null}return o(t,[{key:"collapseCols",value:function(t){var e=this;e.areColsCollapsed=!0;for(var i=e.getColNodeIndexes(),r=[],o=i.length,n=t.pop();void 0!=n;){n.reverse();for(var a=n.pop(),s=n.pop();void 0!=s;)r.push(s),i[a]=i[a].concat(i[s]),s=n.pop();n=t.pop()}for(var l=0,u=0;o>u;++u)-1!=r.indexOf(u)&&(i.splice(u-l,1),l+=1);e.current.colNodeIndexes=i}},{key:"collapseColsByAttr",value:function(t){var e=this;e.colsCollapseAttr=t;for(var i=[],r=[],o=e.getColNodeIndexes(),n=0;n<o.length;++n){var s=e.getNodeAttr([o[n]],t);if(s.length>1)throw"Trying to collapse cols by label but one was already collapsed!";i.push(s[0]),r.push(n)}var l=a.Utils.createMap(r,i);i=Object.keys(l);var u=[];for(n=0;n<i.length;++n)u.push(l[i[n]]);e.collapseCols(u)}},{key:"collapseRows",value:function(t,e){var i=this;i.rowsAreDirty=!0;var r=e.length,o=[],n=[];t=t.reverse();for(var a=t.pop();void 0!=a;){a.reverse();for(var s=a.pop(),l=[];void 0!=s;)o.push(s),l=l.concat(e[s]),s=a.pop();n.push(l),a=t.pop()}for(var u=0;r>u;++u)-1==o.indexOf(u)&&n.push(e[u]);return n}},{key:"collapseRowIndexesByAttr",value:function(t,e){for(var i=this,r=[],o=[],n=0;n<e.length;++n){var s=i.getNodeAttr([e[n]],t);if(s.length>1)throw"Trying to collapse rows by column, but there was already a collapsed row!";r.push(s[0]),o.push(n)}var l=a.Utils.createMap(o,r);r=Object.keys(l);var u=[];for(n=0;n<r.length;++n)u.push(l[r[n]]);return i.collapseRows(u,e)}},{key:"collapseRowsByAttr",value:function(t){var e=this;e.rowCollapseAttr=t,e.areRowsCollapsed=!0,e.current.rowNodeIndexes=e.collapseRowIndexesByAttr(t,e.getRowNodeIndexes()),e.rowsAreDirty=!0}},{key:"collapseIntermediateNodesByAttr",value:function(t){var e=this;e.intermediateNodeCollapseAttr=t,e.areIntermediateNodesCollapsed=!0,e.current.intermediateNodeIndexes=e.collapseRowIndexesByAttr(t,e.getIntermediateNodeIndexes()),e.intermediateNodesAreDirty=!0}},{key:"expandAllCols",value:function(){var t=this;t.areColsCollapsed=!1;for(var e=t.current.colNodeIndexes,i=[],r=0;r<e.length;++r)e[r].length>1&&i.push(r);t.expandCols(i)}},{key:"expandAllRows",value:function(){var t=this;t.areRowsCollapsed=!1;for(var e=t.current.rowNodeIndexes,i=[],r=0;r<e.length;++r)e[r].length>1&&i.push(r);t.expandRows(i)}},{key:"expandIntermediateRows",value:function(){var t=this;t.intermediateNodeCollapseAttr="",t.areIntermediateNodesCollapsed=!1,t.current.intermediateNodeIndexes=t.intermediateNodeIndexes,t.intermediateNodesAreDirty=!0}},{key:"expandCols",value:function(t){var e=this;e.colsCollapseAttr="";for(var i=e.current.colNodeIndexes,r=[],o=0;o<t.length;++o){var n=t[o],a=i[n];if(1!=a.length){r.push(n);for(var s=0;s<a.length;++s)i.push([a[s]])}}var l=0;for(o=0;o<r.length;++o)i.splice(r[o-l],1),l++;e.current.colNodeIndexes=i}},{key:"expandRows",value:function(t){var e=this;e.rowsAreDirty=!0,e.rowCollapseAttr="",e.areRowsCollapsed=!1;for(var i=[],r=e.current.rowNodeIndexes,o=r.length,n=0;o>n;++n){var a=t.indexOf(n);if(-1==a)i.push(r[n]);else{var s=t[a],l=r[s];if(1==l.length)i.push(l);else for(var u=0;u<l.length;++u){var c=l[u];i.push([c])}}}e.current.rowNodeIndexes=i}},{key:"getAllPaths",value:function(){for(var t=this,e=t.getColNodeIndexes(),i=t.getCurrentRows(),r={},o=0;o<i.length;++o)for(var n=i[o].getAllValuesAsList(e),s=0;s<n.length;++s)for(var l=n[s],u=0;u<l.length;++u){var c=l[u],h=a.Utils.getNumHops(c);r[h]?r[h].push(c):r[h]=[c]}for(var d in t.pathLengths)r[d].length!=t.pathLengths[d]&&t.$log.error("Something went wrong. We lost some paths");return r}},{key:"getAttributeType",value:function(t){return-1==this.getCmGraph().getCategoricalNodeAttrNames().indexOf(t)?"quantitative":"categorical"}},{key:"getAttributeValues",value:function(t,e){for(var i=this,r=i.getAvailableAttributes(),o=[],n=0;n<r.length;++n){var a=i.getNodeAttrs(t,r[n],e);o.push(a)}return o}},{key:"getAvailableAttributes",value:function(){return null==this.availableAttributes&&(this.availableAttributes=["num paths"],this.availableAttributes=this.availableAttributes.concat(this.getCmGraph().getQuantNodeAttrNames()),this.availableAttributes=this.availableAttributes.concat(this.getCmGraph().getCategoricalNodeAttrNames())),this.availableAttributes}},{key:"getAvailableIntermediateNodeStats",value:function(){return[["count"]]}},{key:"getColNodeIndexes",value:function(){var t=this;return t.current.colNodeIndexes}},{key:"getCmGraph",value:function(){var t=this;return t.graph}},{key:"getCmMatrix",value:function(){var t=this;return t.matrix}},{key:"getColAttributeValues",value:function(){var t=this;return t.getAttributeValues(t.getColNodeIndexes(),t.AttributeNodeGroups.TARGET)}},{key:"getColsSortedByAttr",value:function(t,e){var i=this;return i.getSortedIndexesOfNodeIndexAttr(i.current.colNodeIndexes,t,e)}},{key:"getCurrentIntermediateNodeRows",value:function(){var t=this;if(t.intermediateNodesAreDirty){t.current.intermediateRows=[];for(var e=t.current.intermediateNodeIndexes,i=0;i<e.length;++i){for(var r=void 0,o=e[i],n=0;n<o.length;++n){var a=o[n];void 0==r?r=t.intermediateRows[a].getCopy():r.addChildRow(t.intermediateRows[a].getCopy())}t.current.intermediateRows.push(r)}}return t.intermediateNodesAreDirty=!1,t.current.intermediateRows}},{key:"getCurrentMatrix",value:function(){for(var t=this,e=t.getColNodeIndexes(),i=t.getCurrentRows(),r=[],o=0;o<i.length;++o)r.push(i[o].getAllValuesAsList(e));return r}},{key:"getCurrentRows",value:function(){var t=this;if(t.rowsAreDirty){t.rowsAreDirty=!1,t.current.rows=[];for(var e=t.current.rowNodeIndexes,i=0;i<e.length;++i){for(var r=void 0,o=e[i],n=0;n<o.length;++n){var a=o[n];void 0==r?r=t.rows[a].getCopy():r.addChildRow(t.rows[a].getCopy())}t.current.rows.push(r)}}return t.current.rows}},{key:"getCurrentIntermediateNodeIndexes",value:function(){var t=this;return t.current.intermediateNodeIndexes}},{key:"getCurrentScalarMatrix",value:function(){for(var t=this,e=[],i=t.getCurrentMatrix(),r=0;r<i.length;++r){for(var o=[],n=0;n<i[r].length;++n)o.push(i[r][n].length);e.push(o)}return e}},{key:"getFlattenedColNodeIndexes",value:function(){return a.Utils.getUniqueValues(a.Utils.getFlattenedLists(this.getColNodeIndexes()))}},{key:"getFlattenedNodeIndexes",value:function(){var t=this.getRowNodeIndexes().concat(this.getColNodeIndexes());return a.Utils.getUniqueValues(a.Utils.getFlattenedLists(t))}},{key:"getFlattenedRowNodeIndexes",value:function(){return a.Utils.getUniqueValues(a.Utils.getFlattenedLists(this.getRowNodeIndexes()))}},{key:"getIntermediateNodeIndexes",value:function(){var t=this;return t.intermediateNodeIndexes}},{key:"getIntermediateIndexesSortedByAttr",value:function(t,e){var i=this;return i.getSortedIndexesOfNodeIndexAttr(i.current.intermediateNodeIndexes,t,e)}},{key:"getIntermediateNodeAttributeValues",value:function(){var t=this;return t.getAttributeValues(t.getCurrentIntermediateNodeIndexes(),t.AttributeNodeGroups.INTERMEDIATE)}},{key:"getIntermediateRowNodeAttributeValues",value:function(){var t=this,e=t.getIntermediateNodeAttributeValues();if(e.length>0){for(var i=angular.copy(e[0]),r=0;r<i.length;++r)i[r]=[i[r]];for(var r=1;r<t.getAvailableAttributes().length;++r)for(var o=0;o<e[r].length;++o)i[o]=i[o].concat([e[r][o]]);return i}}},{key:"getIntermediateNodePositions",value:function(){var t=this,e=t.getAllPaths(),i=[];for(var r in e){r=2*parseInt(r)+1;for(var o=2;r-1>o;o+=2)i.push([r,o])}return i}},{key:"getIntermediatePositionsOfNode",value:function(t,e){for(var i=[],r=0;r<e.length;r+=2)e[r]==t&&i.push([e.length,r]);return i}},{key:"getMinorLabels",value:function(t){for(var e=this,i=[],r=0;r<t.length;++r){var o=t[r];i.push(e.getNodeAttr(o,e.getCmGraph().getNodeIdName()))}return i}},{key:"getMajorLabels",value:function(t,e){var i=this;return e&&e.length>0?i.getViewLabels(t,e):i.getNodeAttr(t,i.getCmGraph().getNodeIdName())}},{key:"getMajorColLabels",value:function(){var t=this;return t.getMajorLabels(t.getColNodeIndexes(),t.colsCollapseAttr)}},{key:"getMinorColLabels",value:function(){var t=this;return t.getMinorLabels(t.getColNodeIndexes())}},{key:"getMajorRowLabels",value:function(){var t=this;return t.getMajorLabels(t.getRowNodeIndexes(),t.rowCollapseAttr)}},{key:"getMinorRowLabels",value:function(){var t=this;return t.getMinorLabels(t.getRowNodeIndexes())}},{key:"getNodeAttrs",value:function(t,e,i){for(var r=this,o=[t.length],n=0;n<t.length;++n){o[n]=[];for(var a=0;a<t[n].length;++a)"num paths"!=e?o[n].push(r.graph.getNode(t[n][a])[e]):o[n].push(r.numPathsPerNode[t[n][a]][i])}return o}},{key:"getNodeAttr",value:function(t,e,i){for(var r=this,o=[t.length],n=0;n<t.length;++n)"num paths"==e?o[n]=this.numPathsPerNode[t[n]][i]:o[n]=r.graph.getNode(t[n])[e];return o}},{key:"getNodesFromAllPaths",value:function(){for(var t=this,e=t.getCurrentMatrix(),i=[],r=0;r<e.length;++r)for(var o=0;o<e[0].length;++o)i=i.concat(t.getNodesFromGridCellPaths(r,o));return a.Utils.getUniqueValues(i)}},{key:"getNodesFromGridCellPaths",value:function(t,e){var i=this,r=i.getCurrentMatrix(),o=r[t][e];if(void 0==o)throw"Getting nodes from grid cell paths failed!";return a.Utils.getNodesFromPaths(o)}},{key:"getRowNodeAttributeValues",value:function(){var t=this,e=t.getRowAttributeValues();if(e.length>0){for(var i=angular.copy(e[0]),r=0;r<i.length;++r)i[r]=[i[r]];for(var r=1;r<t.getAvailableAttributes().length;++r)for(var o=0;o<e[r].length;++o)i[o]=i[o].concat([e[r][o]]);return i}}},{key:"getRowAttributeValues",value:function(){var t=this;return t.getAttributeValues(t.getRowNodeIndexes(),t.AttributeNodeGroups.SOURCE)}},{key:"getSortedIndexesOfNodeIndexAttr",value:function(t,e,i,r){for(var o=this,n=[],a=[],s=0;s<t.length;++s){if(e){for(var l=t[s],u=null,c=0;c<l.length;++c){var h=l[c];if(null==u)u=o.getNodeAttr([h],e,r);else{var d=o.getNodeAttr([h],e,r);u=d>u?d:u}}n.push(u)}else n.push(t[s]);a[s]=s}return a.sort(function(t,e){return n[t][0]<n[e][0]?-1:n[t][0]>n[e][0]?1:0}),i?a:a.reverse()}},{key:"getPathsFromCol",value:function(t,e){for(var i=[],r=0;r<e.length;++r){var o=e[r];o[o.length-1]==t&&i.push(e[r])}return i}},{key:"getPathsFromRow",value:function(t,e){for(var i=[],r=0;r<e.length;++r)i.push([]);for(r=0;r<e.length;++r)for(var o=0;o<e[r].length;++o){var n=e[r][o];n[0]==t&&i[r].push(n)}return i}},{key:"getPathsWithIntermediates",value:function(t){
for(var e=this,i=[],r=e.getCurrentMatrix(),o=0;o<r.length;++o)for(var n=0;n<r[o].length;++n)for(var s=r[o][n],l=0;l<s.length;++l)a.Utils.getIntersection(a.Utils.getIntermediateNodesFromPaths([s[l]]),t).length&&i.push(s[l]);return i}},{key:"getPathsWithSources",value:function(t){for(var e=this,i=[],r=e.getCurrentMatrix(),o=e.getRowNodeIndexes(),n=0;n<r.length;++n)if(0!=a.Utils.getIntersection(t,o[n]).length)for(var s=0;s<r[n].length;++s)for(var l=r[n][s],u=0;u<l.length;++u){var c=l[u][0];-1!=t.indexOf(c)&&i.push(l[u])}return i}},{key:"getPathsWithTargets",value:function(t){for(var e=this,i=[],r=e.getCurrentMatrix(),o=e.getColNodeIndexes(),n=0;n<r.length;++n)for(var s=0;s<r[n].length;++s)if(0!=a.Utils.getIntersection(t,o[s]).length)for(var l=r[n][s],u=0;u<l.length;++u){var c=l[u][l[u].length-1];-1!=t.indexOf(c)&&i.push(l[u])}return i}},{key:"getRowNodeIndexes",value:function(){var t=this;return t.current.rowNodeIndexes}},{key:"getRowsSortedByAttr",value:function(t,e){var i=this;return i.getSortedIndexesOfNodeIndexAttr(i.current.rowNodeIndexes,t,e,i.AttributeNodeGroups.SOURCE)}},{key:"getTotalNumPaths",value:function(){var t=this,e=0;for(var i in t.pathLengths)e+=t.pathLengths[i];return e}},{key:"getViewLabels",value:function(t,e){for(var i=this,r=[],o=0;o<t.length;++o)r.push([i.getNodeAttrs([t[o]],e)[0][0]]);return r}},{key:"isCategoricalAttribute",value:function(t){return-1!=this.getCmGraph().getCategoricalNodeAttrNames().indexOf(t)}},{key:"reset",value:function(){var t=this;t.AttributeNodeGroups={SOURCE:0,TARGET:1,INTERMEDIATE:2},t.numAttributeNodeGroups=3,t.resetMatrix(),t.resetRows(),t.resetCols(),t.resetIntermediateNodes(),t.resetNumPathsPerNode(),t.availableAttributes=null}},{key:"resetCols",value:function(){var t=this;t.current.colNodeIndexes=[];for(var e=t.matrix.getJsonMatrix().target_ids,i=0;i<e.length;++i)t.current.colNodeIndexes.push([e[i]])}},{key:"resetRows",value:function(){var t=this;t.rowsAreDirty=!0,t.current.rowNodeIndexes=[],t.rows={};for(var e=t.matrix.getJsonMatrix().matrix,i=t.matrix.getJsonMatrix().source_ids,r=t.matrix.getJsonMatrix().target_ids,o=0;o<i.length;++o){var a=i[o];t.current.rowNodeIndexes.push([a]);var s=new n.cmModelRow;s.activate(a,e[o],r),t.rows[a]=s}}},{key:"resetIntermediateNodes",value:function(){for(var t=this,e=t.current.matrix,i=[],r=0;r<e.length;++r)for(var o=0;o<e[r].length;++o)i=i.concat(a.Utils.getIntermediateNodesFromPaths(e[r][o]));i=a.Utils.getUniqueValues(i);for(var r=0;r<i.length;++r)i[r]=[i[r]];t.intermediateNodeIndexes=i;for(var s=t.getIntermediateNodePositions(),l=[],r=0;r<s.length;++r)l.push(String(s[r]));for(var u={},r=0;r<i.length;++r){u[i[r][0]]=[];for(var o=0;o<s.length;++o)u[i[r][0]][o]=[]}var c=t.getAllPaths();for(var h in c)for(var d=c[h],r=0;r<d.length;++r)for(var p=d[r],o=0;o<i.length;++o)for(var f=t.getIntermediatePositionsOfNode(i[o][0],p),g=0;g<f.length;++g){var v=f[g];-1!=l.indexOf(String(v))&&u[i[o][0]][l.indexOf(String(v))].push(p)}t.intermediateNodeCounts=u,t.intermediateRows={},t.current.intermediateRows=[];for(var r=0;r<t.intermediateNodeIndexes.length;++r){var m=t.intermediateNodeIndexes[r][0],b=new n.cmModelRow;b.activate(m,t.intermediateNodeCounts[m],l),t.intermediateRows[m]=b,t.current.intermediateRows.push(b)}t.current.intermediateNodeIndexes=angular.copy(t.intermediateNodeIndexes)}},{key:"resetNumPathsPerNode",value:function(){var t=this,e=a.Utils.getFlattenedLists(t.getRowNodeIndexes());e=e.concat(a.Utils.getFlattenedLists(t.getColNodeIndexes())),e=e.concat(a.Utils.getFlattenedLists(t.getIntermediateNodeIndexes()));for(var i={},r=0;r<e.length;++r){var o=e[r];i[o]={};for(var n=0;n<t.numAttributeNodeGroups;++n)i[o][n]=0}var s=t.getAllPaths();for(var l in s)for(var u=s[l],r=0;r<u.length;++r)for(var c=u[r],n=0;n<c.length;n+=2){var h=c[n];0==n?i[h][t.AttributeNodeGroups.SOURCE]+=1:n==c.length-1?i[h][t.AttributeNodeGroups.TARGET]+=1:i[h][t.AttributeNodeGroups.INTERMEDIATE]+=1}t.numPathsPerNode=i}},{key:"resetMatrix",value:function(){var t=this;t.current.matrix=angular.copy(t.matrix.getJsonMatrix().matrix)}}]),t}();e.cmModel=s},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){i(this,t);var e=this;e.nodeIndex=void 0,e.children=[],e.values=void 0}return r(t,[{key:"addChildRow",value:function(t){for(var e=this,i=0;i<e.children.length;++i)if(e.children[i].getNodeIndex()==t.getNodeIndex())throw"Trying to add duplicate child!";e.children.push(t)}},{key:"activate",value:function(t,e,i){var r=this;if(void 0!=r.values)throw"Cannot add values to already initialized row. Add them as children";var o={};if(r.nodeIndex=t,e.length!=i.length)throw"Length of the row does not equal number of columns. WTF?";for(var n=0;n<e.length;++n)o[i[n]]=e[n];r.values=o}},{key:"getCopy",value:function(){var e=this,i=new t;return i.nodeIndex=angular.copy(e.nodeIndex),i.children=angular.copy(e.children),i.values=angular.copy(e.values),i}},{key:"getAllNodeIndexes",value:function(){var t=this,e=[];void 0!=t.nodeIndex&&e.push(t.nodeIndex);for(var i=0;i<t.children.length;++i)e.push(t.children[i].getNodeIndex());return e}},{key:"getAllValuesAsList",value:function(t){for(var e=this,i=e.children.length,r=[],o=0;o<t.length;++o){for(var n=[],a=t[o],s=0;s<a.length;++s){for(var l=a[s],u=0;i>u;++u){var c=e.getChildRowAt(u).getValues(t);n=n.concat(c[l])}e.values&&(n=n.concat(e.values[l]))}r.push(n)}return r}},{key:"getChildRowAt",value:function(t){var e=this;return e.children[t]}},{key:"getNumChildren",value:function(){var t=this;return t.children.length}},{key:"getNodeIndex",value:function(){var t=this;return t.nodeIndex}},{key:"getValues",value:function(){var t=this;return t.values}},{key:"getValuesAsList",value:function(t){for(var e=this,i=[],r=0;r<t.length;++r){for(var o=[],n=t[r],a=0;a<n.length;++a){var s=n[a];o=o.concat(e.values[s])}i.push(o)}return i}}]),t}();e.cmModelRow=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n){"ngInject";i(this,t),this.$uibModalInstance=e,this.title=r,this.isItemSelected=angular.copy(n),this.items=o}return t.$inject=["$uibModalInstance","title","items","isItemSelected"],r(t,[{key:"ok",value:function(){this.$uibModalInstance.close(this.isItemSelected)}},{key:"cancel",value:function(){this.$uibModalInstance.dismiss()}}]),t}();e.ModalListFilterController=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(64),a=function(){function t(e,i,o,n,a,s,l,u,c){"ngInject";r(this,t),this.$uibModalInstance=e,this.$log=i,this.$scope=n,this.title=a,this.values=s,this.range=angular.copy(l),this.errorMessage="",this.attribute=u,this.nodeIndexes=c,this.numBins=10;var h=this;o(function(){h.activateUi()},0)}return t.$inject=["$uibModalInstance","$log","$timeout","$scope","title","values","range","attribute","nodeIndexes"],o(t,[{key:"activateUi",value:function(){var t=d3.select(".modal-body"),e=2*parseInt(t.style("padding")),i=parseInt(t.style("width"))-e,r=parseInt(t.style("height"))-e;this.$log.debug("The modal ui is being activated! It's dimensions are: ",i,r);var o=t.select("svg").attr("width",i).attr("height",r),a=5;i-=2*a,r-=2*a;var s=o.append("g").attr("transform","translate("+a+", "+a+")");this.histogram=new n.visHistogram(this.$scope,this.$log,s,i,r,this.numBins,this.values,this.range)}},{key:"ok",value:function(){return this.range[0]>this.range[1]?void(this.errorMessage="Enter a valid range!"):void this.$uibModalInstance.close({attribute:this.attribute,range:this.range,nodeIndexes:this.nodeIndexes,values:this.values})}},{key:"cancel",value:function(){this.$uibModalInstance.dismiss()}}]),t}();e.ModalHistogramFilterController=a},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n,a,s,l,u){i(this,t),this.$scope=e,this.$log=r,this.parent=o,this.width=n,this.height=a,this.numBins=s,this.values=l,this.range=u,this.margin={top:5,right:30,bottom:15,left:30};var c=this;this.chartWidth=this.width-this.margin.left-this.margin.right,this.chartHeight=this.height-this.margin.top-this.margin.bottom,this.maxValue=d3.max(this.values),this.minValue=d3.min(this.values),this.minValue==this.maxValue&&(this.$log.warn(this,"Min and max values are the same. Setting minValue to 0"),this.minValue=0),this.numBins=s,this.createHistogramData(),this.xScale=d3.scale.linear().domain([this.minValue,this.maxValue]).range([0,c.chartWidth]),this.createYAxis(),this.createHistogramBars(),this.createAxes(),this.createBrush()}return r(t,[{key:"brushMove",value:function(){var t=this.brush.extent(),e=this.getClosestTickValue.bind(this),i=this.brush.empty()?this.minValue:e(t[0]),r=this.brush.empty()?this.maxValue:e(t[1]);this.parent.select("g.brush").call(this.brush.empty()?this.brush.clear():this.brush.extent([i,r]));var o=this;this.parent.selectAll(".bar").style("opacity",function(t){return t.x>=i&&t.x<r||o.brush.empty()?"1":".4"}),this.range[0]=i,this.range[1]=r}},{key:"createAxes",value:function(){var t=this,e=d3.svg.axis().scale(this.xScale).orient("bottom").tickValues(this.tickArray).tickFormat(d3.format(".3s")),i=d3.svg.axis().scale(this.yScale).orient("left").tickValues(this.yTickArray).tickFormat(d3.format("3d"));this.parent.append("g").attr("class","x axis").attr("transform","translate("+t.margin.left+","+(t.margin.top+t.chartHeight)+")").call(e),this.parent.append("g").attr("class","y axis").attr("transform","translate("+t.margin.left+","+t.margin.top+")").call(i)}},{key:"createBrush",value:function(){var t=this,e=this.brushMove.bind(this);this.brush=d3.svg.brush().x(this.xScale).on("brush",e).extent([this.range[0],this.range[1]]);var i=d3.svg.arc().outerRadius(this.chartHeight/10).startAngle(0).endAngle(function(t,e){return e?-Math.PI:Math.PI}),r=this.parent.append("g").attr("class","brush").attr("transform","translate("+t.margin.left+","+t.margin.top+")").call(this.brush);r.selectAll(".resize").append("path").attr("transform","translate(0,"+t.chartHeight/2+")").attr("d",i).attr("fill","#666").attr("fill-opacity",".8").attr("stroke-width","1").attr("stroke","#000"),r.selectAll("rect").attr("stroke","#fff").attr("stroke-opacity",".6").attr("stroke-width","1").attr("fill-opacity",".1").attr("height",t.chartHeight),this.brushMove()}},{key:"createHistogramBars",value:function(){var t=this,e=this.parent.selectAll(".bar").data(this.histogramData).enter().append("g").attr("class","bar").attr("transform",function(e){return"translate("+(t.margin.left+t.xScale(e.x))+","+(t.margin.top+t.yScale(e.y))+")"});e.append("rect").attr("x",1).attr("width",t.xScale(this.minValue+this.histogramData[0].dx)-1).attr("height",function(e){return t.chartHeight-t.yScale(e.y)}).style("fill","steelblue"),e.append("text").attr("dy",".75em").attr("y",6).attr("x",this.xScale(this.minValue+this.histogramData[0].dx)/2).attr("text-anchor","middle").style("fill","#fff").text(function(t){return t.y})}},{key:"createHistogramData",value:function(){var t=d3.scale.linear().domain([0,this.numBins]).range([this.minValue,this.maxValue]);this.tickArray=d3.range(this.numBins+1).map(t),this.histogramData=d3.layout.histogram().bins(this.tickArray)(this.values)}},{key:"createYAxis",value:function(){var t=d3.max(this.histogramData,function(t){return t.y}),e=d3.scale.linear().domain([0,4]).range([0,t]);this.yTickArray=d3.range(5).map(e),this.yScale=d3.scale.linear().domain([0,d3.max(this.histogramData,function(t){return t.y})]).range([this.chartHeight,0])}},{key:"getClosestTickValue",value:function(t){for(var e=this.tickArray[0],i=Math.abs(t-e),r=0;r<this.tickArray.length;r++){var o=Math.abs(t-this.tickArray[r]);i>o&&(i=o,e=this.tickArray[r])}return e}},{key:"setNumBins",value:function(t){this.numBins=t,this.createHistogramData(),this.createYAxis(),this.parent.selectAll("g.x.axis").remove(),this.parent.selectAll("g.y.axis").remove(),this.parent.selectAll("g.bar").remove(),this.parent.selectAll("g.brush").remove(),this.createHistogramBars(),this.createAxes(),this.createBrush()}}]),t}();e.visHistogram=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(){"ngInject";var t={restrict:"E",templateUrl:"app/components/query/query.directive.html",scope:{submit:"&",submitDisabled:"="},controller:o,controllerAs:"queryController",bindToController:!0};return t}Object.defineProperty(e,"__esModule",{value:!0}),e.QueryDirective=r;var o=function n(t){"ngInject";i(this,n),this.defaultQuery=t.$parent.main.defaultQuery,this.cypherQuery=this.defaultQuery};o.$inject=["$scope"]},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function a(t){"ngInject";i(this,a),this.$log=t,this.templateUrl="app/components/numPaths/numPaths.directive.html",this.scope={viewState:"=",mainController:"="},this.controller=n,this.controllerAs="numPathsController",this.bindToController=!0};o.$inject=["$log"],e.NumPathsDirective=o;var n=function(){function t(e,r){"ngInject";i(this,t),this.$log=r,this.$scope=e,this.paths=e.$parent.main.model.getAllPaths(),this.$scope.$on("filterChanged",this.onFilterChanged.bind(this)),this.$scope.$on("setModel",this.setModel.bind(this)),this.numVisiblePathsPerHops=null}return t.$inject=["$scope","$log"],r(t,[{key:"setModel",value:function(t,e){this.paths=e.getAllPaths(),this.onFilterChanged()}},{key:"onFilterChanged",value:function(){for(var t=Object.keys(this.paths),e={},i=0;i<t.length;++i){e[t[i]]=0;for(var r=this.paths[t[i]],o=0;o<r.length;++o)this.viewState.isPathFiltered(r[o])||(e[t[i]]+=1)}for(var n=!0,i=0;i<t.length;++i)n=n&&this.paths[t[i]].length==e[t[i]];n?this.numVisiblePathsPerHops=null:this.numVisiblePathsPerHops=e}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){"ngInject";i(this,t),this.$uibModal=e}return t.$inject=["$uibModal"],r(t,[{key:"getSelectionFromList",value:function(t,e,i,r){var o=this.$uibModal.open({animation:!0,templateUrl:"app/components/modals/modalListFilter.html",controller:"ModalListFilterController",controllerAs:"modalController",size:"sm",resolve:{title:function(){return t},items:function(){return e},isItemSelected:function(){return i}}});o.result.then(r)}},{key:"getValueRange",value:function(t,e,i,r,o,n){var a=this.$uibModal.open({animation:!0,templateUrl:"app/components/modals/modalHistogramFilter.html",controller:"ModalHistogramFilterController",controllerAs:"modalController",size:"lg",resolve:{title:function(){return t},values:function(){return e},range:function(){return i},nodeIndexes:function(){return r},attribute:function(){return o}}});a.result.then(n)}}]),t}();e.ModalService=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(6),a=function(){function t(e,i){"ngInject";r(this,t),this.attributeNodeGroup={},this.isNodeIDFiltered={},this.isNodeHidden={},this.filterRanges={},this.filterValues={},this.hasFilters=!1,this.$scope=e,this.$log=i}return t.$inject=["$rootScope","$log"],o(t,[{key:"filterPaths",value:function(t){for(var e=[],i=0;i<t.length;++i)this.isPathFiltered(t[i])||e.push(t[i]);return e}},{key:"getFilterPathFunction",value:function(){return this.filterPaths.bind(this)}},{key:"getAttributeNodeGroup",value:function(t){return this.attributeNodeGroup[t]}},{key:"getQuantitativeFilter",value:function(t,e){return this.quantitativeFilters[e][t]}},{key:"getCategoricalFilter",value:function(t,e){return this.categoricalFilters[e][t]}},{key:"isNodeFiltered",value:function(t,e){for(var i=this.model,r=i.getAvailableAttributes(),o=0;o<r.length;++o){var n=r[o];if(i.isCategoricalAttribute(n)){var a=i.getNodeAttr([t],n)[0];if(!this.categoricalFilters[e][n][a])return!0}else{var s=i.getNodeAttr([t],n)[0];if(this.quantitativeFilters[e][n][0]>s||this.quantitativeFilters[e][n][1]<s)return!0}}var l=i.getCmGraph().getNodeIdName(),u=i.getNodeAttr([t],l)[0];return this.categoricalFilters[e][l][u]?void 0:!0}},{key:"isPathFiltered",value:function(t){for(var e=0;e<t.length;e+=2){var i=2;if(0==e?i=0:e==t.length-1&&(i=1),this.isNodeFiltered(t[e],i))return!0}return!1}},{key:"setAttributeNodeGroup",value:function(t,e){this.attributeNodeGroup[e]=t}},{key:"setModel",value:function(t){this.model=t,this.setAttributeNodeGroup(n.Utils.getFlattenedLists(t.getRowNodeIndexes()),0),this.setAttributeNodeGroup(n.Utils.getFlattenedLists(t.getColNodeIndexes()),1),this.setAttributeNodeGroup(n.Utils.getFlattenedLists(t.getIntermediateNodeIndexes()),2),this.numAttributeNodeGroups=3,this.resetFilters()}},{key:"setCategoricalFilter",value:function(t,e,i){for(var r=Object.keys(i),o=!0,n=0;n<r.length;++n)if(!i[r[n]]){o=!1;break}this.categoricalFilters[e][t]=i,this.$scope.$broadcast("filterChanged",t,e,i,!1,o)}},{key:"setQuantitativeFilter",value:function(t,e,i){var r=this.initialQuantitativeFilters[e][t][0]==i[0]&&this.initialQuantitativeFilters[e][t][1]==i[1];this.quantitativeFilters[e][t]=i,this.$scope.$broadcast("filterChanged",t,e,i,!0,r),this.$scope.$broadcast("updateQuantitativeAttributeFilter",t,e,i)}},{key:"resetAttributeFilter",value:function(t,e){var i=this.model.isCategoricalAttribute(t)||t==this.model.getCmGraph().getNodeIdName();i?this.categoricalFilters[e][t]=this.initialCategoricalFilter[e][t]:(this.quantitativeFilters[e][t]=this.initialQuantitativeFilters[e][t],this.$scope.$broadcast("updateQuantitativeAttributeFilter",t,e,this.quantitativeFilters[e][t])),this.$scope.$broadcast("filterChanged",t,e,null,!i,!0)}},{key:"resetFilters",value:function(){var t=this.model,e=t.getAvailableAttributes();this.categoricalFilters={},this.quantitativeFilters={};for(var i=0;i<this.numAttributeNodeGroups;++i){var r=this.getAttributeNodeGroup(i);this.categoricalFilters[i]={},this.quantitativeFilters[i]={};for(var o=0;o<e.length;++o){var a=e[o];if(t.isCategoricalAttribute(a)){var s=t.getNodeAttr(r,a);s=n.Utils.getUniqueValues(s),this.categoricalFilters[i][a]={};for(var l=0;l<s.length;++l)this.categoricalFilters[i][a][s[l]]=!0}else{var u=t.getNodeAttr(r,a);this.quantitativeFilters[i][a]=[d3.min(u),d3.max(u)]}}var c=t.getCmGraph().getNodeIdName();this.categoricalFilters[i][c]={};for(var h=t.getNodeAttr(r,c),l=0;l<h.length;++l)this.categoricalFilters[i][c][h[l]]=!0}this.initialCategoricalFilter=angular.copy(this.categoricalFilters),this.initialQuantitativeFilters=angular.copy(this.quantitativeFilters)}},{key:"setHoveredNodes",value:function(t,e){this.$scope.$broadcast("hoverNodes",t,e)}},{key:"clearSelection",value:function(){this.$scope.$broadcast("clearSelection")}}]),t}();e.ViewState=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(70),a=i(72),s=i(6),l=function(){function t(e){"ngInject";r(this,t),this.$log=e,this.templateUrl="app/components/nodeLinkView/nodeLinkView.directive.html",this.restrict="E",this.scope={viewState:"=",mainController:"="},this.controller=u,this.controllerAs="controller",this.bindToController=!0,this.link=this.linkFn.bind(this)}return t.$inject=["$log"],o(t,[{key:"linkFn",value:function(t,e){t.controller.element=e}}]),t}();e.NodeLinkViewDirective=l;var u=function(){function t(e,i,o,n){"ngInject";r(this,t),this.$log=e,this.$scope=i,this.$timeout=o,this.$http=n,this.$scope.$on("setSelectedPaths",this.setSelectedPaths.bind(this)),this.$scope.$on("setModel",this.setModel.bind(this)),this.$scope.$on("hoverNodes",this.onHoverNodes.bind(this)),this.ui={},this.ui.availableLayouts=["Layered","Force-directed"],this.ui.selectedLayout=this.ui.availableLayouts[2],this.svg=d3.select("#node-link-svg"),this.model=i.$parent.main.model}return t.$inject=["$log","$scope","$timeout","$http"],o(t,[{key:"setModel",value:function(t,e){this.model=e,this.onLayoutChanged(this.ui.selectedLayout)}},{key:"setSelectedPaths",value:function(t,e){this.paths=e,this.selectedSubgraph=this.model.getCmGraph().getSubgraph(this.paths);var i=this;this.$timeout(function(){i.layout?(i.layout.clear(),i.layout.setGraph(i.selectedSubgraph)):i.onLayoutChanged("Layered")})}},{key:"onHoverNodes",value:function(t,e){if(this.layout)if(e){var i=[];i=i.concat(e.sources),i=i.concat(e.targets),i=i.concat(e.intermediates),i=s.Utils.getUniqueValues(i),this.layout.onHoverNodes(t,i)}else this.layout.onHoverNodes(t,null)}},{key:"onLayoutChanged",value:function(t){this.layout&&this.layout.clear(),"Layered"==t?this.layout=new n.LayeredLayout(this.svg,this.model,this.$log,this.viewState,this.mainController):this.layout=new a.ForceDirectedLayout(this.svg,this.model,this.$log,this.viewState,this.mainController),this.paths&&this.layout.setGraph(this.selectedSubgraph)}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(71),l=function(t){function e(t,i,o,n,s){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s),this.nodeWidth=45,this.nodeHeight=20,this.nodeRx=5,this.nodeRy=5,this.graphNodeSep=2,this.graphRankSep=2,this.graphEdgeSep=4,this.rankdir="LR"}return o(e,t),n(e,[{key:"createLinks",value:function(t,e){var i=d3.svg.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("basis");this.links=t.selectAll("g.link").data(e.edges()).enter().append("g").classed("link",!0),this.links.append("path").attr("d",function(t){return i(e.edge(t).points)})}},{key:"createLayout",value:function(t){this.setHeightAndWidth();var e=this;t.nodes().forEach(function(i){var r=t.node(i);r.rx=e.nodeRx,r.ry=e.nodeRy,r.width=e.nodeWidth,r.height=e.nodeHeight}),t.graph().rankdir="LR",t.graph().nodesep=this.graphNodeSep,t.graph().ranksep=this.graphRankSep,t.graph().edgesep=this.graphEdgeSep,dagre.layout(t),this.createLinks(this.graphGroup,t),this.createNodes(this.graphGroup,t);var i=t.graph(),r=i.width,o=i.height;if(o>this.height)this.svg.attr("viewBox","0 0 "+r+" "+o);else{var n=this.width/2-r/2,a=this.height/2-o/2;this.graphGroup.attr("transform","translate( "+n+", "+a+")"),this.svg.attr("viewBox","0 0 "+this.width+" "+this.height)}}},{key:"createNodes",value:function(t,i){this.nodeGroup=t.append("g").classed("nodeGroup",!0),this.nodes=this.nodeGroup.selectAll("g.node").data(i.nodes()).enter().append("g").attr("transform",function(t){return e.getNodeTopLeftAsTransform(t,i)}).classed("node",!0),this.nodes.append("rect").attr("width",function(t){return i.node(t).width}).attr("height",function(t){return i.node(t).height}).attr("rx",function(t){return i.node(t).rx}).attr("ry",function(t){return i.node(t).ry}).classed("node",!0);var r=this;this.nodes.append("text").text(function(t){return r.model.getMajorLabels([t])[0]}).attr("transform",function(t){return e.getNodeCenterAsTransform(t,i)}),this.addHoverCallbacks(this.nodeGroup,"g.node")}}],[{key:"getNodeTopLeftAsTransform",value:function(t,e){var i=e.node(t).x-e.node(t).width/2,r=e.node(t).y-e.node(t).height/2;return"translate("+i+", "+r+")"}},{key:"getNodeCenterAsTransform",value:function(t,e){return"translate("+e.node(t).width/2+", "+e.node(t).height/2+")"}}]),e}(s.Layout);e.LayeredLayout=l},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o,n,a){i(this,t),this.svg=e,this.model=r,this.$log=o,this.viewState=n,this.mainController=a,this.graphYOffset=80,this.accessor=function(t){return t}}return r(t,[{key:"addHoverCallbacks",value:function(t,e,i){i&&(this.accessor=i);var r=this;t.selectAll(e).on("mouseenter",function(t){d3.select(this).classed("hovered",!0);var e="";e=i?i(t):t;var o=parseInt(e),n={sources:[o],intermediates:[o],targets:[o]};r.viewState.setHoveredNodes(n,!1)}).on("mouseleave",function(){d3.select(this).classed("hovered",!1),r.viewState.setHoveredNodes(null)})}},{key:"clear",value:function(){this.svg.selectAll("*").remove()}},{key:"onHoverNodes",value:function(t,e){var i=this;if(this.nodeGroup)if(e){var r=this.nodeGroup.selectAll("g.node").filter(function(t){var r=parseInt(i.accessor(t));return-1!=e.indexOf(r)});r.classed("hovered",!0)}else this.nodeGroup.selectAll("g.node").classed("hovered",!1)}},{key:"setGraph",value:function(t){this.graph=t,this.graphGroup=this.svg.append("g"),this.createLayout(this.graph)}},{key:"setHeightAndWidth",value:function(){var t=d3.select("#node-link-column")[0][0];t.clientHeight?(this.height=t.clientHeight-50,this.width=t.clientWidth):(this.width=250,this.height=717),this.svg.attr("width",this.width),this.svg.attr("height",this.height),this.svg.attr("viewBox","0 0 "+this.width+" "+this.height)}},{key:"setModel",value:function(t){this.model=t}}]),t}();e.Layout=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},s=i(71),l=function(t){function e(t,i,o,n,s){r(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,o,n,s),this.nodeWidth=45,this.nodeHeight=20,this.linkDistance=100,this.rx=6,this.ry=6,this.gravity=.001,this.theta=.1,this.charge=-1e3}return o(e,t),n(e,[{key:"convertEdgeToLink",value:function(t,e){for(var i=void 0,r=void 0,o=0;o<e.length;++o){var n=e[o];t.v==n.id&&(r=o),t.w==n.id&&(i=o)}if(void 0==i||void 0==r)throw"Error converting edge to link!";return{source:r,target:i,value:this.graph.edge(t)}}},{key:"graphToNodesAndEdges",value:function(t){for(var e=this,i={nodes:[],edges:[]},r=t.nodes(),o=r.length,n=r.length,a=0;a<r.length;++a){var s=r[a],l=t.predecessors(s),u=t.successors(s);l.length<o&&(o=l.length),u.length<n&&(n=u.length)}var c=0,h=0;for(a=0;a<r.length;++a){var s=r[a],l=t.predecessors(s),u=t.successors(s);l.length==o&&c++,u.length==n&&h++}var d=1,p=1,f=Math.max(4,c)+1,g=Math.max(4,h)+1;for(a=0;a<r.length;++a){var s=r[a],l=t.predecessors(s),u=t.successors(s),v=t.node(s);l.length==o?(i.nodes.push({id:s,attributes:v,name:e.model.getMajorLabels([s])[0],label:e.model.getNodeAttr([s],"label")[0],x:e.width/10,y:e.height*d/f,fixed:!0}),d++):u.length==n?(i.nodes.push({id:s,attributes:v,name:e.model.getMajorLabels([s])[0],label:e.model.getNodeAttr([s],"label")[0],x:9*e.width/10,y:e.height*p/g,fixed:!0}),p++):i.nodes.push({id:s,attributes:v,name:e.model.getMajorLabels([s])[0],label:e.model.getNodeAttr([s],"label")[0]})}var m=t.edges(),b=[];for(a=0;a<m.length;++a){var y=m[a];b.push(y)}for(a=0;a<b.length;++a)i.edges.push(this.convertEdgeToLink(b[a],i.nodes));return i}},{key:"createLayout",value:function(t){this.setHeightAndWidth(t);var e=this,i=this.graphToNodesAndEdges(t),r=d3.layout.force().nodes(i.nodes).links(i.edges).size([e.width,e.height]).linkDistance([e.linkDistance]).charge([e.charge]).theta(e.theta).gravity(e.gravity).start();this.edges=this.graphGroup.selectAll("g.edge").data(i.edges).enter().append("line").attr("marker-end","url(#arrowhead)").style("stroke","#ccc").style("pointer-events","none"),this.edgePaths=this.graphGroup.selectAll("g.edgepath").data(i.edges).enter().append("path"),this.nodeGroup=this.graphGroup.append("g").classed("nodeGroup",!0),this.nodes=this.nodeGroup.selectAll("g.node").data(i.nodes).enter().append("g").classed("node",!0).call(r.drag),this.nodeLabels=this.nodes.append("foreignObject").attr("width","4em").attr("height","2em").classed("node",!0),this.nodeLabels.append("xhtml:div").classed("path-list-node",!0).html(function(t){
return t.name+(t.label?"<br>"+t.label:"")}),this.graphGroup.append("defs").append("marker").attr({id:"arrowhead",viewBox:"-0 -5 10 10",refX:30,refY:0,orient:"auto",markerWidth:10,markerHeight:10,xoverflow:"visible"}).append("svg:path").attr("d","M 0,-5 L 10 ,0 L 0,5").attr("fill","#ccc").attr("stroke","#ccc");var o=function(t){return t.id};this.addHoverCallbacks(this.nodeGroup,"g.node",o),r.on("tick",function(){e.edges.attr({x1:function(t){return t.source.x},y1:function(t){return t.source.y},x2:function(t){return t.target.x},y2:function(t){return t.target.y}}),e.nodes.attr("transform",function(t){return"translate("+(t.x-e.nodeWidth/2)+","+(t.y-e.nodeHeight/2)+")"}),e.edgePaths.attr("d",function(t){var e="M "+t.source.x+" "+t.source.y+" L "+t.target.x+" "+t.target.y;return e})})}}]),e}(s.Layout);e.ForceDirectedLayout=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(6),a=i(74),s=function(){function t(e,i){"ngInject";r(this,t),this.$log=e,this.$timeout=i,this.templateUrl="app/components/pathListView/pathListView.directive.html",this.restrict="EA",this.scope={viewState:"=",mainController:"="},this.controller=l,this.controllerAs="controller",this.bindToController=!0,this.link=this.linkFn.bind(this)}return t.$inject=["$log","$timeout"],o(t,[{key:"linkFn",value:function(t,e){t.controller.activate(d3.select(e[0].parentNode.parentNode))}}]),t}();e.PathListViewDirective=s;var l=function(){function t(e,i,o,n){"ngInject";r(this,t),this.$log=e,this.$scope=i,this.$timeout=o,this.viewState=n,this.$scope.$on("setSelectedPaths",this.setSelectedPaths.bind(this)),this.$scope.$on("setModel",this.setModel.bind(this)),this.$scope.$on("hoverNodes",this.onHoverNodes.bind(this)),this.ui={},this.descending=!0,this.orderByField="paths.length",this.setModel(i.$parent.main.model),this.currentPaths=[]}return t.$inject=["$log","$scope","$timeout","viewState"],o(t,[{key:"getClientHeight",value:function(){return this.element[0][0].clientHeight}},{key:"activate",value:function(t){this.element=t}},{key:"setModel",value:function(t,e){this.model=e,this.pathListModel=new a.PathListModel(e,this.$log)}},{key:"setSelectedPaths",value:function(t,e){this.pathListModel.setPaths(e),this.pathListModel.aggregatePaths(),this.paths=e,this.isRowExpanded=[];for(var i=0;i<this.pathListModel.rows.length;++i)this.isRowExpanded[i]=!1}},{key:"hoverNodes",value:function(t){if(t){var e={sources:t,intermediates:t,targets:t};this.viewState.setHoveredNodes(e,!1)}else this.viewState.setHoveredNodes(null,!1)}},{key:"onHoverNodes",value:function(t,e){if(e){var i=[];i=i.concat(e.sources),i=i.concat(e.targets),i=i.concat(e.intermediates),this.hoveredNodes=n.Utils.getUniqueValues(i)}else this.hoveredNodes=[];var r=this;this.$timeout(function(){r.$scope.$apply()})}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r){i(this,t),this.model=e,this.$log=r,this.paths=[],this.rows=[]}return r(t,[{key:"aggregatePaths",value:function(){for(var t=0;t<this.paths.length;++t){for(var e=this.paths[t],i=!1,r=0;r<this.rows.length;++r){var o=this.rows[r];if(o.matches(e)){o.addPath(e),i=!0;break}}i||this.rows.push(new n(e))}}},{key:"getCurrentPathListRows",value:function(){return this.rows}},{key:"getEdgeDescription",value:function(t){return this.model.getCmGraph().getEdgeDescription(t)}},{key:"getEdgeDetails",value:function(t){return this.model.getCmGraph().getEdgeDetails(t)}},{key:"setPaths",value:function(t){this.paths=t,this.rows=[]}}]),t}();e.PathListModel=o;var n=function(){function t(e){i(this,t),this.paths=[e],this.isPathExpanded=[!1]}return r(t,[{key:"matches",value:function(t){var e=this.paths[0];if(t.length!=e.length)return!1;for(var i=!0,r=0;r<e.length;r+=2)i=i&&e[r]==t[r];return i}},{key:"addPath",value:function(t){this.paths.push(t),this.isPathExpanded.push(!1)}}]),t}();e.PathListRow=n},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r){"ngInject";i(this,t),this.$log=e,this.$timeout=r,this.templateUrl="app/components/adjustableColorScale/adjustableColorScale.directive.html",this.restrict="EA",this.scope={colorScale:"=",values:"=",colorScaleIndex:"=",useLinearColorScale:"=",metric:"="},this.controller=n,this.controllerAs="controller",this.bindToController=!0,this.link=this.linkFn.bind(this)}return t.$inject=["$log","$timeout"],r(t,[{key:"linkFn",value:function(t,e){t.controller.element=e}}]),t}();e.AdjustableColorScaleDirective=o;var n=function(){function t(e,r,o){"ngInject";i(this,t),this.$log=r,this.$scope=e,this.$timeout=o,this.svg=null,this.formatNumber=d3.format("d"),this.marginLeft=25,this.marginRight=25,this.width=400;var n=this;this.$timeout(function(){n.setColorScale(null,n.colorScale)}),this.$scope.$watch(function(t){return t.controller.colorScale},function(){n.setColorScale(null,n.colorScale)}),this.$scope.$watch(function(t){return t.controller.values},function(){n.values&&(n.histogram?n.histogram.clear():n.histogramGroup=n.svgRoot.append("g").attr("transform","translate(5, 0)"))})}return t.$inject=["$scope","$log","$timeout"],r(t,[{key:"drag",value:function(){var t=this,e=t.xScale.domain()[0],i=t.xScale.domain()[1],r=t.xScale.invert(d3.event.x);r=e>r?e:r>i?i:r;var o=t.others.slice();o.push(r),o.sort(function(t,e){return t>e}),t.colorScale.domain(o),t.xAxis.tickValues(o),t.update()}},{key:"dragEnd",value:function(){this.$scope.$parent.$broadcast("setColorScale",this.colorScaleIndex,this.colorScale)}},{key:"dragStart",value:function(t){var e=this;this.others=[],this.colorScale.domain().forEach(function(i){i!=t&&e.others.push(i)})}},{key:"onResetClicked",value:function(){this.setColorScale(0,this.cachedColorScale),this.dragEnd()}},{key:"onTickDoubleClicked",value:function(t){for(var e=this,i=[],r=this.colorScale.domain(),o=this.colorScale.range(),n=[],a=0;a<r.length;++a)r[a]!=t&&(i.push(r[a]),n.push(o[a]));e.colorScale.domain(i),e.colorScale.range(n),e.xAxis.tickValues(i),e.update()}},{key:"setColorScale",value:function(t,e){if(e){this.cachedColorScale=e.copy(),this.colorScale=e,this.svg?this.svg.selectAll("*").remove():(this.svgRoot=d3.select(this.element[0]).select(".legend-container").append("svg").attr("width",this.width).attr("height",30),this.svg=this.svgRoot.append("g").attr("transform","translate(0, 0)"));var i=e.domain(),r=[i[0],i[i.length-1]];this.useLinearColorScale?this.xScale=d3.scale.linear().domain(r).range([this.marginRight,this.width-this.marginLeft]):this.xScale=d3.scale.log().domain(r).range([this.marginRight,this.width-this.marginLeft]),this.xAxis=d3.svg.axis().scale(this.xScale).orient("bottom").tickSize(13).tickValues(e.domain()).tickFormat(function(t){return d3.format(".3n")(Math.floor(t))}),this.group=this.svg.append("g").attr("class","legend"),this.update()}}},{key:"update",value:function(){var t=this,e=this.group.selectAll(".range").data(this.colorScale.range().map(function(e){var i=t.colorScale.invertExtent(e);return null==i[0]&&(i[0]=t.xScale.domain()[0]),null==i[1]&&(i[1]=t.xScale.domain()[1]),i}));e.enter().append("rect").classed("range",!0).attr("height",8);var i=d3.behavior.drag().on("dragstart",this.dragStart.bind(this)).on("drag",this.drag.bind(this)).on("dragend",this.dragEnd.bind(this));e.attr("x",function(e){return t.xScale(e[0])}).attr("width",function(e){return t.xScale(e[1])-t.xScale(e[0])}).style("fill",function(e){return t.colorScale(e[0])}),this.group.call(this.xAxis).selectAll(".tick").style("cursor","ew-resize").on("dblclick",t.onTickDoubleClicked.bind(t)).call(i).append("rect").attr("x",-3).attr("width",2).attr("height",13).attr("fill-opacity",0)}}]),t}()},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r){"ngInject";i(this,t),this.$scope=e,this.$log=r,this.colorScales={},this.hasColorScales=!1,this.colorScaleNames=["Blues","Oranges","Purples","Greens"],this.colorScales=[],this.useLinear=[]}return t.$inject=["$rootScope","$log"],r(t,[{key:"createColorScale",value:function(e,i){var r=this.colorScaleNames[e];0===i[0]&&i[0]++,i[1]++;var o=t.getColorScaleRange(colorbrewer[r],i);if(this.useLinear[e]){for(var n=o.length,a=[],s=i[1]/(n-1),l=0;n>l;++l)a.push(s*l+1);return d3.scale.threshold().domain(a).range(o)}for(var u=d3.scale.log().domain(i).range([0,100]),n=o.length,s=i[1]/(n-1),a=[],l=0;n>l;++l){var c=s*l/i[1]*100;a.push(u.invert(c))}return d3.scale.threshold().domain(a).range(o)}},{key:"setUseLinearColorScale",value:function(t,e){this.useLinear[e]=t}}],[{key:"getColorScaleRange",value:function(t,e){return 1==e[0]&&1==e[1]?[t[3][2]]:1==e[0]&&2==e[1]?[t[3][0],t[3][2]]:e[1]>=2&&e[1]<7?t[e[1]+1]:t[7]}}]),t}();e.ColorScaleService=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){"ngInject";i(this,t),this.$log=e,this.restrict="E",this.templateUrl="app/components/queryBuilder/queryBuilder.directive.html",this.scope={onSubmit:"&",allowAdvancedQuery:"=",dataset:"=",resource:"=",main:"=",defaultQuery:"="},this.controller=n,this.controllerAs="queryController",this.bindToController=!0,this.link=this.linkFn.bind(this)}return t.$inject=["$log"],r(t,[{key:"linkFn",value:function(t,e){t.queryController.element=e}}]),t}();e.QueryBuilderDirective=o;var n=function(){function t(e,r,o,n,a,s){"ngInject";i(this,t),this.$http=e,this.$q=r,this.$log=o,this.$timeout=n,this.$scope=a,this.cypherGenerator=s,this.isMarclabData=this.allowAdvancedQuery,this.isCypherWritable=!1,this.reset(),this.$scope.$watch(function(t){return t.queryController.dataset},this.reset.bind(this)),this.$scope.$on("filterChanged",this.onFilterChanged.bind(this)),this.$scope.$on("setQuery",this.onSetQuery.bind(this))}return t.$inject=["$http","$q","$log","$timeout","$scope","cypherGeneratorService"],r(t,[{key:"generateCypher",value:function(){var t="";if(this.isCypherWritable)t=this.cypher;else if(this.isMarclabData)t=this.cypherGenerator.generateAdvancedQuery(this.ui);else{var e={};e.nodes=[this.ui.nodes[0],this.ui.nodes[this.ui.nodes.length-1]],t=this.cypherGenerator.generateBasicQuery(e,this.ui.selectedNumHops,"flights"==this.dataset)}return t}},{key:"loadEdgeSuggestions",value:function(t){return this.loadSuggestions(t,"match_edge")}},{key:"loadNodeSuggestions",value:function(t){return this.loadSuggestions(t,"match")}},{key:"loadSuggestions",value:function(t,e){var i=this.$q.defer();if("*"!=t&&t.length>1){var r={key:t,graph_name:this.dataset},o=function(t){for(var e=[],r=0;r<t.data.length;++r){var o=t.data[r];o.text=String(o.value)+" ("+o.attribute+")",e[r]=o}i.resolve(e)};this.$http.post(this.resource+e,r).then(o)}else"*"==t&&this.$timeout(function(){i.resolve([{text:"* (wildcard)",attribute:"*",name:"*"}])});return i.promise}},{key:"onFilterChanged",value:function(t,e,i,r,o,n){var a="";0==i?a="Start":2==i?a="Node":1==i&&(a="End"),this.filters[a]||(this.filters[a]={});var s=[];if(r&&!o)for(var l=Object.keys(r),u=0;u<l.length;++u)r[l[u]]||s.push(l[u]);n?this.filters[a][e]=null:this.filters[a][e]={attribute:e,attributeNodeGroup:i,filter:r,filterTexts:s,isQuantitative:o}}},{key:"hasIntermediateNodeFilters",value:function(){if(this.filters&&this.filters.Node)for(var t=Object.keys(this.filters.Node),e=0;e<t.length;++e)if(this.filters.Node[t[e]])return!0;return!1}},{key:"onSetQuery",value:function(t,e){this.reset(),e&&(this.ui=e,this.onQueryModified())}},{key:"onQueryModified",value:function(){this.main.queryUi=this.ui,this.cypher=this.generateCypher()}},{key:"onSubmitClicked",value:function(){this.onSubmit({query:this.generateCypher(this.ui.selectedInterface)}),this.filters={}}},{key:"reset",value:function(){this.filters={},this.ui={},this.ui.availableNumHops=[1,2,3],this.ui.selectedNumHops=2,this.setNumHops(2),this.cypher="",this.placeholder=" "}},{key:"setNumHops",value:function(t){var e=["Start"];this.filters={},this.ui.edges=[],this.ui.edges.push([]),this.ui.nodes=[],this.ui.nodes[0]=[];for(var i=1;t>i;++i)e.push("Node"),this.ui.edges.push([]),this.ui.nodes[i]=[];e.push("End"),this.ui.keys=e,this.onQueryModified()}}]),t}()},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(79),a=i(80),s=i(81),l=function(){function t(e){"ngInject";r(this,t),this.$log=e}return t.$inject=["$log"],o(t,[{key:"getGroupFromTags",value:function(e){if(t.tagsContainWildcard(e))return new n.QueryOrGroup;for(var i=new n.QueryOrGroup,r=0;r<e.length;++r){var o=e[r];i.addChild(new a.QueryRule(o.attribute,"=","'"+o.value+"'"))}return i}},{key:"generateAdvancedQuery",value:function(t){for(var e=t.nodes,i=t.edges,r={nodes:[],edges:[]},o=0;o<e.length;++o){var n=e[o],a=this.getGroupFromTags(n);r.nodes.push(a)}for(var o=0;o<i.length;++o){var n=i[o],a=this.getGroupFromTags(n);r.edges.push(a)}var l=new s.QueryAdvancedPath(r);return l.toString()}},{key:"generateBasicQuery",value:function(t,e,i){for(var r=this.getGroupFromTags(t.nodes[0]),o=this.getGroupFromTags(t.nodes[1]),n="",a=1;e>=a;++a){a>1&&(n+=" UNION ");var l=new s.QueryBasicPath(a,[r,o],i);n+=l.toString()}return n}}],[{key:"tagsContainWildcard",value:function(t){if(t){for(var e=0;e<t.length;++e)if(!t[e].value)return!0;return!1}return!0}}]),t}();e.CypherGeneratorService=l},function(t,e){"use strict";function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(){r(this,t),this.children=[],this.operand="",this.cypherVariable=""}return n(t,[{key:"addChild",value:function(t){this.children.push(t)}},{key:"toString",value:function(t){t||(t=this.cypherVariable);var e=this.children.length,i=!1;if(0==e)return"";if(1==e)return this.children[0].toString(t);for(var r="",o=0;o<this.children.length;++o){var n=this.children[o].toString(t);n.length>0&&r.length>0&&(i=!0,r+=this.operand),r+=n}return i&&(r="("+r+")"),r}},{key:"setCypherVariable",value:function(t){this.cypherVariable=t}}]),t}();e.QueryGroup=a;var s=function(t){function e(){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.operand=" AND "}return i(e,t),e}(a);e.QueryAndGroup=s;var l=function(t){function e(){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.operand=" OR "}return i(e,t),e}(a);e.QueryOrGroup=l},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o){i(this,t),this.field=e,this.condition=r,this.value=o}return r(t,[{key:"toString",value:function(t){return"("+t+"."+this.field+" "+this.condition+" "+this.value+")"}}]),t}();e.QueryRule=o},function(t,e,i){"use strict";function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){for(var r=!0;r;){var o=t,n=e,a=i;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,n);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return void 0;t=u,e=n,i=a,r=!0,s=u=void 0}},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(79),l=i(80),u=function(){function t(){o(this,t)}return a(t,[{key:"toString",value:function(){return this.root.toString().length?t.getCypherSkeletonPrefix(this.numHops)+" WHERE "+this.root.toString()+t.getCypherSkeletonPostfix():t.getCypherSkeletonPrefix(this.numHops)+t.getCypherSkeletonPostfix()}}],[{key:"getCypherFlightRules",value:function(t){for(var e=new s.QueryAndGroup,i=0;t-1>i;++i){var r=new s.QueryAndGroup;r.setCypherVariable("e"+i);var o=new l.QueryRule("arr_time","<","e"+(i+1)+".dep_time");r.addChild(o),o=new l.QueryRule("carrier","=","e"+(i+1)+".carrier"),r.addChild(o),e.addChild(r)}return e}},{key:"getCypherSkeletonPrefix",value:function(t){for(var e="MATCH p = ",i=0;t+1>i;++i)e+="(n"+i+")",t>i&&(e+="-[e"+i+"]->");return e}},{key:"getCypherSkeletonPostfix",value:function(){return" RETURN p"}}]),t}();e.QueryPath=u;var c=function(t){function e(t,i,r){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.numHops=t,this.sourceGroup=i[0],this.targetGroup=i[1],this.sourceGroup.setCypherVariable("n0"),this.targetGroup.setCypherVariable("n"+t),this.root=new s.QueryAndGroup,this.root.addChild(this.sourceGroup),this.root.addChild(this.targetGroup),r&&this.root.addChild(u.getCypherFlightRules(t))}return r(e,t),e}(u);e.QueryBasicPath=c;var h=function(t){function e(t){o(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.edgeGroups=t.edges,this.nodeGroups=t.nodes,this.root=new s.QueryAndGroup,this.numHops=this.edgeGroups.length;for(var i=0;i<this.nodeGroups.length;++i)this.nodeGroups[i].setCypherVariable("n"+i),this.root.addChild(this.nodeGroups[i]);for(i=0;i<this.edgeGroups.length;++i)this.edgeGroups[i].setCypherVariable("e"+i),this.root.addChild(this.edgeGroups[i])}return r(e,t),e}(u);e.QueryAdvancedPath=h},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){"ngInject";i(this,t),this.$uibModal=e}return t.$inject=["$uibModal"],r(t,[{key:"getSelectionFromList",value:function(t,e,i){var r=this.$uibModal.open({animation:!0,templateUrl:"app/components/dataSelection/dataSelection.html",controller:"DataSelectionController",controllerAs:"controller",bindToController:!0,size:"lg",backdrop:"static",keyboard:!1,resolve:{defaultData:function(){return e},defaultDataNames:function(){return t}}});r.result.then(i)}}]),t}();e.DataSelectionService=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,r,o){"ngInject";i(this,t),this.$uibModalInstance=e,this.isParsingFile=!1,this.defaultData=o,this.defaultDataName=r}return t.$inject=["$uibModalInstance","defaultDataNames","defaultData"],r(t,[{key:"onFileChanged",value:function(t){var e=this,i=new FileReader;e.isParsingFile=!0,e.userDataError=!1,e.filename=t.files[0].name,e.$root.$apply(),i.onload=e.onFileLoadedSuccess.bind(e),i.readAsText(t.files[0])}},{key:"onFileLoadedSuccess",value:function(t){var e=this;e.userData=angular.fromJson(t.target.result),e.isUserDataOk=e.userData.nodes&&e.userData.edges,e.userDataError=!e.isUserDataOk,e.isParsingFile=!1,e.userData.name=e.filename,e.$root.$apply()}},{key:"go",value:function(t){var e=this;e.$uibModalInstance.close(t)}}]),t}();e.DataSelectionController=o},function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){"ngInject";i(this,t),this.$log=e,this.restrict="E",this.templateUrl="app/components/queryBuilderRegex/queryBuilderRegex.directive.html",this.scope={onSubmit:"&",allowAdvancedQuery:"=",dataset:"=",resource:"=",main:"=",defaultQuery:"="},this.controller=n,this.controllerAs="queryController",this.bindToController=!0,this.link=this.linkFn.bind(this)}return t.$inject=["$log"],r(t,[{key:"linkFn",value:function(t,e){t.queryController.element=e}}]),t}();e.QueryBuilderRegexDirective=o;var n=function(){function t(e,r,o,n,a,s){"ngInject";i(this,t),this.$http=e,this.$q=r,this.$log=o,this.$timeout=n,this.$scope=a,this.cypherGenerator=s,this.isMarclabData=this.allowAdvancedQuery,this.isCypherWritable=!1,this.reset(),this.$scope.$watch(function(t){return t.queryController.dataset},this.reset.bind(this)),this.$scope.$on("filterChanged",this.onFilterChanged.bind(this)),this.$scope.$on("setQuery",this.onSetQuery.bind(this))}return t.$inject=["$http","$q","$log","$timeout","$scope","cypherGeneratorService"],r(t,[{key:"generateCypher",value:function(){var t="";if(this.isCypherWritable)t=this.cypher;else if(this.isMarclabData)t=this.cypherGenerator.generateAdvancedQuery(this.ui);else{var e={};e.nodes=[this.ui.nodes[0],this.ui.nodes[this.ui.nodes.length-1]],t=this.cypherGenerator.generateBasicQuery(e,this.ui.selectedNumHops,"flights"==this.dataset)}return t}},{key:"loadEdgeSuggestions",value:function(t){return this.loadSuggestions(t,"match_edge")}},{key:"loadNodeSuggestions",value:function(t){return this.loadSuggestions(t,"match")}},{key:"loadSuggestions",value:function(t,e){var i=this.$q.defer();if("*"!=t&&t.length>1){var r={key:t,graph_name:this.dataset},o=function(t){for(var e=[],r=0;r<t.data.length;++r){var o=t.data[r];o.text=String(o.value)+" ("+o.attribute+")",e[r]=o}i.resolve(e)};this.$http.post(this.resource+e,r).then(o)}else"*"==t&&this.$timeout(function(){i.resolve([{text:"* (wildcard)",attribute:"*",name:"*"}])});return i.promise}},{key:"onFilterChanged",value:function(t,e,i,r,o,n){var a="";0==i?a="Start":2==i?a="Node":1==i&&(a="End"),this.filters[a]||(this.filters[a]={});var s=[];if(r&&!o)for(var l=Object.keys(r),u=0;u<l.length;++u)r[l[u]]||s.push(l[u]);n?this.filters[a][e]=null:this.filters[a][e]={attribute:e,attributeNodeGroup:i,filter:r,filterTexts:s,isQuantitative:o}}},{key:"hasIntermediateNodeFilters",value:function(){if(this.filters&&this.filters.Node)for(var t=Object.keys(this.filters.Node),e=0;e<t.length;++e)if(this.filters.Node[t[e]])return!0;return!1}},{key:"onSetQuery",value:function(t,e){this.reset(),e&&(this.ui=e,this.onQueryModified())}},{key:"onQueryModified",value:function(){this.main.queryUi=this.ui}},{key:"onSubmitClicked",value:function(){this.onSubmit({query:this.ui})}},{key:"reset",value:function(){this.filters={},this.ui={},this.ui.availableNumHops=[1,2,3],this.ui.selectedNumHops=2,this.setNumHops(2),this.cypher="",this.placeholder=" "}},{key:"setNumHops",value:function(t){var e=["Start"];this.filters={},this.ui.edges=[],this.ui.nodes=[],this.ui.selectedNumHops=t;for(var i=0;t>i;++i)this.ui.nodes.push(""),this.ui.edges.push("");this.ui.nodes.push(""),this.ui.keys=e,this.onQueryModified()}}]),t}()}]),angular.module("connectivityMatrixJs").run(["$templateCache",function(t){t.put("app/main/main.html",'<div class="full-width no-shrink top-bar"><span class="logo" style="padding-left:0.25em">Graffinity</span> <span class="logo" style="padding-left:0.5em" uib-dropdown=""><i class="fa fa-bars" aria-hidden="true" uib-dropdown-toggle=""></i><ul class="dropdown-menu" uib-dropdown-menu="" aria-labelledby="simple-dropdown" role="menu"><li role="menuitem" ng-click="main.onSaveClicked()"><a href="#">Save state</a></li><li role="menuitem" ng-click="main.onLoadClicked()"><a href="#">Load state</a></li></ul></span> <input type="file" id="fileInputElement" multiple="" accept="application/json" style="display:none" onchange="angular.element(this).scope().main.onLoadFile(this);"> <span style="display: inline-flex; flex-direction: column; font-size: x-small; padding-left: 2em;"><span><span style="font-weight:bold;">File:</span> {{main.cmModelFactory.rawGraph.name}}</span> <span><span style="font-weight:bold;">Nodes:</span> {{main.cmModelFactory.rawGraph.nodes.length}} <span style="font-weight:bold; padding-left:1em;">Edges:</span> {{main.cmModelFactory.rawGraph.edges.length}}</span></span> <span style="display: inline-flex; flex-direction: column; font-size: x-small; padding-left: 2em;"><span><span style="font-weight:bold;">Query:</span> {{main.queryString}}</span> <span><span style="font-weight:bold;">Paths:</span> {{main.numPaths}}</span></span><div style="margin-left: auto; padding-right: 1em;"><span><button type="button" ng-show="!main.areDetailsVisible && main.hasGoodData" class="btn btn-default btn-xs btn-header" ng-click="main.areDetailsVisible = true;">Show panel</button> <button type="button" ng-show="main.areDetailsVisible && main.hasGoodData" class="btn btn-default btn-xs btn-header" ng-click="main.areDetailsVisible = false;">Hide panel</button></span> <span><button type="button" ng-show="!main.isNodeListVisible && main.hasGoodData" class="btn btn-default btn-xs btn-header" ng-click="main.isNodeListVisible= true;" ng-disabled="!main.model.getIntermediateNodeIndexes().length">Show list</button> <button type="button" ng-show="main.isNodeListVisible && main.hasGoodData" class="btn btn-default btn-xs btn-header" ng-click="main.isNodeListVisible= false;">Hide list</button></span></div></div><div class="full-width hflex main-panel grow-1"><div class="vflex left-pane-wrappers"><div class="pane left-pane grey-border"><query-builder-regex class="query-builder" on-submit="main.onQuerySubmitted(query)" submit-disabled="main.hasActiveQuery" resource="main.resource" allow-advanced-query="main.database == \'marclab\'" dataset="main.database" main="main"></query-builder-regex></div><div class="pane left-pane grey-border" ng-show="main.hasGoodData"><h4 class="no-margin">Connectivity Matrix Controls</h4><div class="control-header">Aggregate rows<ui-select class="control-input" ng-model="main.ui.selectedCategoricalRowAttr" ng-change="main.onCollapseRowsByAttr(main.ui.selectedCategoricalRowAttr)"><ui-select-match placeholder="Categorical attribute to collapse rows">{{main.ui.selectedCategoricalRowAttr}}</ui-select-match><ui-select-choices repeat="option in main.ui.availableCategoricalAttr track by option">{{option}}</ui-select-choices></ui-select></div><div class="control-header">Aggregate cols<ui-select class="control-input" ng-model="main.ui.selectedCategoricalColAttr" ng-change="main.onCollapseColsByAttr(main.ui.selectedCategoricalColAttr)"><ui-select-match placeholder="Categorical attribute to collapse cols">{{main.ui.selectedCategoricalColAttr}}</ui-select-match><ui-select-choices repeat="option in main.ui.availableCategoricalAttr track by option">{{option}}</ui-select-choices></ui-select></div><div class="control-header">Sort order<ui-select class="control-input" ng-model="main.ui.selectedSortOrder" ng-change="main.onSortOrderChanged(main.ui.selectedSortOrder)"><ui-select-match placeholder="Selected sort order">{{main.ui.selectedSortOrder}}</ui-select-match><ui-select-choices repeat="option in main.ui.orders track by option">{{option}}</ui-select-choices></ui-select></div><div class="control-header" ng-show="main.ui.matrixMetrics">Metric<ui-select class="control-input" ng-model="main.ui.selectedMatrixMetric" ng-change="main.setMetric(\'matrix\', main.ui.selectedMatrixMetric)"><ui-select-match placeholder="Path metric">{{main.ui.selectedMatrixMetric.name}}</ui-select-match><ui-select-choices repeat="option in main.ui.matrixMetrics track by $index">{{main.ui.matrixMetrics[$index].name}}</ui-select-choices></ui-select></div><div class="control-header" ng-show="main.ui.matrixMetrics">Encoding<ui-select class="control-input" ng-model="main.ui.selectedMatrixEncoding" ng-change="main.setEncoding(\'matrix\', main.ui.selectedMatrixMetric, main.ui.selectedMatrixEncoding)"><ui-select-match placeholder="Matrix encoding">{{main.ui.selectedMatrixEncoding.name}}</ui-select-match><ui-select-choices repeat="option in main.ui.matrixEncodings track by $index">{{main.ui.matrixEncodings[$index].name}}</ui-select-choices></ui-select></div><div class="control-header" ng-show="main.ui.matrixHasScaleOption">Scale<ui-select class="control-input" ng-model="main.ui.selectedMatrixScale" ng-change="main.setEncodingScale(\'matrix\', main.ui.selectedMatrixScale)"><ui-select-match placeholder="Color scale">{{main.ui.selectedMatrixScale}}</ui-select-match><ui-select-choices repeat="option in main.ui.matrixScales track by option">{{option}}</ui-select-choices></ui-select></div><div ng-show="main.model.getIntermediateNodeIndexes().length && main.isNodeListVisible"><h4>Int. Node Table Controls</h4><div class="control-header">Aggregate rows<ui-select class="control-input" ng-model="main.ui.selectedIntermediateRowAttr" ng-change="main.onCollapseIntermediateRows(main.ui.selectedIntermediateRowAttr)"><ui-select-match placeholder="Categorical attribute to collapse rows">{{main.ui.selectedIntermediateRowAttr}}</ui-select-match><ui-select-choices repeat="option in main.ui.availableCategoricalAttr track by option">{{option}}</ui-select-choices></ui-select></div><div class="control-header" ng-show="main.ui.matrixMetrics">Metric<ui-select class="control-input" ng-model="main.ui.selectedNodeListMetric" ng-change="main.setMetric(\'nodeList\', main.ui.selectedNodeListMetric)"><ui-select-match placeholder="Path metric">{{main.ui.selectedNodeListMetric.name}}</ui-select-match><ui-select-choices repeat="option in main.ui.nodeListMetrics track by $index">{{main.ui.nodeListMetrics[$index].name}}</ui-select-choices></ui-select></div><div class="control-header" ng-show="main.ui.matrixMetrics">Encoding<ui-select class="control-input" ng-model="main.ui.selectedNodeListEncoding" ng-change="main.setEncoding(\'nodeList\', main.ui.selectedNodeListMetric, main.ui.selectedNodeListEncoding)"><ui-select-match placeholder="Matrix encoding">{{main.ui.selectedNodeListEncoding.name}}</ui-select-match><ui-select-choices repeat="option in main.ui.matrixEncodings track by $index">{{main.ui.nodeListEncodings[$index].name}}</ui-select-choices></ui-select></div><div class="control-header" ng-show="main.ui.nodeListHasScaleOption">Scale<ui-select class="control-input" ng-model="main.ui.selectedNodeListScale" ng-change="main.setEncodingScale(\'nodeList\', main.ui.selectedNodeListScale)"><ui-select-match placeholder="Color scale">{{main.ui.selectedNodeListScale}}</ui-select-match><ui-select-choices repeat="option in main.ui.matrixScales track by option">{{option}}</ui-select-choices></ui-select></div></div><div class="control-header" ng-show="main.ui.hasLegend"><b>Legend</b><svg id="encoding-legend"></svg></div></div></div><div ng-show="main.hasGoodData" class="pane center-pane grow-1 vflex"><h4 class="no-margin">Connectivity Matrix</h4><div id="matrices-row" class="grow-1 vflex"></div></div><div ng-show="main.hasGoodData && main.model.getIntermediateNodeIndexes().length && main.isNodeListVisible" class="pane pane-center-right vflex intermediate-nodes"><div ng-show="main.model.getIntermediateNodeIndexes().length" class="vflex grow-1"><h4 class="no-margin">Int. Node Table</h4><div id="node-list-col" class="grow-1 vflex"></div></div></div><div ng-show="main.hasGoodData && !main.isNodeListVisible" class="pane pane-center-right"></div><div ng-show="!main.hasGoodData" class="pane center-pane loading-pane grow-1 hflex vflex"><h3 ng-show="!main.hasGoodData && !main.hasActiveQuery && !main.isLoadingFromFile">Run a query to create a matrix...</h3><h3 ng-show="main.isLoadingFromFile && !main.hasActiveQuery">Loading matrix from file...</h3><h3 ng-show="main.hasActiveQuery">Running query and building matrix...</h3><div ng-show="main.hasActiveQuery || main.isLoadingFromFile"><i class="fa fa-spinner fa-spin" style="font-size:48px"></i></div><h3 ng-show="main.hasQueryError">Something went wrong...</h3><h4 ng-show="main.hasQueryError">{{main.queryError}}</h4></div><div ng-show="main.areDetailsVisible && main.hasGoodData" class="pane right-pane grey-border vflex"><uib-tabset active="1" type="tabs" class="grow-1 vflex" style="display: inline-flex !important;"><uib-tab index="0" heading="{{main.availablePanels[0]}}"><div class="grow-1 vflex"><node-link-view-directive view-state="main.viewState" main-controller="main" class="vflex grow-1"></node-link-view-directive></div></uib-tab><uib-tab index="1" heading="{{main.availablePanels[1]}}"><div path-list-view-directive="" view-state="main.viewState" main-controller="main" class="vflex grow-1"></div></uib-tab></uib-tabset></div></div>'),
t.put("app/components/adjustableColorScale/adjustableColorScale.directive.html",'<div><b>{{controller.metric}}</b> <span class="matrix-view-edit-attribute-controls"></span></div><span class="legend-container"></span>'),t.put("app/components/dataSelection/dataSelection.html",'<div class="modal-header"><h4 class="inline modal-title">Select dataset</h4></div><div class="modal-body"><div style="border-bottom: 1px solid #e5e5e5; padding-bottom: 10px"><span class="modal-line-header">Load data:</span> <input class="btn btn-default btn-xs" readonly="true" type="text" ng-model="controller.filename"> <label class="btn btn-xs btn-default btn-file">Select file <input style="display:none;" type="file" accept=".json" ng-model="controller.filename" onchange="angular.element(this).scope().controller.onFileChanged(this)"></label><div class="float-right"><span ng-show="controller.isUserDataOk">Network parsed! Nodes: {{controller.userData.nodes.length}} Edges: {{controller.userData.edges.length}}</span> <span ng-show="controller.userDataError" class="red-text">Could not find nodes and edges in {{controller.filename}}</span> <button ng-disabled="!controller.isUserDataOk" class="btn btn-xs btn-primary" type="button" ng-click="controller.go(controller.userData)">Go!</button></div></div><div style="padding-top: 10px" ng-repeat="dataName in controller.defaultDataName"><span class="modal-line-header">Preset data:</span> {{dataName}}<div class="float-right">Nodes: {{controller.defaultData[$index].nodes.length}} Edges: {{controller.defaultData[$index].edges.length}} <button class="btn btn-xs btn-primary" type="button" ng-click="controller.go(controller.defaultData[$index])">Go!</button></div></div></div><div class="modal-footer"><button class="btn btn-xs btn-primary btn-warning" type="button">Help!</button></div>'),t.put("app/components/modals/modalHistogramFilter.html",'<div class="modal-header"><h3 class="modal-title">{{modalController.title}}</h3></div><div class="modal-body"><div ng-show="modalController.errorMessage">{{modalController.errorMessage}}</div><div>Number of bins: <input type="number" style="width: 4em;" ng-model="modalController.numBins" ng-change="modalController.histogram.setNumBins(modalController.numBins)"></div><div></div><svg></svg></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="modalController.ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="modalController.cancel()">Cancel</button></div>'),t.put("app/components/modals/modalListFilter.html",'<div class="modal-header"><h3 class="modal-title">{{modalController.title}}</h3></div><div class="modal-body"><div ng-repeat="item in modalController.items"><input type="checkbox" ng-model="modalController.isItemSelected[item]">{{item}}</div></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="modalController.ok()">OK</button> <button class="btn btn-warning" type="button" ng-click="modalController.cancel()">Cancel</button></div>'),t.put("app/components/numPaths/numPaths.directive.html",'<div><b>Query statistics</b></div><div style="display: inline-block"><div class="numPathsLabel">Length</div><div class="numPathsLabel">Paths</div></div><div style="display:inline-block"><div class="numPaths" style="display: inline-block" ng-repeat="(key, value) in numPathsController.paths"><div>{{key}}</div><div ng-show="numPathsController.numVisiblePathsPerHops != null" class="label label-primary numPathsValue">{{numPathsController.numVisiblePathsPerHops[key]}} ({{(numPathsController.numVisiblePathsPerHops[key] / value.length * 100).toFixed(1)}}%)</div><div ng-show="numPathsController.numVisiblePathsPerHops == null" class="label label-primary numPathsValue">{{value.length}}</div></div></div>'),t.put("app/components/nodeLinkView/nodeLinkView.directive.html",'<h4>Node Link</h4><div ng-show="controller.paths" class="grow-1 vflex"><div class="control-header">Layout<ui-select ng-model="controller.ui.selectedLayout" ng-change="controller.onLayoutChanged(controller.ui.selectedLayout)" class="control-input"><ui-select-match placeholder="layout">{{controller.ui.selectedLayout}}</ui-select-match><ui-select-choices repeat="option in controller.ui.availableLayouts track by option">{{option}}</ui-select-choices></ui-select></div><br><div class="node-link-view-container grow-1" id="node-link-column"><svg id="node-link-svg"></svg></div></div><div ng-show="!controller.paths">Select some paths to see a node-link view.</div>'),t.put("app/components/queryBuilder/queryBuilder.directive.html",'<h4 class="inline">{{queryController.isMarclabData ? "Connectome" : "Flight"}} Query</h4><div><div class="input-group query-builder-item query-builder-input"><span class="input-group-addon query-builder-addon">{{!queryController.isMarclabData ? "Max len" : "Len"}}</span><ui-select theme="bootstrap" ng-model="queryController.ui.selectedNumHops" ng-change="queryController.setNumHops(queryController.ui.selectedNumHops)" ng-disabled="queryController.isCypherWritable"><ui-select-match>{{queryController.ui.selectedNumHops}}</ui-select-match><ui-select-choices repeat="option in queryController.ui.availableNumHops">{{option}}</ui-select-choices></ui-select></div><div ng-repeat="key in queryController.ui.keys track by $index" style="width: 100%"><div class="input-group query-builder-item query-builder-input" ng-if="($index == 0 || $index == queryController.ui.keys.length-1) && !queryController.isMarclabData || queryController.isMarclabData"><span class="input-group-addon query-builder-addon">{{key}}</span><tags-input ng-model="queryController.ui.nodes[$index]" placeholder="{{queryController.placeholder}}" replace-spaces-with-dashes="false" ng-disabled="queryController.isCypherWritable" on-tag-added="queryController.onQueryModified()" on-tag-removed="queryController.onQueryModified()" add-from-autocomplete-only="true"><auto-complete min-length="1" source="queryController.loadNodeSuggestions($query)" display-property="text"></auto-complete></tags-input></div><div ng-if="key == \'Node\' && !queryController.isMarclabData && queryController.hasIntermediateNodeFilters()">Middle Nodes</div><div style="padding-left: 4.5em"><div ng-repeat="filter in queryController.filters[key]"><span ng-if="filter" class="query-builder-filter"><i class="fa fa-filter matrix-view-toolbar-item" title="edit filter" ng-click="queryController.main.openNodeAttributeFilter(filter.attribute, null, filter.attributeNodeGroup)"></i> <span ng-if="filter.isQuantitative">{{filter.attribute}} in [{{ filter.filter[0] | number:2 }} , {{ filter.filter[1] | number:2 }}]</span> <span ng-if="!filter.isQuantitative"><span ng-if="filter.filterTexts.length < 3">{{filter.attribute}} not in [<span ng-repeat="item in filter.filterTexts">{{item}}</span>]</span> <span ng-if="filter.filterTexts.length >= 3">Filtering {{filter.filterTexts.length}} {{filter.attribute}}s</span></span> <i class="fa fa-close matrix-view-toolbar-item" ng-click="queryController.main.resetAttributeFilter(filter.attribute, filter.attributeNodeGroup)" title="remove filter"></i></span></div></div><div class="input-group query-builder-item query-builder-input" ng-show="$index < queryController.ui.keys.length - 1 && queryController.isMarclabData"><span class="input-group-addon query-builder-addon">Edge</span><tags-input placeholder="{{queryController.placeholder}}" ng-model="queryController.ui.edges[$index]" replace-spaces-with-dashes="false" ng-disabled="queryController.isCypherWritable" on-tag-added="queryController.onQueryModified()" on-tag-removed="queryController.onQueryModified()" add-from-autocomplete-only="true"><auto-complete min-length="1" source="queryController.loadEdgeSuggestions($query)" display-property="text"></auto-complete></tags-input></div></div></div><div ng-show="queryController.isCypherVisible"><textarea class="query-builder-text-area" placeholder="Write a query that returns path(s) p" ng-model="queryController.cypher" ng-disabled="!queryController.isCypherWritable" ng-change="queryController.onQueryModified()">\r\n  </textarea></div><div class="input-group query-builder-item query-builder-input"><tr><td><button type="button" class="btn btn-default btn-xs" ng-click="queryController.isCypherVisible =! queryController.isCypherVisible;" ng-disabled="queryController.isCypherWritable">{{ !queryController.isCypherVisible ? "Show cypher" : "Hide cypher" }}</button> <button type="button" class="btn btn-default btn-xs" ng-click="queryController.isCypherWritable =! queryController.isCypherWritable;" ng-show="queryController.isCypherVisible && !queryController.isCypherWritable"><i class="fa fa-pencil" title="edit cypher"></i></button> <button type="button" class="btn btn-default btn-xs" ng-click="queryController.isCypherWritable =! queryController.isCypherWritable;" ng-show="queryController.isCypherVisible && queryController.isCypherWritable"><i class="fa fa-undo" style="transform:rotate(270deg)" title="reset cypher"></i></button></td><td><button type="button" class="btn btn-default btn-xs query-builder-submit-btn" ng-click="queryController.onSubmitClicked()">Submit</button></td></tr></div>'),t.put("app/components/pathListView/pathListView.directive.html",'<h4>Path List</h4><div class="vflex grow-1 vertical-scroll" ng-if="controller.pathListModel.rows.length > 0"><table style="width:100%"><thead><tr class="path-list-header-row"><th></th><th>Paths</th><th class="path-list-attribute-col" ng-click="controller.orderByField=\'paths[0].length\'; controller.descending=!controller.descending">Len</th><th class="path-list-attribute-col" ng-click="controller.orderByField=\'paths.length\'; controller.descending=!controller.descending">Freq</th></tr></thead><tbody class="path-list-path-body" ng-repeat="row in controller.pathListModel.rows | orderBy:controller.orderByField:controller.descending"><tr class="path-list-spacer"></tr><tr><td class="path-list-small-cell"><span class="matrix-view-edit-attribute-controls"><i class="fa fa-angle-right" ng-show="!row.isExpanded" ng-click="row.isExpanded=!row.isExpanded;"></i> <i class="fa fa-angle-down" ng-show="row.isExpanded" ng-click="row.isExpanded=!row.isExpanded;"></i></span></td><td><span class="path-list-path"><span ng-repeat="i in row.paths[0] track by $index" class="path-list-path"><span ng-if="$index%2==0" class="path-list-node" ng-class="{\'path-list-hovered\' : controller.hoveredNodes.indexOf(row.paths[0][$index]) != -1}" ng-mouseover="controller.hoverNodes([row.paths[0][$index]])" ng-mouseleave="controller.hoverNodes()">{{controller.model.getMajorLabels([row.paths[0][$index]])[0]}}<br>{{controller.mainController.isMarclabData ? controller.model.getNodeAttr([row.paths[0][$index]], "label")[0] : ""}}</span> <span ng-show="$index%2==1" class="path-list-edge"></span></span></span></td><td class="path-list-attribute-col">{{(row.paths[0].length + 1) / 2}}</td><td class="path-list-attribute-col">{{row.paths.length}}</td></tr><tr ng-show="row.isExpanded"><td colspan="1"></td><td colspan="4"><table style="width: 100%;"><thead><tr><td class="path-list-small-cell"></td><td ng-repeat="i in row.paths[0] track by $index" ng-if="$index %2 == 1"><span class="path-list-child-edge"><b>Edge {{($index + 1) / 2}}</b></span></td></tr></thead><tbody ng-repeat="path in row.paths track by $index"><tr><td ng-click="row.isPathExpanded[$index]=!row.isPathExpanded[$index];" class="path-list-small-cell"><span class="matrix-view-edit-attribute-controls"><i class="fa fa-angle-right" ng-show="!row.isPathExpanded[$index]"></i> <i class="fa fa-angle-down" ng-show="row.isPathExpanded[$index]"></i></span></td><td ng-repeat="i in path track by $index" ng-if="$index %2 == 1"><span class="path-list-child-edge" ng-bind-html="controller.pathListModel.getEdgeDescription(path[$index])"></span></td></tr><tr ng-show="row.isPathExpanded[$index]"><td></td><td ng-repeat="i in path track by $index" ng-if="$index %2 == 1"><span class="path-list-child-edge" ng-bind-html="controller.pathListModel.getEdgeDetails(path[$index])"></span></td></tr></tbody></table></td></tr></tbody></table></div><div ng-if="!controller.paths">Select some paths to see a list!</div>'),t.put("app/components/query/query.directive.html",'<textarea class="query-text-area" type="text" placeholder="Write a query that returns path(s) p" ng-model="queryController.cypherQuery">\r\n</textarea> <button ng-click="queryController.submit({query:queryController.cypherQuery})" class="btn btn-default query-button" ng-disabled="queryController.submitDisabled">Submit</button>'),t.put("app/components/queryBuilderRegex/queryBuilderRegex.directive.html",'<h4 class="inline">Connectome Query</h4><div><div class="input-group query-builder-item query-builder-input"><span class="input-group-addon query-builder-addon">Len</span><ui-select theme="bootstrap" ng-model="queryController.ui.selectedNumHops" ng-change="queryController.setNumHops(queryController.ui.selectedNumHops)" ng-disabled="queryController.isCypherWritable"><ui-select-match>{{queryController.ui.selectedNumHops}}</ui-select-match><ui-select-choices repeat="option in queryController.ui.availableNumHops">{{option}}</ui-select-choices></ui-select></div><div ng-repeat="node in queryController.ui.nodes track by $index" style="width: 100%"><div class="input-group query-builder-item query-builder-input"><span class="input-group-addon query-builder-addon">Node #{{$index}}</span> <input type="text" class="form-control" ng-model="queryController.ui.nodes[$index]"></div><div ng-if="$index < queryController.ui.nodes.length-1" class="input-group query-builder-item query-builder-input"><span class="input-group-addon query-builder-addon">Edge #{{$index}}</span> <input type="text" class="form-control" ng-model="queryController.ui.edges[$index]"></div></div></div><div class="input-group query-builder-item query-builder-input"><button type="button" class="btn btn-default btn-xs query-builder-submit-btn" ng-click="queryController.onSubmitClicked()">Submit</button></div>')}]);
//# sourceMappingURL=../maps/scripts/app-38581618a6.js.map
